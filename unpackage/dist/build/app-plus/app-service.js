(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["app-service"],{"011a":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("cc1c")),a=r(n("343e"));function r(t){return t&&t.__esModule?t:{default:t}}var o={name:"UniListItem",components:{uniIcons:i.default,uniBadge:a.default},props:{icons:{type:String,default:""},genre:{type:Number,default:1},title:{type:String,default:""},note:{type:String,default:""},picture:{type:String,default:""},amount:{type:[String,Number],default:""},budget:{type:String,default:""},remarks:{typ:String,default:""},datetime:{type:String,default:""},disabled:{type:[Boolean,String],default:!1},showArrow:{type:[Boolean,String],default:!0},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},rightText:{type:String,default:""},thumb:{type:String,default:""},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:function(){return{type:"contact",color:"#000000",size:20}}}},inject:["list"],data:function(){return{isFirstChild:!1}},mounted:function(){this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0)},methods:{onClick:function(){this.$emit("click")},onLongpress:function(){this.$emit("longpress")},onSwitchChange:function(t){this.$emit("switchChange",t.detail)},onshowproof:function(t){this.$emit("onshowproof",t)}}};e.default=o},"0401":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("fc91"));function a(t){return t&&t.__esModule?t:{default:t}}var r={components:{uniNavBar:i.default},data:function(){return{version:""}},onShow:function(){this.getVersionCode()},methods:{toback:function(){uni.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},getVersionCode:function(){alert("Application(apk/ipa) version："+plus.runtime.versionCode),this.version=plus.runtime.versionCode}}};e.default=r},"0483":function(t,e,n){"use strict";n.r(e);var i=n("5882"),a=n("4ade");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"67dfd2a0",null,!1,i["a"],o);e["default"]=c.exports},"04c7":function(t,e,n){"use strict";n.r(e);var i=n("a1b4"),a=n("2292");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},"09a0":function(t,e,n){"use strict";n.r(e);var i=n("4517"),a=n("6584");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"bc035dd8",null,!1,i["a"],o);e["default"]=c.exports},"0de9":function(t,e,n){"use strict";function i(t){var e=Object.prototype.toString.call(t);return e.substring(8,e.length-1)}function a(){return"string"===typeof __channelId__&&__channelId__}function r(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.shift();if(a())return e.push(e.pop().replace("at ","uni-app:///")),console[r]["apply"](console,e);var o=e.map((function(t){var e=Object.prototype.toString.call(t);if("[object object]"===e.toLowerCase())try{t="---BEGIN:JSON---"+JSON.stringify(t)+"---END:JSON---"}catch(a){t="[object object]"}else if(null===t)t="---NULL---";else if(void 0===t)t="---UNDEFINED---";else{var n=i(t).toUpperCase();t="NUMBER"===n||"BOOLEAN"===n?"---BEGIN:"+n+"---"+t+"---END:"+n+"---":String(t)}return t})),s="";if(o.length>1){var c=o.pop();s=o.join("---COMMA---"),0===c.indexOf(" at ")?s+=c:s+="---COMMA---"+c}else s=o[0];console[r](s)}n.r(e),n.d(e,"default",(function(){return r}))},"10b5":function(t){t.exports={navs:[{id:1,iconsClass:"iconguanyu",value:"关于"},{id:3,iconsClass:"iconweibiaoti15",value:"账单记录"}]}},"121b":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("8bbf")),a=r(n("2f62"));function r(t){return t&&t.__esModule?t:{default:t}}i.default.use(a.default);var o=new a.default.Store({state:{hasLogin:!1,userId:""},mutations:{login:function(t,e){t.hasLogin=!0,t.userId=e||"",uni.setStorage({key:"userId",data:e})},loginOut:function(t,e){t.hasLogin=!1,t.userId="",uni.removeStorage({key:"userId"})}}}),s=o;e.default=s},"1b19":function(t,e,n){"use strict";n.r(e);var i=n("8ed0"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"1be4":function(t,e,n){"use strict";n.r(e);var i=n("f200"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"1dbf":function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=l(n("fc91")),r=l(n("cc1c")),o=l(n("a6cd")),s=l(n("0483")),c=l(n("2eb3"));function l(t){return t&&t.__esModule?t:{default:t}}function u(t){return f(t)||d(t)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function f(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _={components:{uniCard:o.default,uniIcons:r.default,uniNavBar:a.default,HistogramChart:s.default,PieChart:c.default},data:function(){return{genre:1,resultData:{},typedata:[],yearormonth:!1,Token:uni.getStorageSync("userId")||"",nowdate:{year:"",month:"",day:"",startTime:"",endTime:""},summary:{inAmount:0,intotal:0,exAmount:0,extotal:0,budgetotal:0},cardtitle:"",isnull:!1,histogramData:{categories:[],series:[{name:"",data:[],show:!0,color:"#FF7600",textSize:12}]},pieData:{series:[]}}},onLoad:function(t){var e=new Date;t.year?this.nowdate={year:String(t.year),month:String(Number(t.month)<10?"0"+Number(t.month):t.month),day:String(Number(e.getDate()+1)<10?"0"+e.getDate():e.getDate())}:this.nowdate={year:String(e.getFullYear()),month:String(Number(e.getMonth()+1)<10?"0"+(e.getMonth()+1):e.getMonth()+1),day:String(Number(e.getDate()+1)<10?"0"+e.getDate():e.getDate())},this.cardtitle="".concat(this.nowdate.year,"年").concat(this.nowdate.month,"月")},onShow:function(){this.getSummary(),this.getchartData()},created:function(){},methods:{toback:function(){uni.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},changeYearMonth:function(){this.yearormonth=!this.yearormonth,this.yearormonth?this.cardtitle="".concat(this.nowdate.year,"年"):this.cardtitle="".concat(this.nowdate.year,"年").concat(this.nowdate.month,"月"),this.getchartData(),this.getSummary()},handleCard:function(t){var e=this;if(this.yearormonth){if(1==t){var n=Number(this.nowdate.year);n--,this.nowdate.year=String(n)}else if(2==t){var i=Number(this.nowdate.year);i++,this.nowdate.year=String(i)}this.cardtitle="".concat(this.nowdate.year,"年")}else{if(1==t){var a=Number(this.nowdate.month);if(a--,a=a<10?"0"+a:a,this.nowdate.month=String(a),0==Number(this.nowdate.month)){this.nowdate.month="12";var r=Number(this.nowdate.year);r--,this.nowdate.year=String(r)}}else if(2==t){var o=Number(this.nowdate.month);if(o++,o=o<10?"0"+o:o,this.nowdate.month=String(o),13==Number(this.nowdate.month)){this.nowdate.month="01";var s=Number(this.nowdate.year);s++,this.nowdate.year=String(s)}}this.cardtitle="".concat(this.nowdate.year,"年").concat(this.nowdate.month,"月")}setTimeout((function(){e.getSummary(),e.getchartData()}),500)},handinex:function(t){this.genre=t,this.getchartData()},handletype:function(t){var e=t.useType.label;uni.navigateTo({url:"./search?label="+e})},getSummary:function(){var e=this;uni.showLoading({title:"数据加载中....",mask:!0});var n={range:this.yearormonth?"year":"month",yearMonth:this.nowdate.year+"-"+this.nowdate.month,year:this.nowdate.year,token:this.Token};this.yearormonth||(n.month=this.nowdate.month),t.callFunction({name:"summary",data:n}).then((function(t){uni.hideLoading(),e.summary=t.result})).catch((function(t){uni.hideLoading(),uni.showModal({content:"查询失败，错误信息为：".concat(t.message),showCancel:!1}),i("error",t," at pages\\bill\\chart.vue:276")}))},getchartData:function(){var e=this;uni.showLoading({title:"数据加载中...",mask:!0});var n={genre:this.genre,range:this.yearormonth?"year":"month",year:this.nowdate.year,token:this.Token};this.yearormonth||(n.month=this.nowdate.month),t.callFunction({name:"getchart",data:n}).then((function(t){var n=e.yearormonth?"useMonth":"useDay";t.result.histogramData.data=t.result.histogramData.data.sort(e.utils.compare(n)),t.result.pieData.data=t.result.pieData.data.sort(e.utils.compare("scale")),e.resultData=g({},t.result),e.typedata=u(t.result.pieData.data),uni.hideLoading(),e.working()})).catch((function(t){uni.hideLoading(),uni.showModal({content:"查询失败，错误信息为：".concat(t.message),showCancel:!1})}))},working:function(){var t={categories:[],series:[]},e={series:[]},n=u(this.resultData.histogramData.data),i=u(this.resultData.pieData.data),a=1==this.genre?"支出":"收入",r=[];for(var o in n){var s="";s=this.yearormonth?Number(n[o].useMonth)+"月":Number(n[o].useDay)+"日",t.categories.push(s);var c=1==this.genre?n[o].extotal:n[o].intotal;r.push(c)}for(var l in t.series=[{name:a,data:r,show:!0,textSize:12}],this.histogramData=g({},t),i){var h={name:i[l].useType.label,data:1==this.genre?i[l].extotal:i[l].intotal};e.series.push(h)}this.pieData=g({},e),0==this.pieData.series.length?this.isnull=!0:this.isnull=!1,this.Drawing()},Drawing:function(){var t=this;this.$nextTick((function(){t.$refs["histogramData"].showCharts(),t.$refs["pieChart"].showCharts()}))}}};e.default=_}).call(this,n("a9ff")["default"],n("0de9")["default"])},"1e08":function(t,e,n){"use strict";n.r(e);var i=n("a367"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"1f05":function(t,e,n){"use strict";n.r(e);var i=n("1dbf"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},2292:function(t,e,n){"use strict";n.r(e);var i=n("0401"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"256b":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("cc1c"));function a(t){return t&&t.__esModule?t:{default:t}}var r={name:"UniPagination",components:{uniIcons:i.default},props:{prevText:{type:String,default:"上一页"},nextText:{type:String,default:"下一页"},current:{type:[Number,String],default:1},total:{type:[Number,String],default:0},pageSize:{type:[Number,String],default:10},showIcon:{type:[Boolean,String],default:!1}},data:function(){return{currentIndex:1}},computed:{maxPage:function(){var t=1,e=Number(this.total),n=Number(this.pageSize);return e&&n&&(t=Math.ceil(e/n)),t}},watch:{current:function(t){this.currentIndex=+t}},created:function(){this.currentIndex=+this.current},methods:{clickLeft:function(){1!==Number(this.currentIndex)&&(this.currentIndex-=1,this.change("prev"))},clickRight:function(){Number(this.currentIndex)!==this.maxPage&&(this.currentIndex+=1,this.change("next"))},change:function(t){this.$emit("change",{type:t,current:this.currentIndex})}}};e.default=r},"26f2":function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(n("fc91")),r=s(n("a6cd")),o=n("2f62");function s(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={components:{uniCard:r.default,uniNavBar:a.default},computed:l({},(0,o.mapState)(["hasLogin"])),data:function(){return{tokenId:"",title:"登 录",iseye:!1,isver:!1,phone:"",wxdata:{}}},onLoad:function(e){t("log","option:",e," at pages\\bill\\login.vue:57")},methods:l({},(0,o.mapMutations)(["login"]),{formSubmit:function(e){var n=this;t("log","form发生了submit事件，携带数据为："+JSON.stringify(e.detail.value)," at pages\\bill\\login.vue:80");var a=e.detail.value;if(this.utils.checkPhone(a.phone))if(a.password&&Number(a.password.length)<6)uni.showToast({title:"密码长度不少于6位",icon:"none"});else{var r={};r=l({},this.wxdata,{},a),i.callFunction({name:"login",data:r}).then((function(e){0==e.result.status?(n.login(e.result.token),uni.reLaunch({url:"./index"})):uni.showModal({title:"提示",showCancel:!1,content:e.result.msg,success:function(e){e.confirm&&t("log","用户点击确定"," at pages\\bill\\login.vue:116")}})}))}else uni.showToast({title:"手机号输入错误",icon:"none"})}})};e.default=h}).call(this,n("0de9")["default"],n("a9ff")["default"])},2773:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","datetime-picker"),attrs:{_i:0}},[n("view",{staticClass:t._$s(1,"sc","mask"),class:t._$s(1,"c",{show:t.open}),attrs:{_i:1},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}}),n("view",{staticClass:t._$s(2,"sc","wrap"),class:t._$s(2,"c",{show:t.open}),attrs:{_i:2}},[n("view",{staticClass:t._$s(3,"sc","picker-header"),attrs:{_i:3},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[n("view",{staticClass:t._$s(4,"sc","btn-picker cancel"),style:t._$s(4,"s",{color:t.color}),attrs:{_i:4},on:{click:function(e){t.open=!1}}}),n("view",{staticClass:t._$s(5,"sc","btn-picker submit"),style:t._$s(5,"s",{backgroundColor:t.color}),attrs:{_i:5},on:{click:t._onSubmit}})]),n("view",{staticClass:t._$s(6,"sc","picker-body"),attrs:{_i:6}},[n("picker-view",{attrs:{value:t._$s(7,"a-value",t.value),_i:7},on:{change:t._onChange}},[n("picker-view-column",t._l(t._$s(9,"f",{forItems:t.years}),(function(e,i,a,r){return n("view",{key:t._$s(9,"f",{forIndex:a,key:"9-"+r}),staticClass:t._$s("9-"+r,"sc","column-item"),attrs:{_i:"9-"+r}},[t._v(t._$s("9-"+r,"t0-0",t._s(e)))])})),0),n("picker-view-column",t._l(t._$s(11,"f",{forItems:t.months}),(function(e,i,a,r){return n("view",{key:t._$s(11,"f",{forIndex:a,key:"11-"+r}),staticClass:t._$s("11-"+r,"sc","column-item"),attrs:{_i:"11-"+r}},[t._v(t._$s("11-"+r,"t0-0",t._s(t._f("formatNum")(e))))])})),0),n("picker-view-column",t._l(t._$s(13,"f",{forItems:t.days}),(function(e,i,a,r){return n("view",{key:t._$s(13,"f",{forIndex:a,key:"13-"+r}),staticClass:t._$s("13-"+r,"sc","column-item"),attrs:{_i:"13-"+r}},[t._v(t._$s("13-"+r,"t0-0",t._s(t._f("formatNum")(e))))])})),0),n("picker-view-column",t._l(t._$s(15,"f",{forItems:t.hours}),(function(e,i,a,r){return n("view",{key:t._$s(15,"f",{forIndex:a,key:"15-"+r}),staticClass:t._$s("15-"+r,"sc","column-item"),attrs:{_i:"15-"+r}},[t._v(t._$s("15-"+r,"t0-0",t._s(t._f("formatNum")(e))))])})),0),n("picker-view-column",t._l(t._$s(17,"f",{forItems:t.minutes}),(function(e,i,a,r){return n("view",{key:t._$s(17,"f",{forIndex:a,key:"17-"+r}),staticClass:t._$s("17-"+r,"sc","column-item"),attrs:{_i:"17-"+r}},[t._v(t._$s("17-"+r,"t0-0",t._s(t._f("formatNum")(e))))])})),0)])])])])},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"2bfa":function(t,e,n){"use strict";n.r(e);var i=n("9bbb"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"2e93":function(t,e,n){"use strict";n.r(e);var i=n("da95"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"2eb3":function(t,e,n){"use strict";n.r(e);var i=n("b980"),a=n("1e08");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},"2f37":function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("fc91")),r=o(n("cc1c"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return u(t)||l(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var h={components:{uniIcons:r.default,uniNavBar:a.default},onLoad:function(t){if(this.icons=s(this.GlobalJson.typdIcons),t.genre&&(this.genre=t.genre,this.iconclass=this.icons[0].iconclass),t.item){this.itemObj=JSON.parse(t.item),this.label=this.itemObj.label,this.iconclass=this.itemObj.iconclass,this.genre=this.itemObj.genre;for(var e=0;e<this.icons.length;e++)this.icons[e].iconclass==this.iconclass&&(this.inds=e)}},data:function(){return{label:"",iconclass:"",itemObj:{},inds:0,icons:[],genre:1,Token:uni.getStorageSync("userId")||""}},methods:{toback:function(){uni.navigateBack({delta:1})},handleIocn:function(t,e){this.inds=e,this.iconclass=t},save:function(){if(this.label){uni.showLoading({title:"数据保存中...",mask:!0});var e={pay:this.itemObj._id?3:1,token:this.Token,genre:this.genre,label:this.label,iconclass:this.iconclass},n=this;this.itemObj._id&&(e._id=this.itemObj._id),t.callFunction({name:"settype",data:e}).then((function(t){i("log","res:",t," at pages\\bill\\addtype.vue:98"),uni.hideLoading(),uni.showToast({title:"保存成功",mask:!0}),setTimeout((function(){n.toback()}),2e3)})).catch((function(t){uni.hideLoading(),uni.showModal({content:"操作失败，请重新操作",showCancel:!1})}))}else uni.showToast({title:"请输入类别名称",icon:"none"})}}};e.default=h}).call(this,n("a9ff")["default"],n("0de9")["default"])},"2f62":function(t,e,n){"use strict";n.r(e),n.d(e,"Store",(function(){return p})),n.d(e,"install",(function(){return O})),n.d(e,"mapState",(function(){return C})),n.d(e,"mapMutations",(function(){return $})),n.d(e,"mapGetters",(function(){return D})),n.d(e,"mapActions",(function(){return I})),n.d(e,"createNamespacedHelpers",(function(){return M}));
/**
 * vuex v3.0.1
 * (c) 2017 Evan You
 * @license MIT
 */
var i=function(t){var e=Number(t.version.split(".")[0]);if(e>=2)t.mixin({beforeCreate:i});else{var n=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[i].concat(t.init):i,n.call(this,t)}}function i(){var t=this.$options;t.store?this.$store="function"===typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}},a="undefined"!==typeof window&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function r(t){a&&(t._devtoolHook=a,a.emit("vuex:init",t),a.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){a.emit("vuex:mutation",t,e)})))}function o(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function s(t){return null!==t&&"object"===typeof t}function c(t){return t&&"function"===typeof t.then}var l=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"===typeof n?n():n)||{}},u={namespaced:{configurable:!0}};u.namespaced.get=function(){return!!this._rawModule.namespaced},l.prototype.addChild=function(t,e){this._children[t]=e},l.prototype.removeChild=function(t){delete this._children[t]},l.prototype.getChild=function(t){return this._children[t]},l.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},l.prototype.forEachChild=function(t){o(this._children,t)},l.prototype.forEachGetter=function(t){this._rawModule.getters&&o(this._rawModule.getters,t)},l.prototype.forEachAction=function(t){this._rawModule.actions&&o(this._rawModule.actions,t)},l.prototype.forEachMutation=function(t){this._rawModule.mutations&&o(this._rawModule.mutations,t)},Object.defineProperties(l.prototype,u);var h=function(t){this.register([],t,!1)};function d(t,e,n){if(e.update(n),n.modules)for(var i in n.modules){if(!e.getChild(i))return void 0;d(t.concat(i),e.getChild(i),n.modules[i])}}h.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},h.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")}),"")},h.prototype.update=function(t){d([],this.root,t)},h.prototype.register=function(t,e,n){var i=this;void 0===n&&(n=!0);var a=new l(e,n);if(0===t.length)this.root=a;else{var r=this.get(t.slice(0,-1));r.addChild(t[t.length-1],a)}e.modules&&o(e.modules,(function(e,a){i.register(t.concat(a),e,n)}))},h.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];e.getChild(n).runtime&&e.removeChild(n)};var f;var p=function(t){var e=this;void 0===t&&(t={}),!f&&"undefined"!==typeof window&&window.Vue&&O(window.Vue);var n=t.plugins;void 0===n&&(n=[]);var i=t.strict;void 0===i&&(i=!1);var a=t.state;void 0===a&&(a={}),"function"===typeof a&&(a=a()||{}),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new h(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new f;var o=this,s=this,c=s.dispatch,l=s.commit;this.dispatch=function(t,e){return c.call(o,t,e)},this.commit=function(t,e,n){return l.call(o,t,e,n)},this.strict=i,m(this,a,[],this._modules.root),y(this,a),n.forEach((function(t){return t(e)})),f.config.devtools&&r(this)},g={state:{configurable:!0}};function v(t,e){return e.indexOf(t)<0&&e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function _(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;m(t,n,[],t._modules.root,!0),y(t,n,e)}function y(t,e,n){var i=t._vm;t.getters={};var a=t._wrappedGetters,r={};o(a,(function(e,n){r[n]=function(){return e(t)},Object.defineProperty(t.getters,n,{get:function(){return t._vm[n]},enumerable:!0})}));var s=f.config.silent;f.config.silent=!0,t._vm=new f({data:{$$state:e},computed:r}),f.config.silent=s,t.strict&&k(t),i&&(n&&t._withCommit((function(){i._data.$$state=null})),f.nextTick((function(){return i.$destroy()})))}function m(t,e,n,i,a){var r=!n.length,o=t._modules.getNamespace(n);if(i.namespaced&&(t._modulesNamespaceMap[o]=i),!r&&!a){var s=A(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit((function(){f.set(s,c,i.state)}))}var l=i.context=b(t,o,n);i.forEachMutation((function(e,n){var i=o+n;w(t,i,e,l)})),i.forEachAction((function(e,n){var i=e.root?n:o+n,a=e.handler||e;S(t,i,a,l)})),i.forEachGetter((function(e,n){var i=o+n;T(t,i,e,l)})),i.forEachChild((function(i,r){m(t,e,n.concat(r),i,a)}))}function b(t,e,n){var i=""===e,a={dispatch:i?t.dispatch:function(n,i,a){var r=P(n,i,a),o=r.payload,s=r.options,c=r.type;return s&&s.root||(c=e+c),t.dispatch(c,o)},commit:i?t.commit:function(n,i,a){var r=P(n,i,a),o=r.payload,s=r.options,c=r.type;s&&s.root||(c=e+c),t.commit(c,o,s)}};return Object.defineProperties(a,{getters:{get:i?function(){return t.getters}:function(){return x(t,e)}},state:{get:function(){return A(t.state,n)}}}),a}function x(t,e){var n={},i=e.length;return Object.keys(t.getters).forEach((function(a){if(a.slice(0,i)===e){var r=a.slice(i);Object.defineProperty(n,r,{get:function(){return t.getters[a]},enumerable:!0})}})),n}function w(t,e,n,i){var a=t._mutations[e]||(t._mutations[e]=[]);a.push((function(e){n.call(t,i.state,e)}))}function S(t,e,n,i){var a=t._actions[e]||(t._actions[e]=[]);a.push((function(e,a){var r=n.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},e,a);return c(r)||(r=Promise.resolve(r)),t._devtoolHook?r.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):r}))}function T(t,e,n,i){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return n(i.state,i.getters,t.state,t.getters)})}function k(t){t._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function A(t,e){return e.length?e.reduce((function(t,e){return t[e]}),t):t}function P(t,e,n){return s(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}function O(t){f&&t===f||(f=t,i(f))}g.state.get=function(){return this._vm._data.$$state},g.state.set=function(t){0},p.prototype.commit=function(t,e,n){var i=this,a=P(t,e,n),r=a.type,o=a.payload,s=(a.options,{type:r,payload:o}),c=this._mutations[r];c&&(this._withCommit((function(){c.forEach((function(t){t(o)}))})),this._subscribers.forEach((function(t){return t(s,i.state)})))},p.prototype.dispatch=function(t,e){var n=this,i=P(t,e),a=i.type,r=i.payload,o={type:a,payload:r},s=this._actions[a];if(s)return this._actionSubscribers.forEach((function(t){return t(o,n.state)})),s.length>1?Promise.all(s.map((function(t){return t(r)}))):s[0](r)},p.prototype.subscribe=function(t){return v(t,this._subscribers)},p.prototype.subscribeAction=function(t){return v(t,this._actionSubscribers)},p.prototype.watch=function(t,e,n){var i=this;return this._watcherVM.$watch((function(){return t(i.state,i.getters)}),e,n)},p.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},p.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),m(this,this.state,t,this._modules.get(t),n.preserveState),y(this,this.state)},p.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=A(e.state,t.slice(0,-1));f.delete(n,t[t.length-1])})),_(this)},p.prototype.hotUpdate=function(t){this._modules.update(t),_(this,!0)},p.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(p.prototype,g);var C=E((function(t,e){var n={};return j(e).forEach((function(e){var i=e.key,a=e.val;n[i]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var i=L(this.$store,"mapState",t);if(!i)return;e=i.context.state,n=i.context.getters}return"function"===typeof a?a.call(this,e,n):e[a]},n[i].vuex=!0})),n})),$=E((function(t,e){var n={};return j(e).forEach((function(e){var i=e.key,a=e.val;n[i]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var i=this.$store.commit;if(t){var r=L(this.$store,"mapMutations",t);if(!r)return;i=r.context.commit}return"function"===typeof a?a.apply(this,[i].concat(e)):i.apply(this.$store,[a].concat(e))}})),n})),D=E((function(t,e){var n={};return j(e).forEach((function(e){var i=e.key,a=e.val;a=t+a,n[i]=function(){if(!t||L(this.$store,"mapGetters",t))return this.$store.getters[a]},n[i].vuex=!0})),n})),I=E((function(t,e){var n={};return j(e).forEach((function(e){var i=e.key,a=e.val;n[i]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var i=this.$store.dispatch;if(t){var r=L(this.$store,"mapActions",t);if(!r)return;i=r.context.dispatch}return"function"===typeof a?a.apply(this,[i].concat(e)):i.apply(this.$store,[a].concat(e))}})),n})),M=function(t){return{mapState:C.bind(null,t),mapGetters:D.bind(null,t),mapMutations:$.bind(null,t),mapActions:I.bind(null,t)}};function j(t){return Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}}))}function E(t){return function(e,n){return"string"!==typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function L(t,e,n){var i=t._modulesNamespaceMap[n];return i}var R={Store:p,install:O,version:"3.0.1",mapState:C,mapMutations:$,mapGetters:D,mapActions:I,createNamespacedHelpers:M};e["default"]=R},"31ad":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","addtype"),attrs:{_i:0}},[n("uni-nav-bar",{attrs:{fixed:"true","status-bar":"true","left-icon":"back",title:"添加分类",color:"#333","background-color":"#f1f1f1",_i:1},on:{clickLeft:t.toback}}),n("view",{staticClass:t._$s(2,"sc","addname"),attrs:{_i:2}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.label,expression:"label"}],attrs:{_i:3},domProps:{value:t._$s(3,"v-model",t.label)},on:{input:function(e){e.target.composing||(t.label=e.target.value)}}}),n("view",{class:t._$s(4,"c",["iconfont",1==t.genre?"exclass":"inclass",t.iconclass]),attrs:{_i:4}})]),n("view",{staticClass:t._$s(5,"sc","listIcon"),attrs:{_i:5}},t._l(t._$s(6,"f",{forItems:t.icons}),(function(e,i,a,r){return n("view",{key:t._$s(6,"f",{forIndex:a,key:i}),staticClass:t._$s("6-"+r,"sc","itemicon"),attrs:{_i:"6-"+r},on:{click:function(n){return t.handleIocn(e.iconclass,i)}}},[n("text",{class:t._$s("7-"+r,"c",["iconfont",t.inds==i?1==t.genre?"acticon actex":"acticon actin":"",e.iconclass]),attrs:{_i:"7-"+r}})])})),0),n("button",{staticClass:t._$s(8,"sc","addtypebut"),attrs:{_i:8},on:{click:t.save}})],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"343e":function(t,e,n){"use strict";n.r(e);var i=n("4b97"),a=n("e523");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"30ebbe0a",null,!1,i["a"],o);e["default"]=c.exports},"3a19":function(t,e,n){"use strict";n.r(e);var i=n("bdc8"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"3b17":function(t,e,n){"use strict";n.r(e);var i=n("c75b"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"3dd4":function(t,e,n){"use strict";n.r(e);var i=n("57fa"),a=n("1f05");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"29cd558d",null,!1,i["a"],o);e["default"]=c.exports},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,i="/";e.cwd=function(){return i},e.chdir=function(e){t||(t=n("df7c")),i=t.resolve(e,i)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},4367:function(t,e,n){"use strict";n.r(e);var i=n("7118"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},4517:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","edit"),attrs:{_i:0}},[n("uni-nav-bar",{attrs:{fixed:"true","status-bar":"true",color:"#333","background-color":"#f1f1f1",_i:1}},[n("view",{staticClass:t._$s(2,"sc","swipaction"),attrs:{_i:2}},[n("view",{class:t._$s(3,"c",1==t.dataobj.genre?"exbor":""),attrs:{_i:3},on:{click:function(e){return t.handleexin(1)}}}),n("view",{class:t._$s(4,"c",2==t.dataobj.genre?"inbor":""),attrs:{_i:4},on:{click:function(e){return t.handleexin(2)}}})]),n("view",{attrs:{_i:5},on:{click:t.toback},slot:"left"},[n("uni-icons",{attrs:{type:"back",size:"30",_i:6}})],1)]),n("view",{staticClass:t._$s(7,"sc","box"),attrs:{_i:7}},[n("view",{staticClass:t._$s(8,"sc","boxi"),attrs:{_i:8}},[n("view",{staticClass:t._$s(9,"sc","boxleft amount"),attrs:{_i:9}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.dataobj.amount,expression:"dataobj.amount"}],attrs:{_i:10},domProps:{value:t._$s(10,"v-model",t.dataobj.amount)},on:{input:function(e){e.target.composing||t.$set(t.dataobj,"amount",e.target.value)}}})]),n("view",{staticClass:t._$s(11,"sc","boxright"),attrs:{_i:11},on:{click:function(e){return t.showModel(1)}}},[t._$s(12,"i",t.dataobj.useType.iconclass)?n("view",{class:t._$s(12,"c",["iconfont",1==t.dataobj.genre?"exclass":"inclass",t.dataobj.useType.iconclass]),attrs:{_i:12}}):t._e(),n("text",[t._v(t._$s(13,"t0-0",t._s(t.dataobj.useType.label)))]),n("uni-icons",{attrs:{type:"arrowdown",_i:14}})],1)]),n("view",{staticClass:t._$s(15,"sc","boxi"),attrs:{_i:15}},[n("view",{staticClass:t._$s(16,"sc","boxleft"),attrs:{_i:16},on:{click:t.openDatetimePicker}},[t._v(t._$s(16,"t0-0",t._s(t.dataobj.useDate)))]),n("view",{staticClass:t._$s(17,"sc","boxright"),attrs:{_i:17},on:{click:function(e){return t.showModel(2)}}},[n("text",[t._v(t._$s(18,"t0-0",t._s(t.dataobj.payType.label)))]),n("uni-icons",{attrs:{type:"arrowdown",_i:19}})],1)]),n("view",{staticClass:t._$s(20,"sc","boxi"),attrs:{_i:20}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataobj.remarks,expression:"dataobj.remarks"}],attrs:{_i:21},domProps:{value:t._$s(21,"v-model",t.dataobj.remarks)},on:{input:function(e){e.target.composing||t.$set(t.dataobj,"remarks",e.target.value)}}})])]),n("view",{staticClass:t._$s(22,"sc","picturebox"),attrs:{_i:22}},[t._$s(23,"i",t.dataobj.picture)?n("view",{staticClass:t._$s(23,"sc","upimg"),attrs:{_i:23}},[n("view",{staticClass:t._$s(24,"sc","closei"),attrs:{_i:24},on:{click:t.closeimgSrc}},[n("uni-icons",{attrs:{type:"closeempty",size:"24",color:"#fff",_i:25}})],1),n("image",{staticClass:t._$s(26,"sc","imgsrc"),attrs:{src:t._$s(26,"a-src",t.dataobj.picture),_i:26},on:{click:t.seeimgsrc}})]):t._e(),t._$s(27,"i",!t.dataobj.picture)?n("view",{staticClass:t._$s(27,"sc","plusimg"),attrs:{_i:27},on:{click:t.upload}},[n("uni-icons",{attrs:{type:"plus",size:"70",color:"#999",_i:28}}),n("text",{directives:[{name:"show",rawName:"v-show",value:t._$s(29,"v-show",1==t.dataobj.genre),expression:"_$s(29,'v-show',dataobj.genre==1)"}],attrs:{_i:29}}),n("text",{directives:[{name:"show",rawName:"v-show",value:t._$s(30,"v-show",2==t.dataobj.genre),expression:"_$s(30,'v-show',dataobj.genre==2)"}],attrs:{_i:30}})],1):t._e()]),n("button",{staticClass:t._$s(31,"sc","savebut"),attrs:{_i:31},on:{click:t.saveData}}),n("uni-popup",{ref:"popup",attrs:{type:"bottom",_i:32}},[t._$s(33,"i",2==t.ismolnum)?n("view",{staticClass:t._$s(33,"sc","tables"),attrs:{_i:33}},t._l(t._$s(34,"f",{forItems:t.paytype}),(function(e,i,a,r){return n("view",{key:t._$s(34,"f",{forIndex:a,key:i}),staticClass:t._$s("34-"+r,"sc","payitem"),attrs:{_i:"34-"+r},on:{click:function(n){return t.handlepay(e)}}},[n("text",[t._v(t._$s("35-"+r,"t0-0",t._s(e.label)))])])})),0):t._e(),t._$s(36,"i",1==t.ismolnum)?n("view",{staticClass:t._$s(36,"sc","tables2"),attrs:{_i:36}},t._l(t._$s(37,"f",{forItems:t.typeitems}),(function(e,i,a,r){return n("view",{key:t._$s(37,"f",{forIndex:a,key:i}),staticClass:t._$s("37-"+r,"sc","titem"),attrs:{_i:"37-"+r},on:{click:function(n){return t.handleType(e)}}},[n("view",{class:t._$s("38-"+r,"c",["iconfont",1==t.dataobj.genre?"exclass":"inclass",e.iconclass]),attrs:{_i:"38-"+r}}),n("text",{staticClass:t._$s("39-"+r,"sc","tlabel"),attrs:{_i:"39-"+r}},[t._v(t._$s("39-"+r,"t0-0",t._s(e.label)))])])})),0):t._e()]),n("uni-popup",{ref:"picture",attrs:{type:"center",_i:40}},[n("image",{attrs:{src:t._$s(41,"a-src",t.dataobj.picture),_i:41}})]),n("simple-datetime-picker",{ref:"myPicker",attrs:{"start-year":2020,"end-year":2035,color:"#007aff",_i:42},on:{submit:t.handleSubmit}})],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"45df":function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r=h(n("cc1c")),o=h(n("bbd0")),s=h(n("b50e")),c=h(n("fc91")),l=h(n("8f42")),u=h(n("c806"));function h(t){return t&&t.__esModule?t:{default:t}}function d(t){return g(t)||p(t)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function g(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var v={components:{uniList:u.default,uniListItem:l.default,uniNavBar:c.default,uniPopup:s.default,uniLoadMore:o.default,uniIcons:r.default},onLoad:function(t){t.label?(this.valueInput=t.label,this.isfocus=!1,this.search()):this.getkeys()},data:function(){return{inds:"",imgUrl:"",pageNum:0,Token:uni.getStorageSync("userId")||"",isnull:!1,isfocus:!0,issearch:!0,issearch_log:!0,opearObj:{},valueInput:"",keys:[],search_keys:[],listData:{},status:"more",showLoadMore:!1,loadMoreText:"加载中..."}},onUnload:function(){this.listData={},this.pageNum=0,this.status="more",this.showLoadMore=!1},onReachBottom:function(){this.pageNum+=1,100*this.pageNum>this.listData.total?uni.showToast({icon:"none",duration:2e3,title:"没有更多数据了"}):(this.status="loading",this.showLoadMore=!0,this.search())},onPullDownRefresh:function(){this.status="loading",this.showLoadMore=!0,this.pageNum=0,this.search()},methods:{toback:function(){uni.navigateBack({delta:1})},inputValue:function(t){var e=this,n=t.target.value,i=0;a&&clearInterval(a),!n&&this.isnull&&(this.showLoadMore=!1,this.isnull=!1),a=setInterval((function(){if(i++,30===i&&n){e.valueInput=n,e.pageNum=0,e.keys.push(e.valueInput);var r=e.keys.join(",");clearInterval(a);try{uni.setStorageSync("search_key",r)}catch(t){}e.pageNum=0,e.search()}}),50)},search:function(){var e=this;this.issearch&&(this.issearch=!1,this.isfocus=!1,uni.showLoading({title:"数据加载中..."}),t.callFunction({name:"get",data:{token:this.Token,pageNum:this.pageNum,label:this.valueInput}}).then((function(t){if(uni.hideLoading(),i("log",t," at pages\\bill\\search.vue:194"),e.issearch=!0,e.showLoadMore=!1,e.issearch_log=!1,-1!=t.result.status)if(t.result.total>0){e.isnull=!1;var n=d(t.result.list);0==e.pageNum?e.listData=t.result:e.listData.list=e.listData.list.concat(n)}else{0==e.pageNum&&(e.listData={},e.isnull=!0);var a=e.pageNum>0?"没有更多数据了":t.result.data.msg;uni.showToast({icon:"none",duration:2e3,title:a})}else e.isnull=!0})).catch((function(t){uni.hideLoading(),e.issearch=!0,e.isnull=!1,uni.showToast({icon:"none",duration:2e3,title:"未查询到相关信息"})})))},getkeys:function(){try{var t=uni.getStorageSync("search_key");if(t){var e=t.split(",");this.keys=Array.from(new Set(e))}}catch(n){}},handlesey:function(t){this.valueInput=t,this.search()},handledel:function(t,e){this.keys.splice(e,1);var n=this.keys.join(",");try{uni.setStorageSync("search_key",n)}catch(i){}},clearAll:function(){this.keys=[];try{uni.setStorageSync("search_key","")}catch(t){}},onshowproof:function(t){this.imgUrl=t,this.$refs.picture.open()},handleItem:function(t){uni.navigateTo({url:"./details?id="+t})},handleLong:function(t,e){this.inds=e,this.opearObj=t,this.$refs.searchPopup.open()},moreOper:function(e){var n=this;1==e?this.handleItem(this.opearObj._id):uni.showModal({title:"提示",content:"是否确认删除此条数据？",success:function(e){e.confirm?(uni.showLoading({title:"数据删除中..."}),t.callFunction({name:"remove",data:{dataId:n.opearObj._id}}).then((function(t){uni.hideLoading(),uni.showToast({title:t.result.msg,duration:2e3}),n.listData.list.splice(n.inds,1)})).catch((function(t){uni.hideLoading(),uni.showModal({content:"操作失败，请重新操作",showCancel:!1}),i("error",t," at pages\\bill\\search.vue:319")}))):e.cancel&&i("log","用户点击取消"," at pages\\bill\\search.vue:323")}}),this.$refs.searchPopup.close()}},created:function(){}};e.default=v}).call(this,n("a9ff")["default"],n("0de9")["default"])},"485c":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","search"),attrs:{_i:0}},[n("uni-nav-bar",{attrs:{fixed:"true","status-bar":"true",color:"#333","background-color":"#f1f1f1",_i:1}},[n("view",[n("input",{staticClass:t._$s(3,"sc","sinput"),attrs:{focus:t._$s(3,"a-focus",t.isfocus),value:t._$s(3,"a-value",t.valueInput),_i:3},on:{input:t.inputValue,confirm:t.inputValue}})]),n("view",{attrs:{_i:4},on:{click:t.toback},slot:"left"},[n("uni-icons",{attrs:{type:"back",size:"30",_i:5}})],1)]),t._$s(6,"i",t.keys.length>0&&t.issearch_log)?n("view",[n("view",{staticClass:t._$s(7,"sc","search_log"),attrs:{_i:7}},t._l(t._$s(8,"f",{forItems:t.keys}),(function(e,i,a,r){return n("view",{key:t._$s(8,"f",{forIndex:a,key:i}),staticClass:t._$s("8-"+r,"sc","logs"),attrs:{_i:"8-"+r},on:{click:function(n){return t.handlesey(e,i)}}},[n("text",[t._v(t._$s("9-"+r,"t0-0",t._s(e)))]),n("uni-icons",{attrs:{type:"clear",color:"#808080",size:"28",_i:"10-"+r},on:{click:function(n){return n.stopPropagation(),t.handledel(e,i)}}})],1)})),0),n("view",{staticClass:t._$s(11,"sc","clearAll"),attrs:{_i:11},on:{click:t.clearAll}})]):t._e(),t._$s(12,"i",!t.isnull)?n("uni-list",{attrs:{_i:12}},[n("uni-list-item",{attrs:{"show-arrow":!1,_i:13}}),t._l(t._$s(14,"f",{forItems:t.listData.list}),(function(e,i,a,r){return[n("uni-list-item",{key:t._$s(14,"f",{forIndex:a,keyIndex:0,key:i+"_0"}),attrs:{title:e.useType.label,note:""+e.payType.label,remarks:e.remarks,amount:e.amount,picture:e.picture,datetime:e.useDate,icons:e.useType.iconclass,genre:e.genre,"show-arrow":!1,_i:"15-"+r},on:{click:function(n){return t.handleItem(e._id)},longpress:function(n){return t.handleLong(e,i)},onshowproof:t.onshowproof}})]})),t._$s(16,"i",t.showLoadMore)?n("uni-load-more",{attrs:{status:t.status,"show-icon":!0,_i:16}}):t._e()],2):t._e(),n("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(17,"v-show",t.isnull),expression:"_$s(17,'v-show',isnull)"}],staticClass:t._$s(17,"sc","nodata"),attrs:{_i:17},on:{click:t.search}},[n("image",{}),n("view",{staticClass:t._$s(19,"sc","notxt"),attrs:{_i:19}})]),n("uni-popup",{ref:"searchPopup",attrs:{type:"center",_i:20}},[n("view",{staticClass:t._$s(21,"sc","operating"),attrs:{_i:21}},[n("view",{attrs:{_i:22},on:{click:function(e){return t.moreOper(1)}}}),n("view",{attrs:{_i:23},on:{click:function(e){return t.moreOper(2)}}})])]),n("uni-popup",{ref:"picture",attrs:{type:"center",_i:24}},[n("image",{attrs:{src:t._$s(25,"a-src",t.imgUrl),_i:25}})])],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"4ade":function(t,e,n){"use strict";n.r(e);var i=n("b62f"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"4b97":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t._$s(0,"i",t.text)?n("text",{staticClass:t._$s(0,"sc","uni-badge"),class:t._$s(0,"c",t.inverted?"uni-badge--"+t.type+" uni-badge--"+t.size+" uni-badge--"+t.type+"-inverted":"uni-badge--"+t.type+" uni-badge--"+t.size),style:t._$s(0,"s",t.badgeStyle),attrs:{_i:0},on:{click:function(e){return t.onClick()}}},[t._v(t._$s(0,"t0-0",t._s(t.text)))]):t._e()},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"532f":function(t,e,n){"use strict";n.r(e);var i=n("7dbe"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"538d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){return t<10?"0"+t:t+""},a={name:"SimpleDatetimePicker",props:{startYear:{type:Number,default:2e3},endYear:{type:Number,default:2030},color:{type:String,default:""}},data:function(){return{open:!1,years:[],months:[],days:[],hours:[],minutes:[],currentDate:new Date,year:"",month:"",day:"",hour:"",minute:"",value:[0,0,0,0,0]}},mounted:function(){this.init()},watch:{month:function(){this.initDays()}},filters:{formatNum:function(t){return i(t)}},methods:{init:function(){this.initYears(),this.initMonths(),this.initDays(),this.initHours(),this.initMinutes(),this.setSelectValue()},initYears:function(){for(var t=[],e=this.startYear;e<=this.endYear;e++)t.push(e),this.currentDate.getFullYear()===e&&this.$set(this.value,0,e-this.startYear);this.years=t},initMonths:function(){for(var t=[],e=1;e<=12;e++)t.push(e),this.currentDate.getMonth()+1===e&&this.$set(this.value,1,e-1);this.months=t},initDays:function(){for(var t=this.years[this.value[0]],e=this.months[this.value[1]],n=[],i=new Date(t,e,0).getDate(),a=1;a<=i;a++)n.push(a),this.currentDate.getDate()===a&&this.$set(this.value,2,a-1);this.days=n},initHours:function(){for(var t=[],e=0;e<=23;e++)t.push(e),this.currentDate.getHours()===e&&this.$set(this.value,3,e);this.hours=t},initMinutes:function(){for(var t=[],e=0;e<60;e++)t.push(e),this.currentDate.getMinutes()===e&&this.$set(this.value,4,e);this.minutes=t},show:function(){this.open=!0},hide:function(){this.open=!1},_onChange:function(t){t.detail.value;this.value=t.detail.value,this.setSelectValue()},setSelectValue:function(){this.year=this.years[this.value[0]],this.month=this.months[this.value[1]],this.day=this.days[this.value[2]],this.hour=this.hours[this.value[3]],this.minute=this.minutes[this.value[4]]},_onSubmit:function(){var t={year:i(this.year),month:i(this.month),day:i(this.day),hour:i(this.hour),minute:i(this.minute)};this.$emit("submit",t),this.hide()}}};e.default=a},"53b4":function(t,e,n){"use strict";n("99cf"),n("921b");var i=l(n("8bbf")),a=l(n("73b0")),r=l(n("da95c")),o=l(n("10b5")),s=l(n("d7ce")),c=l(n("121b"));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}i.default.config.productionTip=!1,i.default.prototype.GlobalJson=r.default,i.default.prototype.Navs=o.default,i.default.prototype.utils=s.default,i.default.prototype.$eventHub=new i.default,i.default.prototype.$store=c.default,i.default.config.productionTip=!1,a.default.mpType="app";var f=new i.default(h({},a.default,{store:c.default}));f.$mount()},"57fa":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","chart"),attrs:{_i:0}},[n("uni-nav-bar",{attrs:{fixed:"true","status-bar":"true","left-icon":"back",title:"账单详情",color:"#333","background-color":"#f1f1f1",_i:1},on:{clickLeft:t.toback}},[n("view",{class:t._$s(2,"c",["iconfont titelIcons",t.yearormonth?"iconGroup-1":"iconGroup-"]),attrs:{_i:2},on:{click:t.changeYearMonth},slot:"right"},[n("text",{staticClass:t._$s(3,"sc","itext"),attrs:{_i:3}},[t._v(t._$s(3,"t0-0",t._s(t.yearormonth?"月":"年")))])])]),n("uni-card",{staticClass:t._$s(4,"sc","cardbox"),attrs:{mode:"basic",_i:4}},[n("view",{staticClass:t._$s(5,"sc","carditem card_title"),attrs:{_i:5}},[n("uni-icons",{attrs:{type:"back",size:"24",color:"#333",_i:6},on:{click:function(e){return t.handleCard(1)}}}),n("text",[t._v(t._$s(7,"t0-0",t._s(t.cardtitle)))]),n("uni-icons",{attrs:{type:"forward",size:"24",color:"#333",_i:8},on:{click:function(e){return t.handleCard(2)}}})],1),n("view",{staticClass:t._$s(9,"sc","carditem extotal"),attrs:{_i:9}},[t._v(t._$s(9,"t0-0",t._s(t.summary.extotal))+t._$s(9,"t0-1",t._s(t.summary.exAmount)))]),n("view",{staticClass:t._$s(10,"sc","carditem intotal"),attrs:{_i:10}},[n("text",[t._v(t._$s(11,"t0-0",t._s(t.summary.intotal))+t._$s(11,"t0-1",t._s(t.summary.inAmount)))]),n("text",{staticClass:t._$s(12,"sc","surplus"),attrs:{_i:12}},[t._v(t._$s(12,"t0-0",t._s(t.summary.budgetotal-t.summary.exAmount)))])])]),n("view",{staticClass:t._$s(13,"sc","inorex"),attrs:{_i:13}},[n("view",{class:t._$s(14,"c",1==t.genre?"selectbox":""),attrs:{_i:14},on:{click:function(e){return t.handinex(1)}}}),n("view",{class:t._$s(15,"c",2==t.genre?"selectbox":""),attrs:{_i:15},on:{click:function(e){return t.handinex(2)}}})]),n("view",[n("histogram-chart",{ref:"histogramData",attrs:{dataAs:t.histogramData,canvasId:"ht0",_i:17}}),n("view",[t._v(t._$s(18,"t0-0",t._s(t.yearormonth?"年":"月"))+t._$s(18,"t0-1",t._s(1==t.genre?"支出":"收入")))])],1),n("view",{staticClass:t._$s(19,"sc","pie_chart"),attrs:{_i:19}},[n("pie-chart",{ref:"pieChart",attrs:{dataAs:t.pieData,canvasId:"index_pie_1",_i:20}}),n("view")],1),n("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(22,"v-show",t.isnull),expression:"_$s(22,'v-show',isnull)"}],staticClass:t._$s(22,"sc","nodata"),attrs:{_i:22},on:{click:t.getchartData}},[n("image",{}),n("view",{staticClass:t._$s(24,"sc","notxt"),attrs:{_i:24}})]),n("view",{staticClass:t._$s(25,"sc","listbox"),attrs:{_i:25}},t._l(t._$s(26,"f",{forItems:t.typedata}),(function(e,i,a,r){return n("view",{key:t._$s(26,"f",{forIndex:a,key:i}),staticClass:t._$s("26-"+r,"sc","boxitem"),attrs:{_i:"26-"+r},on:{click:function(n){return t.handletype(e)}}},[n("view",{staticClass:t._$s("27-"+r,"sc","usetype"),attrs:{_i:"27-"+r}},[n("view",{class:t._$s("28-"+r,"c",["iconfont",1==t.genre?"exclass":"inclass",e.useType.iconclass]),attrs:{_i:"28-"+r}}),t._v(t._$s("27-"+r,"t1-0",t._s(e.useType.label)))]),n("view",[t._v(t._$s("29-"+r,"t0-0",t._s(e.scale)))]),n("view",{staticClass:t._$s("30-"+r,"sc","scale"),attrs:{_i:"30-"+r}},[t._v(t._$s("30-"+r,"t0-0",t._s(1==t.genre?e.extotal:e.intotal))),n("uni-icons",{attrs:{type:"forward",size:"30",color:"#808080",_i:"31-"+r}})],1)])})),0)],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},5882:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","histogram_chart"),attrs:{_i:0}},[n("canvas",{style:t._$s(1,"s",{width:t.cWidth+"px",height:t.cHeight+"px"}),attrs:{canvasId:t._$s(1,"a-canvasId",t.canvasId),id:"canvasId",_i:1},on:{touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend}}),t._t("default",null,{_i:2})],2)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"5c65":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","uni-list"),attrs:{_i:0}},[t._t("default",null,{_i:1})],2)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"5c8b":function(t,e,n){"use strict";n.r(e);var i=n("7e92"),a=n("3a19");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"b0456032",null,!1,i["a"],o);e["default"]=c.exports},"5d8b":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","uni-navbar"),attrs:{_i:0}},[n("view",{staticClass:t._$s(1,"sc","uni-navbar__content"),class:t._$s(1,"c",{"uni-navbar--fixed":t.fixed,"uni-navbar--shadow":t.shadow,"uni-navbar--border":t.border}),style:t._$s(1,"s",{"background-color":t.backgroundColor}),attrs:{_i:1}},[t._$s(2,"i",t.statusBar)?n("uni-status-bar",{attrs:{_i:2}}):t._e(),n("view",{staticClass:t._$s(3,"sc","uni-navbar__header uni-navbar__content_view"),style:t._$s(3,"s",{color:t.color,backgroundColor:t.backgroundColor}),attrs:{_i:3}},[n("view",{staticClass:t._$s(4,"sc","uni-navbar__header-btns uni-navbar__header-btns-left uni-navbar__content_view"),attrs:{_i:4},on:{click:t.onClickLeft}},[t._$s(5,"i",t.leftIcon.length)?n("view",{staticClass:t._$s(5,"sc","uni-navbar__content_view"),attrs:{_i:5}},[n("uni-icons",{attrs:{color:t.color,type:t.leftIcon,size:"24",_i:6}})],1):t._e(),t._$s(7,"i",t.leftText.length)?n("view",{staticClass:t._$s(7,"sc","uni-navbar-btn-text uni-navbar__content_view"),class:t._$s(7,"c",{"uni-navbar-btn-icon-left":!t.leftIcon.length}),attrs:{_i:7}},[n("text",{style:t._$s(8,"s",{color:t.color,fontSize:"14px"}),attrs:{_i:8}},[t._v(t._$s(8,"t0-0",t._s(t.leftText)))])]):t._e(),t._t("left",null,{_i:9})],2),n("view",{staticClass:t._$s(10,"sc","uni-navbar__header-container uni-navbar__content_view"),attrs:{_i:10}},[t._$s(11,"i",t.title.length)?n("view",{staticClass:t._$s(11,"sc","uni-navbar__header-container-inner uni-navbar__content_view"),attrs:{_i:11}},[n("text",{staticClass:t._$s(12,"sc","uni-nav-bar-text"),style:t._$s(12,"s",{color:t.color}),attrs:{_i:12}},[t._v(t._$s(12,"t0-0",t._s(t.title)))])]):t._e(),t._t("default",null,{_i:13})],2),n("view",{staticClass:t._$s(14,"sc","uni-navbar__header-btns uni-navbar__content_view"),class:t._$s(14,"c",t.title.length?"uni-navbar__header-btns-right":""),attrs:{_i:14},on:{click:t.onClickRight}},[t._$s(15,"i",t.rightIcon.length)?n("view",{staticClass:t._$s(15,"sc","uni-navbar__content_view"),attrs:{_i:15}},[n("uni-icons",{attrs:{color:t.color,type:t.rightIcon,size:"24",_i:16}})],1):t._e(),t._$s(17,"i",t.rightText.length&&!t.rightIcon.length)?n("view",{staticClass:t._$s(17,"sc","uni-navbar-btn-text uni-navbar__content_view"),attrs:{_i:17}},[n("text",{staticClass:t._$s(18,"sc","uni-nav-bar-right-text"),attrs:{_i:18}},[t._v(t._$s(18,"t0-0",t._s(t.rightText)))])]):t._e(),t._t("right",null,{_i:19})],2)])],1),t._$s(20,"i",t.fixed)?n("view",{staticClass:t._$s(20,"sc","uni-navbar__placeholder"),attrs:{_i:20}},[t._$s(21,"i",t.statusBar)?n("uni-status-bar",{attrs:{_i:21}}):t._e(),n("view",{staticClass:t._$s(22,"sc","uni-navbar__placeholder-view"),attrs:{_i:22}})],1):t._e()])},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},6584:function(t,e,n){"use strict";n.r(e);var i=n("85cc"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"67ea":function(t,e,n){"use strict";n.r(e);var i=n("f14e"),a=n("be1f");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"9d18e0d4",null,!1,i["a"],o);e["default"]=c.exports},"699e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=uni.getSystemInfoSync().statusBarHeight+"px",a={name:"UniStatusBar",data:function(){return{statusBarHeight:i}}};e.default=a},"6c6a":function(t,e,n){"use strict";n.r(e);var i=n("7509"),a=n("8b50");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},"6d54":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t._$s(0,"i",t.isShow)?n("view",{ref:"ani",staticClass:t._$s(0,"sc","uni-transition"),class:t._$s(0,"c",[t.ani.in]),style:t._$s(0,"s","transform:"+t.transform+";"+t.stylesObject),attrs:{_i:0},on:{click:t.change}},[t._t("default",null,{_i:1})],2):t._e()},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},7118:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniList","mp-weixin":{options:{multipleSlots:!1}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1}},provide:function(){return{list:this}},created:function(){this.firstChildAppend=!1},methods:{loadMore:function(t){this.$emit("scrolltolower")}}};e.default=i},7180:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("text",{staticClass:t._$s(0,"sc","uni-icons"),style:t._$s(0,"s",{color:t.color,"font-size":t.size+"px"}),attrs:{_i:0},on:{click:t._onClick}},[t._v(t._$s(0,"t0-0",t._s(t.icons[t.type])))])},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},7324:function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r=o(n("fc91"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=(a={components:{uniNavBar:r.default},onShow:function(){try{var t=uni.getStorageSync("editData");if(t){this.listdata=t;try{uni.removeStorageSync("editData")}catch(e){}}}catch(e){}},onLoad:function(t){t.id&&(this.dataId=t.id)},props:{}},s(a,"onShow",(function(){this.dataId&&this.getoneData(this.dataId)})),s(a,"data",(function(){return{dataId:"",listdata:{},Token:uni.getStorageSync("userId")||""}})),s(a,"methods",{toback:function(){uni.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},getoneData:function(e){var n=this;t.callFunction({name:"get",data:{token:this.Token,id:e,pageNum:0}}).then((function(t){uni.hideLoading(),t.result.total>0&&(n.listdata=t.result.list[0])})).catch((function(t){uni.hideLoading(),uni.showToast({icon:"none",mask:!0,title:"未查询到相关信息"})}))},deldata:function(){var e=this;uni.showModal({title:"提示",content:"是否确认删除此条数据？",success:function(n){n.confirm?t.callFunction({name:"remove",data:{dataId:e.listdata._id,token:e.Token}}).then((function(t){uni.showToast({title:"".concat(t.result.msg),duration:2e3}),setTimeout((function(){e.toback()}),2e3)})).catch((function(t){uni.showModal({content:"操作失败，请重新操作",showCancel:!1}),i("error",t," at pages\\bill\\details.vue:160")})):n.cancel&&i("log","用户点击取消"," at pages\\bill\\details.vue:163")}})},editdata:function(){this.listdata.picture=this.listdata.picture?this.listdata.picture:"",i("log","this.listdata:",this.listdata," at pages\\bill\\details.vue:171"),delete this.listdata.uniCloudClientInfo,delete this.listdata.useType.uniCloudClientInfo;var t=JSON.stringify(this.listdata);uni.redirectTo({url:"./edit?item="+t})}}),a);e.default=c}).call(this,n("a9ff")["default"],n("0de9")["default"])},7386:function(t,e,n){"use strict";n.r(e);var i=n("45df"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"73b0":function(t,e,n){"use strict";n.r(e);var i=n("c9bf");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);var r,o,s,c,l=n("f0c5"),u=Object(l["a"])(i["default"],r,o,!1,null,null,null,!1,s,c);e["default"]=u.exports},7457:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniBadge",props:{type:{type:String,default:"default"},inverted:{type:Boolean,default:!1},text:{type:[String,Number],default:""},size:{type:String,default:"normal"}},data:function(){return{badgeStyle:""}},watch:{text:function(){this.setStyle()}},mounted:function(){this.setStyle()},methods:{setStyle:function(){this.badgeStyle="width: ".concat(8*String(this.text).length+12,"px")},onClick:function(){this.$emit("click")}}};e.default=i},7509:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","login"),attrs:{_i:0}},[n("uni-nav-bar",{attrs:{fixed:"true","status-bar":"true",title:t.title,color:"#333","background-color":"#f1f1f1",_i:1}}),n("view",{staticClass:t._$s(2,"sc","imgboxlogin"),attrs:{_i:2}},[n("image",{staticClass:t._$s(3,"sc","imgsrc"),attrs:{_i:3}})]),n("form",{staticClass:t._$s(4,"sc","formbox"),attrs:{_i:4},on:{submit:t.formSubmit,reset:t.formReset}},[n("view",{staticClass:t._$s(5,"sc","inputView"),attrs:{_i:5}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{_i:6},domProps:{value:t._$s(6,"v-model",t.phone)},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),n("view",{staticClass:t._$s(7,"sc","inputView"),attrs:{_i:7}},[n("input",{attrs:{type:t._$s(8,"a-type",t.iseye?"password":"text"),_i:8}}),n("text",{class:t._$s(9,"c",t.iseye?"iconfont iconyanjing":"iconfont iconyanjing1"),attrs:{_i:9},on:{click:function(e){t.iseye=!t.iseye}}})]),n("view",{staticClass:t._$s(10,"sc","uni-btn-v"),attrs:{_i:10}},[n("button",{},[t._v(t._$s(11,"t0-0",t._s(t.title)))])])])],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},7803:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","edittype"),attrs:{_i:0}},[n("uni-nav-bar",{attrs:{fixed:"true","status-bar":"true",color:"#333","background-color":"#f1f1f1",_i:1}},[n("view",{staticClass:t._$s(2,"sc","swipaction"),attrs:{_i:2}},[n("view",{class:t._$s(3,"c",1==t.genre?"exbor":""),attrs:{_i:3},on:{click:function(e){return t.handleexin(1)}}}),n("view",{class:t._$s(4,"c",2==t.genre?"inbor":""),attrs:{_i:4},on:{click:function(e){return t.handleexin(2)}}})]),n("view",{attrs:{_i:5},on:{click:t.toback},slot:"left"},[n("uni-icons",{attrs:{type:"back",size:"30",_i:6}})],1)]),n("view",{staticClass:t._$s(7,"sc","listbox"),attrs:{_i:7}},t._l(t._$s(8,"f",{forItems:t.list}),(function(e,i,a,r){return n("view",{key:t._$s(8,"f",{forIndex:a,key:i}),staticClass:t._$s("8-"+r,"sc","listitem"),attrs:{_i:"8-"+r}},[n("view",{staticClass:t._$s("9-"+r,"sc","itemleft"),attrs:{_i:"9-"+r}},[n("view",{class:t._$s("10-"+r,"c",["iconfont",1==t.genre?"exclass":"inclass",e.iconclass]),attrs:{_i:"10-"+r}}),n("view",[t._v(t._$s("11-"+r,"t0-0",t._s(e.label)))])]),n("uni-icons",{attrs:{type:"more-filled",_i:"12-"+r},on:{click:function(n){return t.more(e)}}})],1)})),0),t._$s(13,"i",t.isnull)?n("view",{staticClass:t._$s(13,"sc","nodata"),attrs:{_i:13},on:{click:t.gettypelist}},[n("image",{}),n("view",{staticClass:t._$s(15,"sc","notxt"),attrs:{_i:15}})]):t._e(),n("view",{staticClass:t._$s(16,"sc","butbox"),attrs:{_i:16}}),n("button",{staticClass:t._$s(17,"sc","addtypebut"),attrs:{_i:17},on:{click:t.addtype}}),n("uni-popup",{ref:"typepopup",attrs:{type:"center",_i:18}},[n("view",{staticClass:t._$s(19,"sc","operating"),attrs:{_i:19}},[n("view",{attrs:{_i:20},on:{click:function(e){return t.moreOper(1)}}}),n("view",{attrs:{_i:21},on:{click:function(e){return t.moreOper(2)}}})])])],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"7aa2":function(t,e,n){"use strict";n.r(e);var i=n("87b0"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"7dbe":function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=c(n("fc91")),r=c(n("b50e")),o=c(n("8f42")),s=c(n("c806"));function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return d(t)||h(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function d(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var f={components:{uniList:s.default,uniListItem:o.default,uniPopup:r.default,uniNavBar:a.default},data:function(){return{num:0,pageNum:0,executionNum:0,Token:uni.getStorageSync("userId")||"",startTime:"",imgUrl:"",status:"more",listData:[],islong:!0,isnull:!1,opearObj:{},inds:{}}},onShow:function(){this.startTime=new Date,this.getlistdata()},onUnload:function(){this.listData={},this.pageNum=0,this.status="more",this.showLoadMore=!1},onReachBottom:function(){this.pageNum+=1,100*this.pageNum>this.listData.total?uni.showToast({icon:"none",duration:2e3,title:"没有更多数据了"}):(this.status="loading",this.showLoadMore=!0,this.getlistdata())},onPullDownRefresh:function(){this.status="loading",this.showLoadMore=!0,this.pageNum=0,this.getlistdata()},methods:{toback:function(){uni.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},getlistdata:function(){var e=this;uni.showLoading({title:"数据加载中..."});var n={token:this.Token,pageNum:this.pageNum,range:"year"};t.callFunction({name:"get",data:n}).then((function(t){if(uni.hideLoading(),t.result.total>0)if(e.isnull=!1,t.result.list.length>0){var n=l(t.result.list);if(0==e.pageNum)e.listData=t.result;else{var i=e.listData.list.concat(n),a=e.utils.SplitArr(i,"useMonth");e.listData.list=a}}else{0==e.pageNum&&(e.listData={});var r=e.pageNum>0?"没有更多数据了":t.result.data.msg;uni.showToast({icon:"none",duration:2e3,title:r})}else e.isnull=!0,uni.showToast({title:"未查询到相关数据",icon:"none",duration:2e3})})).catch((function(t){e.isnull=!0,uni.showToast({title:"查询失败，请重试",icon:"none",duration:2e3})}))},handleItem:function(t){this.islong=!0,uni.navigateTo({url:"./details?id="+t})},handleLong:function(t,e,n){this.islong&&(this.islong=!1,this.inds={ind1:e,ind2:n},this.opearObj=t,this.$refs.annalpopup.open())},moreOper:function(e){this.islong=!0;var n=this;1==e?this.handleItem(this.opearObj._id):uni.showModal({title:"提示",content:"是否确认删除此条数据？",success:function(e){e.confirm?(uni.showLoading({title:"数据删除中..."}),t.callFunction({name:"remove",data:{token:n.Token,dataId:n.opearObj._id}}).then((function(t){uni.hideLoading(),uni.showToast({title:t.result.msg,duration:2e3}),n.listData.list[n.inds.ind1].list.splice(n.inds.ind2,1),n.inds={}})).catch((function(t){uni.hideLoading(),uni.showModal({content:"操作失败，请重新操作",showCancel:!1})}))):e.cancel&&i("log","用户点击取消"," at pages\\bill\\annal.vue:227")}}),this.$refs.annalpopup.close()},handleMonth:function(t,e){uni.navigateTo({url:"./chart?year="+t+"&month="+e})},onshowproof:function(t){this.imgUrl=t,this.$refs.picture.open()}}};e.default=f}).call(this,n("a9ff")["default"],n("0de9")["default"])},"7e92":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","bill"),attrs:{_i:0}},[n("uni-nav-bar",{attrs:{fixed:"true","status-bar":"true","right-icon":"search",title:"我的帐单儿",color:"#333","background-color":"#f1f1f1",_i:1},on:{clickRight:t.clickSearch}}),n("uni-card",{attrs:{mode:"basic",_i:2}},[n("view",{staticClass:t._$s(3,"sc","expenses"),attrs:{_i:3}}),n("view",{staticClass:t._$s(4,"sc","card-expen"),attrs:{_i:4}},[n("view",{staticClass:t._$s(5,"sc","expenses-amount"),attrs:{_i:5}},[t._v(t._$s(5,"t0-0",t._s(t.iseye?"****":"¥ "+t.summary.exAmount)))]),n("text",{class:t._$s(6,"c",t.iseye?"iconfont iconyanjing":"iconfont iconyanjing1"),attrs:{_i:6},on:{click:function(e){t.iseye=!t.iseye}}})]),n("view",{staticClass:t._$s(7,"sc","card-expen"),attrs:{_i:7}},[n("view",{staticClass:t._$s(8,"sc","amout"),attrs:{_i:8}},[n("text",[t._v(t._$s(9,"t0-0",t._s(t.iseye?"****":"¥ "+t.summary.inAmount)))])]),n("view",{staticClass:t._$s(10,"sc","amout"),attrs:{_i:10},on:{click:t.setbudget}},[n("text",[t._v(t._$s(11,"t0-0",t._s(t.iseye?"****":"¥ "+(t.summary.budgetotal-t.summary.exAmount))))])])]),n("view",{staticClass:t._$s(12,"sc","chartsbut"),attrs:{_i:12}},[n("navigator",{},[n("text",{staticClass:t._$s(14,"sc","iconfont iconweibiaoti--"),attrs:{_i:14}})])])]),t._$s(15,"i",!t.isnull)?t._l(t._$s(16,"f",{forItems:t.lists}),(function(e,i,a,r){return n("uni-list",{key:t._$s(16,"f",{forIndex:a,key:i}),attrs:{_i:"16-"+r}},[n("uni-list-item",{staticClass:t._$s("17-"+r,"sc","dateitem"),attrs:{title:e.datetime,budget:e.budget,"show-arrow":!1,_i:"17-"+r}}),t._l(t._$s("18-"+r,"f",{forItems:e.listItem}),(function(e,i,a,o){return n("uni-list-item",{key:t._$s("18-"+r,"f",{forIndex:a,key:i}),attrs:{title:e.useType.label,note:""+e.payType.label,remarks:e.remarks,amount:e.amount,datetime:e.weekday,icons:e.useType.iconclass,picture:e.picture,genre:e.genre,"show-arrow":!1,_i:"18-"+r+"-"+o},on:{click:function(n){return t.handleItem(e._id)},longpress:function(n){return t.handleLong(e)},onshowproof:t.onshowproof}})}))],2)})):t._e(),t._$s(19,"i",t.isnull)?n("view",{staticClass:t._$s(19,"sc","nodata"),attrs:{_i:19},on:{click:t.getData}},[n("image",{}),n("view",{staticClass:t._$s(21,"sc","notxt"),attrs:{_i:21}})]):t._e(),n("view",{staticClass:t._$s(22,"sc","butbox"),attrs:{_i:22}}),n("view",{staticClass:t._$s(23,"sc","fixdbox"),attrs:{_i:23}},[n("view",{staticClass:t._$s(24,"sc","box"),attrs:{_i:24}},[n("view",{staticClass:t._$s(25,"sc","add"),attrs:{_i:25}},[n("navigator",{},[n("uni-icons",{attrs:{type:"plusempty",size:"24",color:"#fff",_i:27}})],1)]),n("view",{staticClass:t._$s(28,"sc","more"),attrs:{_i:28},on:{click:t.openNavs}},[n("uni-icons",{attrs:{type:"bars",size:"30",color:"#fff",_i:29}})],1)])]),n("uni-popup",{ref:"indpopup",attrs:{type:"center",_i:30}},[n("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(31,"v-show",t.isbudget),expression:"_$s(31,'v-show',isbudget)"}],staticClass:t._$s(31,"sc","budbox"),attrs:{_i:31}},[n("view",{staticClass:t._$s(32,"sc","atitle"),attrs:{_i:32}}),n("view",{staticClass:t._$s(33,"sc","inputval"),attrs:{_i:33}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.budget,expression:"budget"}],staticClass:t._$s(34,"sc","uni-input"),attrs:{_i:34},domProps:{value:t._$s(34,"v-model",t.budget)},on:{input:function(e){e.target.composing||(t.budget=e.target.value)}}})]),n("button",{attrs:{_i:35},on:{click:t.submitBudget}})]),n("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(36,"v-show",t.isoperat),expression:"_$s(36,'v-show',isoperat)"}],staticClass:t._$s(36,"sc","operating"),attrs:{_i:36}},[n("view",{attrs:{_i:37},on:{click:function(e){return t.moreOper(1)}}}),n("view",{attrs:{_i:38},on:{click:function(e){return t.moreOper(2)}}})])]),n("uni-popup",{ref:"navs",attrs:{type:"bottom",_i:39}},[n("view",{staticClass:t._$s(40,"sc","navsbox"),attrs:{_i:40}},t._l(t._$s(41,"f",{forItems:t.navs}),(function(e,i,a,r){return n("view",{key:t._$s(41,"f",{forIndex:a,key:e.id}),staticClass:t._$s("41-"+r,"sc","navsitem"),attrs:{_i:"41-"+r},on:{click:function(n){return t.handleNav(e)}}},[n("view",{class:t._$s("42-"+r,"c",["iconfont",e.iconsClass]),attrs:{_i:"42-"+r}}),n("text",[t._v(t._$s("43-"+r,"t0-0",t._s(e.value)))])])})),0)]),n("uni-popup",{ref:"picture",attrs:{type:"center",_i:44}},[n("image",{attrs:{src:t._$s(45,"a-src",t.imgUrl),_i:45}})])],2)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"7ecf":function(t,e,n){"use strict";n.r(e);var i=n("485c"),a=n("7386");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"203855b1",null,!1,i["a"],o);e["default"]=c.exports},"80d4":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","uni-pagination"),attrs:{_i:0}},[n("view",{staticClass:t._$s(1,"sc","uni-pagination__btn"),class:t._$s(1,"c",1===t.currentIndex?"uni-pagination--disabled":"uni-pagination--enabled"),attrs:{"hover-class":t._$s(1,"a-hover-class",1===t.currentIndex?"":"uni-pagination--hover"),_i:1},on:{click:t.clickLeft}},[t._$s(2,"i",!0===t.showIcon||"true"===t.showIcon)?[n("uni-icons",{attrs:{color:"#000",size:"20",type:"arrowleft",_i:3}})]:[n("text",{staticClass:t._$s(5,"sc","uni-pagination__child-btn"),attrs:{_i:5}},[t._v(t._$s(5,"t0-0",t._s(t.prevText)))])]],2),n("view",{staticClass:t._$s(6,"sc","uni-pagination__num"),attrs:{_i:6}},[n("view",{staticClass:t._$s(7,"sc","uni-pagination__num-current"),attrs:{_i:7}},[n("text",{staticClass:t._$s(8,"sc","uni-pagination__num-current-text"),attrs:{_i:8}},[t._v(t._$s(8,"t0-0",t._s(t.currentIndex)))]),n("text",{staticClass:t._$s(9,"sc","uni-pagination__num-current-text"),attrs:{_i:9}},[t._v(t._$s(9,"t0-0",t._s(t.maxPage||0)))])])]),n("view",{staticClass:t._$s(10,"sc","uni-pagination__btn"),class:t._$s(10,"c",t.currentIndex===t.maxPage?"uni-pagination--disabled":"uni-pagination--enabled"),attrs:{"hover-class":t._$s(10,"a-hover-class",t.currentIndex===t.maxPage?"":"uni-pagination--hover"),_i:10},on:{click:t.clickRight}},[t._$s(11,"i",!0===t.showIcon||"true"===t.showIcon)?[n("uni-icons",{attrs:{color:"#000",size:"20",type:"arrowright",_i:12}})]:[n("text",{staticClass:t._$s(14,"sc","uni-pagination__child-btn"),attrs:{_i:14}},[t._v(t._$s(14,"t0-0",t._s(t.nextText)))])]],2)])},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},8189:function(t){t.exports={_from:"@dcloudio/uni-stat@2.0.0-alpha-26320200304005",_id:"@dcloudio/uni-stat@2.0.0-alpha-26320200304005",_inBundle:!1,_integrity:"sha512-MRGMdXcs4VyliJXFrfBJMSpE7KKphnWQOsmhEHfYlxysU5xb7fD9VcWqzZSP05O2XjwiinDmMah1P0WQAbOv1g==",_location:"/@dcloudio/uni-stat",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"@dcloudio/uni-stat@2.0.0-alpha-26320200304005",name:"@dcloudio/uni-stat",escapedName:"@dcloudio%2funi-stat",scope:"@dcloudio",rawSpec:"2.0.0-alpha-26320200304005",saveSpec:null,fetchSpec:"2.0.0-alpha-26320200304005"},_requiredBy:["#USER","/","/@dcloudio/vue-cli-plugin-uni"],_resolved:"https://registry.npmjs.org/@dcloudio/uni-stat/-/uni-stat-2.0.0-alpha-26320200304005.tgz",_shasum:"4d5bbd18fc8312453c6a30d1ca2ac4afec39b69e",_spec:"@dcloudio/uni-stat@2.0.0-alpha-26320200304005",_where:"/Users/guoshengqiang/Documents/dcloud-plugins-new/alpha/uniapp-cli",author:"",bugs:{url:"https://github.com/dcloudio/uni-app/issues"},bundleDependencies:!1,deprecated:!1,description:"",devDependencies:{"@babel/core":"^7.5.5","@babel/preset-env":"^7.5.5",eslint:"^6.1.0",rollup:"^1.19.3","rollup-plugin-babel":"^4.3.3","rollup-plugin-clear":"^2.0.7","rollup-plugin-commonjs":"^10.0.2","rollup-plugin-copy":"^3.1.0","rollup-plugin-eslint":"^7.0.0","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","rollup-plugin-replace":"^2.2.0","rollup-plugin-uglify":"^6.0.2"},files:["dist","package.json","LICENSE"],gitHead:"2c63c817259209b961dde5b8e5702bb599b2c603",homepage:"https://github.com/dcloudio/uni-app#readme",license:"Apache-2.0",main:"dist/index.js",name:"@dcloudio/uni-stat",repository:{type:"git",url:"git+https://github.com/dcloudio/uni-app.git",directory:"packages/uni-stat"},scripts:{build:"NODE_ENV=production rollup -c rollup.config.js",dev:"NODE_ENV=development rollup -w -c rollup.config.js"},version:"2.0.0-alpha-26320200304005"}},"834d":function(t,e,n){"use strict";n.r(e);var i=n("f421"),a=n("532f");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},"85cc":function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=c(n("b50e")),r=c(n("fc91")),o=c(n("cc1c")),s=c(n("b9e0"));function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t){return g(t)||p(t)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function g(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var v={components:{uniIcons:o.default,uniNavBar:r.default,uniPopup:a.default,simpleDatetimePicker:s.default},data:function(){return{Token:uni.getStorageSync("userId")||"",ismolnum:1,paytype:[],types:{collect:[],branch:[]},dataobj:{genre:1,amount:"",useDate:"",payType:{},useType:{},remarks:"",picture:""},typeitems:[]}},onLoad:function(t){if(this.paytype=d(this.GlobalJson.paytype),t.item){var e=JSON.parse(t.item);this.dataobj=e}else this.dataobj.useDate=this.utils.Format(new Date)},onShow:function(){this.gettypelist()},methods:{toback:function(){this.dataobj._id?uni.redirectTo({url:"./details?id="+this.dataobj._id}):uni.navigateBack({delta:1})},handleexin:function(t){if(this.$refs.popup.close(),this.dataobj.genre=t,this.gettypelist(),this.dataobj._id)this.dataobj.useType={};else{var e={genre:t,amount:"",useDate:"",payType:{},useType:{},remarks:""};e.useDate=this.utils.Format(new Date),this.dataobj=e}},gettypelist:function(){var e=this;uni.showLoading({title:"数据加载中...",mask:!0}),t.callFunction({name:"settype",data:{pay:4,token:this.Token,genre:this.dataobj.genre}}).then((function(t){uni.hideLoading();var n=[{iconclass:"iconjia",label:"编辑",isadd:!0}];if(0==t.result.status){e.isnull=!1;var i=d(t.result.list.data);e.typeitems=[].concat(d(i),n)}else e.typeitems=[].concat(n),uni.showToast({title:t.result.msg,icon:"none"})})).catch((function(t){uni.hideLoading(),uni.showModal({content:"操作失败，请重新操作",showCancel:!1})}))},showModel:function(t){this.ismolnum=t,this.$refs.popup.open()},upload:function(){var e=this;new Promise((function(t,e){uni.chooseImage({chooseImage:1,success:function(e){var n=e.tempFilePaths[0],i={filePath:n};t(i)},fail:function(){e(new Error("Fail_Cancel"))}})})).then((function(e){return uni.showLoading({title:"文件上传中..."}),t.uploadFile(e)})).then((function(t){uni.hideLoading(),uni.showToast({title:"图片上传成功",mask:!0}),e.dataobj.picture=t.fileID})).catch((function(t){uni.hideLoading(),i("log",t," at pages\\bill\\edit.vue:234"),"Fail_Cancel"!==t.message&&uni.showModal({content:"图片上传失败，请重新上传",showCancel:!1})}))},seeimgsrc:function(){this.$refs.picture.open()},closeimgSrc:function(){this.dataobj.picture=""},saveData:function(){if(this.dataobj.amount)if(this.dataobj.payType.label)if(this.dataobj.useType.label){uni.showLoading({title:"数据保存中...",mask:!0});var e=u({},this.dataobj),n="",a=this;e.useDategetTime=new Date(e.useDate).getTime();var r=e.useDate.split(" "),o=r[0].split("-");e.useYear=o[0],e.useMonth=o[1],e.useDay=o[2],e.useHour=r[1],e.token=this.Token,n=e._id?"update":"add",t.callFunction({name:n,data:e}).then((function(t){if(i("log",t," at pages\\bill\\edit.vue:298"),t.result.id){if(uni.hideLoading(),uni.showToast({title:"数据保存成功",mask:!0,duration:2e3}),e.dataId){e._id=e.dataId,delete e.dataId;try{uni.setStorageSync("editData",e)}catch(n){}}setTimeout((function(){a.toback()}),2500)}else uni.showToast({title:"保存失败，请重新输入",icon:"none",mask:!0,duration:2e3})})).catch((function(t){uni.hideLoading(),uni.showToast({title:"数据保存失败，请重新保存",mask:!0,icon:"none",duration:2e3}),i("error",t," at pages\\bill\\edit.vue:334")}))}else uni.showToast({title:"请选择方式",icon:"none"});else uni.showToast({title:"请选择方式",icon:"none"});else uni.showToast({title:"请输入金额",icon:"none"})},handlepay:function(t){this.dataobj.payType=t,this.$refs.popup.close()},handleType:function(t){this.$refs.popup.close(),t.isadd?uni.navigateTo({url:"./typelist?genre="+this.dataobj.genre}):this.dataobj.useType=t},openDatetimePicker:function(){this.$refs.myPicker.show()},closeDatetimePicker:function(){this.$refs.myPicker.hide()},handleSubmit:function(t){t.year&&t.month&&t.day&&(this.dataobj.useDate="".concat(t.year,"-").concat(t.month,"-").concat(t.day," ").concat(t.hour,":").concat(t.minute))}}};e.default=v}).call(this,n("a9ff")["default"],n("0de9")["default"])},"860d":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","uni-card"),class:t._$s(0,"c",{"uni-card--full":!0===t.isFull||"true"===t.isFull,"uni-card--shadow":!0===t.isShadow||"true"===t.isShadow}),attrs:{_i:0},on:{click:t.onClick}},[t._$s(1,"i","style"===t.mode)?n("view",{staticClass:t._$s(1,"sc","uni-card__thumbnailimage"),attrs:{_i:1}},[n("view",{staticClass:t._$s(2,"sc","uni-card__thumbnailimage-box"),attrs:{_i:2}},[n("image",{staticClass:t._$s(3,"sc","uni-card__thumbnailimage-image"),attrs:{src:t._$s(3,"a-src",t.thumbnail),_i:3}})]),t._$s(4,"i",t.title)?n("view",{staticClass:t._$s(4,"sc","uni-card__thumbnailimage-title"),attrs:{_i:4}},[n("text",{staticClass:t._$s(5,"sc","uni-card__thumbnailimage-title-text"),attrs:{_i:5}},[t._v(t._$s(5,"t0-0",t._s(t.title)))])]):t._e()]):t._e(),t._$s(6,"i","title"===t.mode)?n("view",{staticClass:t._$s(6,"sc","uni-card__title"),attrs:{_i:6}},[n("view",{staticClass:t._$s(7,"sc","uni-card__title-header"),attrs:{_i:7}},[n("image",{staticClass:t._$s(8,"sc","uni-card__title-header-image"),attrs:{src:t._$s(8,"a-src",t.thumbnail),_i:8}})]),n("view",{staticClass:t._$s(9,"sc","uni-card__title-content"),attrs:{_i:9}},[n("text",{staticClass:t._$s(10,"sc","uni-card__title-content-title"),attrs:{_i:10}},[t._v(t._$s(10,"t0-0",t._s(t.title)))]),n("text",{staticClass:t._$s(11,"sc","uni-card__title-content-extra"),attrs:{_i:11}},[t._v(t._$s(11,"t0-0",t._s(t.extra)))])])]):t._e(),t._$s(12,"i","basic"===t.mode&&t.title)?n("view",{staticClass:t._$s(12,"sc","uni-card__header"),attrs:{_i:12}},[t._$s(13,"i",t.thumbnail)?n("view",{staticClass:t._$s(13,"sc","uni-card__header-extra-img-view"),attrs:{_i:13}},[n("image",{staticClass:t._$s(14,"sc","uni-card__header-extra-img"),attrs:{src:t._$s(14,"a-src",t.thumbnail),_i:14}})]):t._e(),n("text",{staticClass:t._$s(15,"sc","uni-card__header-title-text"),attrs:{_i:15}},[t._v(t._$s(15,"t0-0",t._s(t.title)))]),t._$s(16,"i",t.extra)?n("text",{staticClass:t._$s(16,"sc","uni-card__header-extra-text"),attrs:{_i:16}},[t._v(t._$s(16,"t0-0",t._s(t.extra)))]):t._e()]):t._e(),n("view",{staticClass:t._$s(17,"sc","uni-card__content uni-card__content--pd"),attrs:{_i:17}},[t._$s(18,"i","style"===t.mode&&t.extra)?n("view",[n("text",{staticClass:t._$s(19,"sc","uni-card__content-extra"),attrs:{_i:19}},[t._v(t._$s(19,"t0-0",t._s(t.extra)))])]):t._e(),t._t("default",null,{_i:20})],2),t._$s(21,"i",t.note)?n("view",{staticClass:t._$s(21,"sc","uni-card__footer"),attrs:{_i:21}},[t._t("footer",[n("text",{staticClass:t._$s(23,"sc","uni-card__footer-text"),attrs:{_i:23}},[t._v(t._$s(23,"t0-0",t._s(t.note)))])],{_i:22})],2):t._e()])},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"87b0":function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(n("fc91")),r=s(n("b50e")),o=s(n("cc1c"));function s(t){return t&&t.__esModule?t:{default:t}}function c(t){return h(t)||u(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function h(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var d={components:{uniIcons:o.default,uniPopup:r.default,uniNavBar:a.default},onLoad:function(t){this.genre=t.genre},onShow:function(){this.gettypelist()},data:function(){return{genre:1,isnull:!1,inds:0,Token:uni.getStorageSync("userId")||"",list:[]}},methods:{toback:function(){uni.navigateBack({delta:1})},handleexin:function(t){this.genre=t,this.gettypelist(),this.$refs.typepopup.close()},gettypelist:function(){var e=this;uni.showLoading({title:"数据加载中...",mask:!0}),t.callFunction({name:"settype",data:{pay:4,token:this.Token,genre:this.genre}}).then((function(t){uni.hideLoading(),0==t.result.status?(e.isnull=!1,e.list=c(t.result.list.data)):(e.isnull=!0,e.list=[],uni.showToast({title:t.result.msg,icon:"none"}))})).catch((function(t){uni.hideLoading(),e.isnull=!0,uni.showModal({content:"操作失败，请重新操作",showCancel:!1})}))},addtype:function(){uni.navigateTo({url:"./addtype?genre="+this.genre})},more:function(t,e){this.actobj=t,this.inds=e,this.$refs.typepopup.open()},moreOper:function(e){this.$refs.typepopup.close();var n=this;1==e&&(i("log",this.actobj," at pages\\bill\\typelist.vue:140"),delete this.actobj.uniCloudClientInfo,uni.navigateTo({url:"./addtype?item="+JSON.stringify(this.actobj)})),2==e&&uni.showModal({title:"提示",content:"是否确认删除此条数据？",success:function(e){e.confirm?(uni.showLoading({title:"数据删除中..."}),n.$refs.typepopup.close(),t.callFunction({name:"settype",data:{pay:2,token:n.Token,_id:n.actobj._id}}).then((function(t){uni.hideLoading(),0==t.result.status?(uni.showToast({title:t.result.msg,duration:2e3}),n.list.splice(n.inds,1)):uni.showToast({title:t.result.msg,icon:"none"})})).catch((function(t){uni.hideLoading(),uni.showToast({title:"操作失败，请重新操作",icon:"none"})}))):e.cancel&&i("log","用户点击取消"," at pages\\bill\\typelist.vue:186")}})}}};e.default=d}).call(this,n("a9ff")["default"],n("0de9")["default"])},"8b50":function(t,e,n){"use strict";n.r(e);var i=n("26f2"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"8b90":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t._$s(0,"i",t.showPopup)?n("view",{staticClass:t._$s(0,"sc","uni-popup"),attrs:{_i:0},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.clear(e)}}},[n("uni-transition",{attrs:{"mode-class":["fade"],styles:t.maskClass,duration:t.duration,show:t.showTrans,_i:1},on:{click:t.onTap}}),n("uni-transition",{attrs:{"mode-class":t.ani,styles:t.transClass,duration:t.duration,show:t.showTrans,_i:2},on:{click:t.onTap}},[n("view",{staticClass:t._$s(3,"sc","uni-popup__wrapper-box"),attrs:{_i:3},on:{click:function(e){return e.stopPropagation(),t.clear(e)}}},[t._t("default",null,{_i:4})],2)])],1):t._e()},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"8bbf":function(t,e){t.exports=Vue},"8ed0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("67ea")),a=r(n("cc1c"));function r(t){return t&&t.__esModule?t:{default:t}}var o={name:"UniNavBar",components:{uniStatusBar:i.default,uniIcons:a.default},props:{title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:"#000000"},backgroundColor:{type:String,default:"#FFFFFF"},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0}},mounted:function(){uni.report&&""!==this.title&&uni.report("title",this.title)},methods:{onClickLeft:function(){this.$emit("clickLeft")},onClickRight:function(){this.$emit("clickRight")}}};e.default=o},"8f42":function(t,e,n){"use strict";n.r(e);var i=n("e8d8"),a=n("911a");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"59871a62",null,!1,i["a"],o);e["default"]=c.exports},"911a":function(t,e,n){"use strict";n.r(e);var i=n("011a"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"91ae":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={pages:{},globalStyle:{}};e.default=i},"921b":function(t,e,n){"use strict";var i=n("8189");function a(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?r(t):e}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}var d=i.version,f="https://tongji.dcloud.io/uni/stat",p="https://tongji.dcloud.io/uni/stat.gif",g=1800,v=300,_=10,y="__DC_STAT_UUID",m="__DC_UUID_VALUE";function b(){var t="";if("n"===T()){try{t=plus.runtime.getDCloudId()}catch(e){t=""}return t}try{t=uni.getStorageSync(y)}catch(e){t=m}if(!t){t=Date.now()+""+Math.floor(1e7*Math.random());try{uni.setStorageSync(y,t)}catch(e){uni.setStorageSync(y,m)}}return t}var x=function(t){var e=Object.keys(t),n=e.sort(),i={},a="";for(var r in n)i[n[r]]=t[n[r]],a+=n[r]+"="+t[n[r]]+"&";return{sign:"",options:a.substr(0,a.length-1)}},w=function(t){var e="";for(var n in t)e+=n+"="+t[n]+"&";return e.substr(0,e.length-1)},S=function(){return parseInt((new Date).getTime()/1e3)},T=function(){var t={"app-plus":"n",h5:"h5","mp-weixin":"wx","mp-alipay":"ali","mp-baidu":"bd","mp-toutiao":"tt","mp-qq":"qq"};return t["app-plus"]},k=function(){var t="";return"wx"!==T()&&"qq"!==T()||uni.canIUse("getAccountInfoSync")&&(t=uni.getAccountInfoSync().miniProgram.appId||""),t},A=function(){return"n"===T()?plus.runtime.version:""},P=function(){var t=T(),e="";return"n"===t&&(e=plus.runtime.channel),e},O=function(t){var e=T(),n="";return t||("wx"===e&&(n=uni.getLaunchOptionsSync().scene),n)},C="First__Visit__Time",$="Last__Visit__Time",D=function(){var t=uni.getStorageSync(C),e=0;return t?e=t:(e=S(),uni.setStorageSync(C,e),uni.removeStorageSync($)),e},I=function(){var t=uni.getStorageSync($),e=0;return e=t||"",uni.setStorageSync($,S()),e},M="__page__residence__time",j=0,E=0,L=function(){return j=S(),"n"===T()&&uni.setStorageSync(M,S()),j},R=function(){return E=S(),"n"===T()&&(j=uni.getStorageSync(M)),E-j},N="Total__Visit__Count",F=function(){var t=uni.getStorageSync(N),e=1;return t&&(e=t,e++),uni.setStorageSync(N,e),e},z=function(t){var e={};for(var n in t)e[n]=encodeURIComponent(t[n]);return e},q=0,U=0,B=function(){var t=(new Date).getTime();return q=t,U=0,t},W=function(){var t=(new Date).getTime();return U=t,t},H=function(t){var e=0;if(0!==q&&(e=U-q),e=parseInt(e/1e3),e=e<1?1:e,"app"===t){var n=e>v;return{residenceTime:e,overtime:n}}if("page"===t){var i=e>g;return{residenceTime:e,overtime:i}}return{residenceTime:e}},G=function(){var t=getCurrentPages(),e=t[t.length-1],n=e.$vm;return"bd"===T()?n.$mp&&n.$mp.page.is:n.$scope&&n.$scope.route||n.$mp&&n.$mp.page.route},K=function(t){var e=getCurrentPages(),n=e[e.length-1],i=n.$vm,a=t._query,r=a&&"{}"!==JSON.stringify(a)?"?"+JSON.stringify(a):"";return t._query="","bd"===T()?i.$mp&&i.$mp.page.is+r:i.$scope&&i.$scope.route+r||i.$mp&&i.$mp.page.route+r},V=function(t){return!!("page"===t.mpType||t.$mp&&"page"===t.$mp.mpType||"page"===t.$options.mpType)},Y=function(t,e){return t?"string"!==typeof t?(console.error("uni.report [eventName] 参数类型错误,只能为 String 类型"),!0):t.length>255?(console.error("uni.report [eventName] 参数长度不能大于 255"),!0):"string"!==typeof e&&"object"!==typeof e?(console.error("uni.report [options] 参数类型错误,只能为 String 或 Object 类型"),!0):"string"===typeof e&&e.length>255?(console.error("uni.report [options] 参数长度不能大于 255"),!0):"title"===t&&"string"!==typeof e?(console.error("uni.report [eventName] 参数为 title 时，[options] 参数只能为 String 类型"),!0):void 0:(console.error("uni.report 缺少 [eventName] 参数"),!0)},J=n("91ae").default,X=n("e35a").default||n("e35a"),Q=uni.getSystemInfoSync(),Z=function(){function t(){l(this,t),this.self="",this._retry=0,this._platform="",this._query={},this._navigationBarTitle={config:"",page:"",report:"",lt:""},this._operatingTime=0,this._reportingRequestData={1:[],11:[]},this.__prevent_triggering=!1,this.__licationHide=!1,this.__licationShow=!1,this._lastPageRoute="",this.statData={uuid:b(),ut:T(),mpn:k(),ak:X.appid,usv:d,v:A(),ch:P(),cn:"",pn:"",ct:"",t:S(),tt:"",p:"android"===Q.platform?"a":"i",brand:Q.brand||"",md:Q.model,sv:Q.system.replace(/(Android|iOS)\s/,""),mpsdk:Q.SDKVersion||"",mpv:Q.version||"",lang:Q.language,pr:Q.pixelRatio,ww:Q.windowWidth,wh:Q.windowHeight,sw:Q.screenWidth,sh:Q.screenHeight}}return h(t,[{key:"_applicationShow",value:function(){if(this.__licationHide){W();var t=H("app");if(t.overtime){var e={path:this._lastPageRoute,scene:this.statData.sc};this._sendReportRequest(e)}this.__licationHide=!1}}},{key:"_applicationHide",value:function(t,e){this.__licationHide=!0,W();var n=H();B();var i=K(this);this._sendHideRequest({urlref:i,urlref_ts:n.residenceTime},e)}},{key:"_pageShow",value:function(){var t=K(this),e=G();if(this._navigationBarTitle.config=J&&J.pages[e]&&J.pages[e].titleNView&&J.pages[e].titleNView.titleText||J&&J.pages[e]&&J.pages[e].navigationBarTitleText||"",this.__licationShow)return B(),this.__licationShow=!1,void(this._lastPageRoute=t);W(),this._lastPageRoute=t;var n=H("page");if(n.overtime){var i={path:this._lastPageRoute,scene:this.statData.sc};this._sendReportRequest(i)}B()}},{key:"_pageHide",value:function(){if(!this.__licationHide){W();var t=H("page");return this._sendPageRequest({url:this._lastPageRoute,urlref:this._lastPageRoute,urlref_ts:t.residenceTime}),void(this._navigationBarTitle={config:"",page:"",report:"",lt:""})}}},{key:"_login",value:function(){this._sendEventRequest({key:"login"},0)}},{key:"_share",value:function(){this._sendEventRequest({key:"share"},0)}},{key:"_payment",value:function(t){this._sendEventRequest({key:t},0)}},{key:"_sendReportRequest",value:function(t){this._navigationBarTitle.lt="1";var e=t.query&&"{}"!==JSON.stringify(t.query)?"?"+JSON.stringify(t.query):"";this.statData.lt="1",this.statData.url=t.path+e||"",this.statData.t=S(),this.statData.sc=O(t.scene),this.statData.fvts=D(),this.statData.lvts=I(),this.statData.tvc=F(),"n"===T()?this.getProperty():this.getNetworkInfo()}},{key:"_sendPageRequest",value:function(t){var e=t.url,n=t.urlref,i=t.urlref_ts;this._navigationBarTitle.lt="11";var a={ak:this.statData.ak,uuid:this.statData.uuid,lt:"11",ut:this.statData.ut,url:e,tt:this.statData.tt,urlref:n,urlref_ts:i,ch:this.statData.ch,usv:this.statData.usv,t:S(),p:this.statData.p};this.request(a)}},{key:"_sendHideRequest",value:function(t,e){var n=t.urlref,i=t.urlref_ts,a={ak:this.statData.ak,uuid:this.statData.uuid,lt:"3",ut:this.statData.ut,urlref:n,urlref_ts:i,ch:this.statData.ch,usv:this.statData.usv,t:S(),p:this.statData.p};this.request(a,e)}},{key:"_sendEventRequest",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=void 0===e?"":e,i=t.value,a=void 0===i?"":i,r=this._lastPageRoute,o={ak:this.statData.ak,uuid:this.statData.uuid,lt:"21",ut:this.statData.ut,url:r,ch:this.statData.ch,e_n:n,e_v:"object"===typeof a?JSON.stringify(a):a.toString(),usv:this.statData.usv,t:S(),p:this.statData.p};this.request(o)}},{key:"getNetworkInfo",value:function(){var t=this;uni.getNetworkType({success:function(e){t.statData.net=e.networkType,t.getLocation()}})}},{key:"getProperty",value:function(){var t=this;plus.runtime.getProperty(plus.runtime.appid,(function(e){t.statData.v=e.version||"",t.getNetworkInfo()}))}},{key:"getLocation",value:function(){var t=this;X.getLocation?uni.getLocation({type:"wgs84",geocode:!0,success:function(e){e.address&&(t.statData.cn=e.address.country,t.statData.pn=e.address.province,t.statData.ct=e.address.city),t.statData.lat=e.latitude,t.statData.lng=e.longitude,t.request(t.statData)}}):(this.statData.lat=0,this.statData.lng=0,this.request(this.statData))}},{key:"request",value:function(t,e){var n=this,i=S(),a=this._navigationBarTitle;t.ttn=a.page,t.ttpj=a.config,t.ttc=a.report;var r=this._reportingRequestData;if("n"===T()&&(r=uni.getStorageSync("__UNI__STAT__DATA")||{}),r[t.lt]||(r[t.lt]=[]),r[t.lt].push(t),"n"===T()&&uni.setStorageSync("__UNI__STAT__DATA",r),!(R()<_)||e){var o=this._reportingRequestData;"n"===T()&&(o=uni.getStorageSync("__UNI__STAT__DATA")),L();var s=[],c=[],l=[],u=function(t){var e=o[t];e.forEach((function(e){var n=w(e);0===t?s.push(n):3===t?l.push(n):c.push(n)}))};for(var h in o)u(h);s.push.apply(s,c.concat(l));var f={usv:d,t:i,requests:JSON.stringify(s)};this._reportingRequestData={},"n"===T()&&uni.removeStorageSync("__UNI__STAT__DATA"),"h5"!==t.ut?"n"!==T()||"a"!==this.statData.p?this._sendRequest(f):setTimeout((function(){n._sendRequest(f)}),200):this.imageRequest(f)}}},{key:"_sendRequest",value:function(t){var e=this;uni.request({url:f,method:"POST",data:t,success:function(){},fail:function(n){++e._retry<3&&setTimeout((function(){e._sendRequest(t)}),1e3)}})}},{key:"imageRequest",value:function(t){var e=new Image,n=x(z(t)).options;e.src=p+"?"+n}},{key:"sendEvent",value:function(t,e){Y(t,e)||("title"!==t?this._sendEventRequest({key:t,value:"object"===typeof e?JSON.stringify(e):e},1):this._navigationBarTitle.report=e)}}]),t}(),tt=function(t){function e(){var t;return l(this,e),t=a(this,o(e).call(this)),t.instance=null,"function"===typeof uni.addInterceptor&&(t.addInterceptorInit(),t.interceptLogin(),t.interceptShare(!0),t.interceptRequestPayment()),t}return s(e,t),h(e,null,[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),h(e,[{key:"addInterceptorInit",value:function(){var t=this;uni.addInterceptor("setNavigationBarTitle",{invoke:function(e){t._navigationBarTitle.page=e.title}})}},{key:"interceptLogin",value:function(){var t=this;uni.addInterceptor("login",{complete:function(){t._login()}})}},{key:"interceptShare",value:function(t){var e=this;t?uni.addInterceptor("share",{success:function(){e._share()},fail:function(){e._share()}}):e._share()}},{key:"interceptRequestPayment",value:function(){var t=this;uni.addInterceptor("requestPayment",{success:function(){t._payment("pay_success")},fail:function(){t._payment("pay_fail")}})}},{key:"report",value:function(t,e){this.self=e,L(),this.__licationShow=!0,this._sendReportRequest(t,!0)}},{key:"load",value:function(t,e){if(!e.$scope&&!e.$mp){var n=getCurrentPages();e.$scope=n[n.length-1]}this.self=e,this._query=t}},{key:"show",value:function(t){this.self=t,V(t)?this._pageShow(t):this._applicationShow(t)}},{key:"ready",value:function(t){}},{key:"hide",value:function(t){this.self=t,V(t)?this._pageHide(t):this._applicationHide(t,!0)}},{key:"error",value:function(t){this._platform;var e="";e=t.message?t.stack:JSON.stringify(t);var n={ak:this.statData.ak,uuid:this.statData.uuid,lt:"31",ut:this.statData.ut,ch:this.statData.ch,mpsdk:this.statData.mpsdk,mpv:this.statData.mpv,v:this.statData.v,em:e,usv:this.statData.usv,t:S(),p:this.statData.p};this.request(n)}}]),e}(Z),et=tt.getInstance(),nt=!1,it={onLaunch:function(t){et.report(t,this)},onReady:function(){et.ready(this)},onLoad:function(t){if(et.load(t,this),this.$scope&&this.$scope.onShareAppMessage){var e=this.$scope.onShareAppMessage;this.$scope.onShareAppMessage=function(t){return et.interceptShare(!1),e.call(this,t)}}},onShow:function(){nt=!1,et.show(this)},onHide:function(){nt=!0,et.hide(this)},onUnload:function(){nt?nt=!1:et.hide(this)},onError:function(t){et.error(t)}};function at(){var t=n("8bbf");(t.default||t).mixin(it),uni.report=function(t,e){et.sendEvent(t,e)}}at()},"93f7":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","details"),attrs:{_i:0}},[n("uni-nav-bar",{attrs:{fixed:"true","status-bar":"true","left-icon":"closeempty","right-icon":"trash",title:"详情",color:"#333","background-color":"#f1f1f1",_i:1},on:{clickLeft:t.toback,clickRight:t.deldata}}),t._$s(2,"i",t.listdata.genre)?n("view",{staticClass:t._$s(2,"sc","lists"),attrs:{_i:2}},[n("view",{staticClass:t._$s(3,"sc","listitem"),attrs:{_i:3}},[n("view",{staticClass:t._$s(4,"sc","typeimg iconlabel"),attrs:{_i:4}},[n("view",{class:t._$s(5,"c",["iconfont",1==t.listdata.genre?"exclass":"inclass",t.listdata.useType.iconclass]),attrs:{_i:5}}),n("text",[t._v(t._$s(6,"t0-0",t._s(t.listdata.useType.label)))])]),n("view",{staticClass:t._$s(7,"sc","info"),attrs:{_i:7}},[t._v(t._$s(7,"t0-0",t._s(t.listdata.amount)))])]),n("view",{staticClass:t._$s(8,"sc","listitem"),attrs:{_i:8}},[n("view",{staticClass:t._$s(9,"sc","typeimg"),attrs:{_i:9}},[t._v(t._$s(9,"t0-0",t._s(t.listdata.useDate)))]),n("view",{staticClass:t._$s(10,"sc","info"),attrs:{_i:10}},[t._v(t._$s(10,"t0-0",t._s(t.listdata.payType.label)))])]),n("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(11,"v-show",t.listdata.remarks),expression:"_$s(11,'v-show',listdata.remarks)"}],staticClass:t._$s(11,"sc","listitem"),attrs:{_i:11}},[t._v(t._$s(11,"t0-0",t._s(t.listdata.remarks)))]),t._$s(12,"i",t.listdata.picture)?n("view",{staticClass:t._$s(12,"sc","picture"),attrs:{_i:12}},[n("image",{staticClass:t._$s(13,"sc","pictureimg"),attrs:{src:t._$s(13,"a-src",t.listdata.picture),_i:13}})]):t._e()]):t._e(),n("view",{staticClass:t._$s(14,"sc","fixdbox"),attrs:{_i:14},on:{click:t.editdata}})],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"94d4":function(t,e,n){"use strict";n.r(e);var i=n("256b"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"94d9":function(t,e,n){"use strict";n.r(e);var i=n("7803"),a=n("7aa2");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"6dc3bafa",null,!1,i["a"],o);e["default"]=c.exports},"959a":function(t,e,n){"use strict";n.r(e);var i=n("6d54"),a=n("2e93");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},"99cf":function(t,e,n){"use strict";uni.restoreGlobal&&uni.restoreGlobal(weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),__definePage("pages/bill/index",(function(){return Vue.extend(n("5c8b").default)})),__definePage("pages/bill/login",(function(){return Vue.extend(n("6c6a").default)})),__definePage("pages/bill/typelist",(function(){return Vue.extend(n("94d9").default)})),__definePage("pages/bill/addtype",(function(){return Vue.extend(n("af5a").default)})),__definePage("pages/bill/details",(function(){return Vue.extend(n("e2bf").default)})),__definePage("pages/bill/search",(function(){return Vue.extend(n("7ecf").default)})),__definePage("pages/bill/edit",(function(){return Vue.extend(n("09a0").default)})),__definePage("pages/bill/about",(function(){return Vue.extend(n("04c7").default)})),__definePage("pages/bill/annal",(function(){return Vue.extend(n("834d").default)})),__definePage("pages/bill/chart",(function(){return Vue.extend(n("3dd4").default)}))},"9bbb":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("959a"));function a(t){return t&&t.__esModule?t:{default:t}}var r={name:"UniPopup",components:{uniTransition:i.default},props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},maskClick:{type:Boolean,default:!0}},data:function(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{position:"fixed",left:0,right:0}}},watch:{type:{handler:function(t){switch(this.type){case"top":this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0};break;case"bottom":this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0};break;case"center":this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"};break}},immediate:!0}},created:function(){this.animation?this.duration=300:this.duration=0},methods:{clear:function(t){t.stopPropagation()},open:function(){var t=this;this.showPopup=!0,this.$nextTick((function(){clearTimeout(t.timer),t.timer=setTimeout((function(){t.showTrans=!0}),50)})),this.$emit("change",{show:!0})},close:function(t){var e=this;this.showTrans=!1,this.$nextTick((function(){clearTimeout(e.timer),e.timer=setTimeout((function(){e.$emit("change",{show:!1}),e.showPopup=!1}),300)}))},onTap:function(){this.maskClick&&this.close()}}};e.default=r},a1b4:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","about"),attrs:{_i:0}},[n("uni-nav-bar",{attrs:{fixed:"true","status-bar":"true","left-icon":"back",title:"关于",color:"#333","background-color":"#f1f1f1",_i:1},on:{clickLeft:t.toback}}),n("view",{staticClass:t._$s(2,"sc","appinfo"),attrs:{_i:2}}),n("view",{staticClass:t._$s(3,"sc","listbox"),attrs:{_i:3}},[n("view",{staticClass:t._$s(4,"sc","infobox"),attrs:{_i:4}},[n("text"),n("text",[t._v(t._$s(6,"t0-0",t._s(t.version)))])])]),n("view",{staticClass:t._$s(7,"sc","listbox"),attrs:{_i:7}},[n("view",{staticClass:t._$s(8,"sc","titles"),attrs:{_i:8}}),n("view",{staticClass:t._$s(9,"sc","infobox"),attrs:{_i:9}})]),n("view",{staticClass:t._$s(10,"sc","listbox"),attrs:{_i:10}},[n("view",{staticClass:t._$s(11,"sc","titles"),attrs:{_i:11}}),n("view",{staticClass:t._$s(12,"sc","infobox"),attrs:{_i:12}})]),n("view",{staticClass:t._$s(13,"sc","listbox"),attrs:{_i:13}},[n("view",{staticClass:t._$s(14,"sc","titles"),attrs:{_i:14}}),n("view",{staticClass:t._$s(15,"sc","infobox"),attrs:{_i:15}})]),n("view",{staticClass:t._$s(16,"sc","listbox"),attrs:{_i:16}},[n("view",{staticClass:t._$s(17,"sc","titles"),attrs:{_i:17}}),n("view",{staticClass:t._$s(18,"sc","infobox"),attrs:{_i:18}})])],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},a367:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("bfc3"));function a(t){return t&&t.__esModule?t:{default:t}}var r={},o={},s={name:"PieChart",props:{dataAs:{type:Object,default:function(){return{}}},basicAs:{type:Object,default:function(){return{}}},legendAs:{type:Object,default:function(){return{}}},extraAs:{type:Object,default:function(){return{}}},width:{type:Number,default:750},height:{type:Number,default:500},valueKey:{type:String,default:"series"},canvasId:{type:String,default:"pie_canvas_".concat(Math.ceil(1e4*Math.random(5)))}},data:function(){return{}},computed:{cWidth:function(){return uni.upx2px(this.width)},cHeight:function(){return uni.upx2px(this.height)}},methods:{showCharts:function(){var t={$this:this,canvasId:this.canvasId,type:"pie",padding:[15,15,0,15],colors:["#1890ff","#2fc25b","#facc14","#f04864","#8543e0","#90ed7d"],rotate:!1,rotateLock:!0,animation:!0,dataLabel:!0,duration:1e3,fontSize:12,background:"#ffffff",pixelRatio:1,width:this.cWidth,height:this.cHeight,series:this.dataAs[this.valueKey],legend:{show:!0,position:"top",float:"left",padding:10,margin:0},extra:{pie:{lableWidth:15}}};o[this.canvasId]=Object.assign(t,this.basicAs,this.legendAs,this.extraAs),r[this.canvasId]=new i.default(o[this.canvasId])},touchstart:function(t){r[this.canvasId].touchLegend(t,{animation:!1}),r[this.canvasId].showToolTip(t,{format:function(t){return"object"===typeof t.data?"".concat(t.name,":").concat(t.data.value):"".concat(t.name,":").concat(t.data)}})},changeData:function(t){r[this.canvasId].updateData({series:t})}}};e.default=s},a5f3:function(t,e,n){"use strict";n.r(e),e["default"]={pulldown:"",refreshempty:"",back:"",forward:"",more:"","more-filled":"",scan:"",qq:"",weibo:"",weixin:"",pengyouquan:"",loop:"",refresh:"","refresh-filled":"",arrowthindown:"",arrowthinleft:"",arrowthinright:"",arrowthinup:"","undo-filled":"",undo:"",redo:"","redo-filled":"",bars:"",chatboxes:"",camera:"","chatboxes-filled":"","camera-filled":"","cart-filled":"",cart:"","checkbox-filled":"",checkbox:"",arrowleft:"",arrowdown:"",arrowright:"","smallcircle-filled":"",arrowup:"",circle:"","eye-filled":"","eye-slash-filled":"","eye-slash":"",eye:"","flag-filled":"",flag:"","gear-filled":"",reload:"",gear:"","hand-thumbsdown-filled":"","hand-thumbsdown":"","hand-thumbsup-filled":"","heart-filled":"","hand-thumbsup":"",heart:"",home:"",info:"","home-filled":"","info-filled":"","circle-filled":"","chat-filled":"",chat:"","mail-open-filled":"","email-filled":"","mail-open":"",email:"",checkmarkempty:"",list:"","locked-filled":"",locked:"","map-filled":"","map-pin":"","map-pin-ellipse":"",map:"","minus-filled":"","mic-filled":"",minus:"",micoff:"",mic:"",clear:"",smallcircle:"",close:"",closeempty:"",paperclip:"",paperplane:"","paperplane-filled":"","person-filled":"","contact-filled":"",person:"",contact:"","images-filled":"",phone:"",images:"",image:"","image-filled":"","location-filled":"",location:"","plus-filled":"",plus:"",plusempty:"","help-filled":"",help:"","navigate-filled":"",navigate:"","mic-slash-filled":"",search:"",settings:"",sound:"","sound-filled":"","spinner-cycle":"","download-filled":"","personadd-filled":"","videocam-filled":"",personadd:"",upload:"","upload-filled":"",starhalf:"","star-filled":"",star:"",trash:"","phone-filled":"",compose:"",videocam:"","trash-filled":"",download:"","chatbubble-filled":"",chatbubble:"","cloud-download":"","cloud-upload-filled":"","cloud-upload":"","cloud-download-filled":"",headphones:"",shop:""}},a6cd:function(t,e,n){"use strict";n.r(e);var i=n("860d"),a=n("bbfa");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"394730e6",null,!1,i["a"],o);e["default"]=c.exports},a9b9:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","uni-load-more"),attrs:{_i:0},on:{click:t.onClick}},[t._$s(1,"i",!t.webviewHide&&("circle"===t.iconType||"auto"===t.iconType&&"android"===t.platform)&&"loading"===t.status&&t.showIcon)?n("view",{staticClass:t._$s(1,"sc","uni-load-more__img uni-load-more__img--android-MP"),style:t._$s(1,"s",{width:t.iconSize+"px",height:t.iconSize+"px"}),attrs:{_i:1}},[n("view",{style:t._$s(2,"s",{borderTopColor:t.color,borderTopWidth:t.iconSize/12}),attrs:{_i:2}}),n("view",{style:t._$s(3,"s",{borderTopColor:t.color,borderTopWidth:t.iconSize/12}),attrs:{_i:3}}),n("view",{style:t._$s(4,"s",{borderTopColor:t.color,borderTopWidth:t.iconSize/12}),attrs:{_i:4}})]):t._$s(5,"e",!t.webviewHide&&"loading"===t.status&&t.showIcon)?n("view",{staticClass:t._$s(5,"sc","uni-load-more__img uni-load-more__img--ios-H5"),style:t._$s(5,"s",{width:t.iconSize+"px",height:t.iconSize+"px"}),attrs:{_i:5}},[n("image",{})]):t._e(),n("text",{staticClass:t._$s(7,"sc","uni-load-more__text"),style:t._$s(7,"s",{color:t.color}),attrs:{_i:7}},[t._v(t._$s(7,"t0-0",t._s("more"===t.status?t.contentText.contentdown:"loading"===t.status?t.contentText.contentrefresh:t.contentText.contentnomore)))])])},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},a9ff:function(t,e,n){"use strict";n.r(e),function(t,i,a){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function o(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function s(t,e){return t(e={exports:{}},e.exports),e.exports}var c=s((function(t,e){var n;t.exports=(n=n||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},a=i.lib={},r=a.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,a=t.sigBytes;if(this.clamp(),i%4)for(var r=0;r<a;r++){var o=n[r>>>2]>>>24-r%4*8&255;e[i+r>>>2]|=o<<24-(i+r)%4*8}else for(r=0;r<a;r+=4)e[i+r>>>2]=n[r>>>2];return this.sigBytes+=a,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],a=function(e){e=e;var n=987654321,i=4294967295;return function(){var a=((n=36969*(65535&n)+(n>>16)&i)<<16)+(e=18e3*(65535&e)+(e>>16)&i)&i;return a/=4294967296,(a+=.5)*(t.random()>.5?1:-1)}},r=0;r<e;r+=4){var s=a(4294967296*(n||t.random()));n=987654071*s(),i.push(4294967296*s()|0)}return new o.init(i,e)}}),s=i.enc={},c=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],a=0;a<n;a++){var r=e[a>>>2]>>>24-a%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new o.init(n,e/2)}},l=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],a=0;a<n;a++){var r=e[a>>>2]>>>24-a%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new o.init(n,e)}},u=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},h=a.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,a=n.sigBytes,r=this.blockSize,s=a/(4*r),c=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*r,l=t.min(4*c,a);if(c){for(var u=0;u<c;u+=r)this._doProcessBlock(i,u);var h=i.splice(0,c);n.sigBytes-=l}return new o.init(h,l)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(a.Hasher=h.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new d.HMAC.init(t,n).finalize(e)}}}),i.algo={});return i}(Math),n)})),l=(s((function(t,e){var n;t.exports=(n=c,function(t){var e=n,i=e.lib,a=i.WordArray,r=i.Hasher,o=e.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=o.MD5=r.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var i=e+n,a=t[i];t[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var r=this._hash.words,o=t[e+0],c=t[e+1],f=t[e+2],p=t[e+3],g=t[e+4],v=t[e+5],_=t[e+6],y=t[e+7],m=t[e+8],b=t[e+9],x=t[e+10],w=t[e+11],S=t[e+12],T=t[e+13],k=t[e+14],A=t[e+15],P=r[0],O=r[1],C=r[2],$=r[3];P=l(P,O,C,$,o,7,s[0]),$=l($,P,O,C,c,12,s[1]),C=l(C,$,P,O,f,17,s[2]),O=l(O,C,$,P,p,22,s[3]),P=l(P,O,C,$,g,7,s[4]),$=l($,P,O,C,v,12,s[5]),C=l(C,$,P,O,_,17,s[6]),O=l(O,C,$,P,y,22,s[7]),P=l(P,O,C,$,m,7,s[8]),$=l($,P,O,C,b,12,s[9]),C=l(C,$,P,O,x,17,s[10]),O=l(O,C,$,P,w,22,s[11]),P=l(P,O,C,$,S,7,s[12]),$=l($,P,O,C,T,12,s[13]),C=l(C,$,P,O,k,17,s[14]),P=u(P,O=l(O,C,$,P,A,22,s[15]),C,$,c,5,s[16]),$=u($,P,O,C,_,9,s[17]),C=u(C,$,P,O,w,14,s[18]),O=u(O,C,$,P,o,20,s[19]),P=u(P,O,C,$,v,5,s[20]),$=u($,P,O,C,x,9,s[21]),C=u(C,$,P,O,A,14,s[22]),O=u(O,C,$,P,g,20,s[23]),P=u(P,O,C,$,b,5,s[24]),$=u($,P,O,C,k,9,s[25]),C=u(C,$,P,O,p,14,s[26]),O=u(O,C,$,P,m,20,s[27]),P=u(P,O,C,$,T,5,s[28]),$=u($,P,O,C,f,9,s[29]),C=u(C,$,P,O,y,14,s[30]),P=h(P,O=u(O,C,$,P,S,20,s[31]),C,$,v,4,s[32]),$=h($,P,O,C,m,11,s[33]),C=h(C,$,P,O,w,16,s[34]),O=h(O,C,$,P,k,23,s[35]),P=h(P,O,C,$,c,4,s[36]),$=h($,P,O,C,g,11,s[37]),C=h(C,$,P,O,y,16,s[38]),O=h(O,C,$,P,x,23,s[39]),P=h(P,O,C,$,T,4,s[40]),$=h($,P,O,C,o,11,s[41]),C=h(C,$,P,O,p,16,s[42]),O=h(O,C,$,P,_,23,s[43]),P=h(P,O,C,$,b,4,s[44]),$=h($,P,O,C,S,11,s[45]),C=h(C,$,P,O,A,16,s[46]),P=d(P,O=h(O,C,$,P,f,23,s[47]),C,$,o,6,s[48]),$=d($,P,O,C,y,10,s[49]),C=d(C,$,P,O,k,15,s[50]),O=d(O,C,$,P,v,21,s[51]),P=d(P,O,C,$,S,6,s[52]),$=d($,P,O,C,p,10,s[53]),C=d(C,$,P,O,x,15,s[54]),O=d(O,C,$,P,c,21,s[55]),P=d(P,O,C,$,m,6,s[56]),$=d($,P,O,C,A,10,s[57]),C=d(C,$,P,O,_,15,s[58]),O=d(O,C,$,P,T,21,s[59]),P=d(P,O,C,$,g,6,s[60]),$=d($,P,O,C,w,10,s[61]),C=d(C,$,P,O,f,15,s[62]),O=d(O,C,$,P,b,21,s[63]),r[0]=r[0]+P|0,r[1]=r[1]+O|0,r[2]=r[2]+C|0,r[3]=r[3]+$|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,a=8*e.sigBytes;n[a>>>5]|=128<<24-a%32;var r=t.floor(i/4294967296),o=i;n[15+(a+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});function l(t,e,n,i,a,r,o){var s=t+(e&n|~e&i)+a+o;return(s<<r|s>>>32-r)+e}function u(t,e,n,i,a,r,o){var s=t+(e&i|n&~i)+a+o;return(s<<r|s>>>32-r)+e}function h(t,e,n,i,a,r,o){var s=t+(e^n^i)+a+o;return(s<<r|s>>>32-r)+e}function d(t,e,n,i,a,r,o){var s=t+(n^(e|~i))+a+o;return(s<<r|s>>>32-r)+e}e.MD5=r._createHelper(c),e.HmacMD5=r._createHmacHelper(c)}(Math),n.MD5)})),s((function(t,e){var n,i,a;t.exports=(i=(n=c).lib.Base,a=n.enc.Utf8,void(n.algo.HMAC=i.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=a.parse(e));var n=t.blockSize,i=4*n;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var r=this._oKey=e.clone(),o=this._iKey=e.clone(),s=r.words,c=o.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;r.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))})),s((function(t,e){t.exports=c.HmacMD5})));class u extends Error{constructor(t){super(t.message),this.errMsg=t.message||"",Object.defineProperties(this,{code:{get:()=>t.code},requestId:{get:()=>t.requestId},message:{get(){return this.errMsg},set(t){this.errMsg=t}}})}}var h={sign:function(t,e){let n="";return Object.keys(t).sort().forEach((function(e){t[e]&&(n=n+"&"+e+"="+t[e])})),n=n.slice(1),l(n,e).toString()},wrappedRequest:function(t){return new Promise((e,n)=>{uni.request(Object.assign(t,{complete(t){t||(t={}),"request:fail"!==t.errMsg&&t.errMsg;const i=t.header&&t.header["request-id"];if(!t.statusCode||t.statusCode>=400)return n(new u({code:"SYS_ERR",message:t.errMsg||"request:fail",requestId:i}));const a=t.data;if(a.error)return n(new u({code:a.error.code,message:a.error.message,requestId:i}));a.result=a.data,a.requestId=i,delete a.data,e(a)}}))})}};const d={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",svg:"image/svg+xml",mp3:"audio/mp3",mp4:"video/mp4",ogg:"audio/ogg",webm:"video/webm"};function f(t){return d[t.toLowerCase()]}class p{constructor(t){["spaceId","clientSecret"].forEach(e=>{if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error(`缺少参数${e}`)}),this.config=Object.assign({},{endpoint:"https://api.bspapp.com"},t),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId}get hasAccessToken(){return!!this.accessToken}setAccessToken(t){uni.setStorageSync(this.config.accessTokenKey,t),this.accessToken=t}requestAuth(t){return h.wrappedRequest(t)}request(t,e){return this.hasAccessToken?e?h.wrappedRequest(t):h.wrappedRequest(t).catch(e=>new Promise((t,n)=>{!e||"GATEWAY_INVALID_TOKEN"!==e.code&&"InvalidParameter.InvalidToken"!==e.code?n(e):t()}).then(()=>this.getAccessToken()).then(()=>{const e=this.rebuildRequest(t);return this.request(e,!0)})):this.getAccessToken().then(()=>{const e=this.rebuildRequest(t);return this.request(e,!0)})}rebuildRequest(t){const e=Object.assign({},t);return e.data.token=this.accessToken,e.header["x-basement-token"]=this.accessToken,e.header["x-serverless-sign"]=h.sign(e.data,this.config.clientSecret),e}setupRequest(t,e){const n=Object.assign({},t,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};return"auth"!==e&&(n.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=h.sign(n,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:i}}getAccessToken(){return this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then(t=>new Promise((e,n)=>{t.result&&t.result.accessToken?(this.setAccessToken(t.result.accessToken),e(this.accessToken)):n(new u({code:"AUTH_FAILED",message:"获取accessToken失败"}))}))}authorize(){this.getAccessToken()}callFunction(t){const e={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:t.name,functionArgs:t.data||{}})};return this.config.useDebugFunction?this.request(this.setupRequest(e)).then(e=>{if(e&&e.requestId){const n=JSON.stringify({spaceId:this.config.spaceId,functionName:t.name,requestId:e.requestId});console.log(`[aliyun-request]${n}[/aliyun-request]`)}return Promise.resolve(e)}).catch(e=>{if(e&&e.requestId){const n=JSON.stringify({spaceId:this.config.spaceId,functionName:t.name,requestId:e.requestId});console.log(`[aliyun-request]${n}[/aliyun-request]`)}return Promise.reject(e)}):this.request(this.setupRequest(e))}getOSSUploadOptionsFromPath(t){const e={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(t)};return this.request(this.setupRequest(e))}uploadFileToOSS({url:t,formData:e,fileName:n,name:i,filePath:a,fileType:r,contentType:o,onUploadProgress:s}){return new Promise((o,c)=>{const l=uni.uploadFile({url:t,formData:e,fileName:n,name:i,filePath:a,fileType:r,header:{"X-OSS-server-side-encrpytion":"AES256"},success(t){t&&t.statusCode<400?o(t):c(new u({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(t){c(t)}});"function"==typeof s&&l.onProgressUpdate(t=>{s({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})})})}reportOSSUpload(t){const e={method:"serverless.file.resource.report",params:JSON.stringify(t)};return this.request(this.setupRequest(e))}uploadFile({filePath:t,onUploadProgress:e,config:n}){const i=n&&n.envType||this.config.envType;let a,r,o,s,c,l=t.split("/").pop();return(a=f(r=t.split(".").pop())?Promise.resolve():Promise.reject(new u({code:"UNSUPPORTED_FILE_TYPE",message:"不支持的文件类型"}))).then(()=>this.getOSSUploadOptionsFromPath({env:i,filename:l})).then(n=>{const i=n.result;o=f(r),s=i.id,c="https://"+i.cdnDomain+"/"+i.ossPath;const a={url:"https://"+i.host,formData:{"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:i.accessKeyId,Signature:i.signature,host:i.host,id:s,key:i.ossPath,policy:i.policy,success_action_status:200},fileName:"file",name:"file",filePath:t,fileType:"image",contentType:o};return this.uploadFileToOSS(Object.assign({},a,{onUploadProgress:e}))}).then(()=>this.reportOSSUpload({id:s,contentType:o})).then(e=>new Promise((n,i)=>{e.success?n({success:!0,filePath:t,fileID:c}):i(new u({code:"UPLOAD_FAILED",message:"文件上传失败"}))}))}deleteFile({fileList:t}){const e={method:"serverless.file.resource.delete",params:JSON.stringify({id:t[0]})};return this.request(this.setupRequest(e))}}const g=n("e35a").default||n("e35a"),v="__DC_STAT_UUID",_="__DC_UUID_VALUE",y="https://ide.dcloud.net.cn/serverless/function/invoke";function m(){let t="";if("n"===b()){try{t=plus.runtime.getDCloudId()}catch(o){t=""}return t}try{t=uni.getStorageSync(v)}catch(o){t=_}if(!t){t=Date.now()+""+Math.floor(1e7*Math.random());try{uni.setStorageSync(v,t)}catch(t){uni.setStorageSync(v,_)}}return t}function b(){return{"app-plus":"n",h5:"h5","mp-weixin":"wx","mp-alipay":"ali","mp-baidu":"bd","mp-toutiao":"tt","mp-qq":"qq"}["app-plus"]}function x(t){return function(e){if(!((e=e||{}).success||e.fail||e.complete))return t.call(this,e);t.call(this,e).then(t=>{e.success&&e.success(t),e.complete&&e.complete(t)}).catch(t=>{e.fail&&e.fail(t),e.complete&&e.complete(t)})}}const w={init(t){const e=new p(t);return["uploadFile","deleteFile"].forEach(t=>{e[t]=x(e[t]).bind(e)}),setTimeout(()=>{e.authorize()}),e}};var S;!function(t){t.local="local",t.none="none",t.session="session"}(S||(S={}));var T=function(){},k=function(){};function A(t,e,n){void 0===n&&(n={});var i=/\?/.test(e),a="";for(var r in n)""===a?!i&&(e+="?"):a+="&",a+=r+"="+encodeURIComponent(n[r]);return/^http(s)?\:\/\//.test(e+=a)?e:""+t+e}var P,O=Object.freeze({__proto__:null,get StorageType(){return S},AbstractSDKRequest:T,AbstractStorage:k,formatUrl:A}),C=(P=function(t,e){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}P(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),$=function(){return($=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return C(e,t),e.prototype.post=function(t){var e=t.url,n=t.data,i=t.headers;return new Promise((function(t,a){uni.request({url:A("https:",e),data:n,method:"POST",header:i,success:function(e){t(e)},fail:function(t){a(t)}})}))},e.prototype.upload=function(t){return new Promise((function(e){var n=t.url,i=t.file,a=t.data,r=t.headers;uni.uploadFile({url:A("https:",n),name:"file",formData:Object.assign({},a,{file:i}),filePath:i,header:r,success:function(t){var n={statusCode:t.statusCode,data:t.data||{}};200===t.statusCode&&a.success_action_status&&(n.statusCode=parseInt(a.success_action_status,10)),e(n)},fail:function(t){e(t)}})}))},e.prototype.download=function(t){var e=t.url,n=t.headers;return new Promise((function(t,i){uni.downloadFile({url:A("https:",e),header:n,success:function(e){200===e.statusCode&&e.tempFilePath?t({statusCode:200,tempFilePath:e.tempFilePath}):t(e)},fail:function(t){i(t)}})}))},e}(T),I={setItem:function(t,e){uni.setStorageSync(t,e)},getItem:function(t){return uni.getStorageSync(t)},removeItem:function(t){uni.removeStorageSync(t)},clear:function(){uni.clearStorageSync()}},M=function(t,e){void 0===e&&(e={});var n=uni.connectSocket($({url:t},e));return{set onopen(t){n.onOpen(t)},set onmessage(t){n.onMessage(t)},set onclose(t){n.onClose(t)},set onerror(t){n.onError(t)},send:function(t){return n.send({data:t})},close:function(t,e){return n.close({code:t,reason:e})},get readyState(){return n.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}},j={genAdapter:function(){return{root:{},reqClass:D,wsClass:M,localStorage:I,primaryStorage:S.local}},isMatch:function(){return"undefined"!=typeof uni&&!!uni.request},runtime:"uni_app"},E=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getQuery=function(t,e){if("undefined"==typeof window)return!1;var n=e||window.location.search,i=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=n.substr(n.indexOf("?")+1).match(i);return null!=a?a[2]:""},e.getHash=function(t){var e=window.location.hash.match(new RegExp("[#?&/]"+t+"=([^&#]*)"));return e?e[1]:""},e.removeParam=function(t,e){var n=e.split("?")[0],i=[],a=-1!==e.indexOf("?")?e.split("?")[1]:"";if(""!==a){for(var r=(i=a.split("&")).length-1;r>=0;r-=1)i[r].split("=")[0]===t&&i.splice(r,1);n=n+"?"+i.join("&")}return n},e.createPromiseCallback=function(){var t;if(!Promise){(t=function(){}).promise={};var e=function(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(t.promise,"then",{get:e}),Object.defineProperty(t.promise,"catch",{get:e}),t}var n=new Promise((function(e,n){t=function(t,i){return t?n(t):e(i)}}));return t.promise=n,t},e.getWeixinCode=function(){return e.getQuery("code")||e.getHash("code")},e.getMiniAppCode=function(){return new Promise((function(t,e){i.login({success:function(e){t(e.code)},fail:function(t){e(t)}})}))},e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isString=function(t){return"string"==typeof t},e.isUndefined=function(t){return void 0===t},e.isInstanceOf=function(t,e){return t instanceof e},e.isFormData=function(t){return"[object FormData]"===Object.prototype.toString.call(t)},e.genSeqId=function(){return Math.random().toString(16).slice(2)},e.getArgNames=function(t){var e=t.toString();return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(/([^\s,]+)/g)},e.formatUrl=function(t,e,n){void 0===n&&(n={});var i=/\?/.test(e),a="";for(var r in n)""===a?!i&&(e+="?"):a+="&",a+=r+"="+encodeURIComponent(n[r]);return/^http(s)?\:\/\//.test(e+=a)?e:""+t+e}}));o(E),E.getQuery,E.getHash,E.removeParam,E.createPromiseCallback,E.getWeixinCode,E.getMiniAppCode,E.isArray,E.isString,E.isUndefined,E.isInstanceOf,E.isFormData,E.genSeqId,E.getArgNames,E.formatUrl;var L,R="dist/index.js",N="./dist/index.d.ts",F={build:"npm run tsc && webpack",tsc:"tsc -p tsconfig.json","tsc:w":"tsc -p tsconfig.json -w",test:"jest --verbose false -i",e2e:'NODE_ENV=e2e webpack && jest --config="./jest.e2e.config.js"  --verbose false -i "e2e"',start:"webpack-dev-server --hot --open",eslint:'eslint "./**/*.js" "./**/*.ts"',"eslint-fix":'eslint --fix "./**/*.js" "./**/*.ts"',test_web:"npm run tsc && webpack-dev-server --devtool eval-source-map --progress --colors --hot --inline --content-base ./dist --host jimmytest-088bef.tcb.qcloud.la --port 80 --disableHostCheck true --mode development --config webpack.test.js"},z={type:"git",url:"https://github.com/TencentCloudBase/tcb-js-sdk"},q=["tcb","js-sdk"],U={"@cloudbase/adapter-interface":"^0.2.0","@cloudbase/adapter-wx_mp":"^0.2.1","@cloudbase/database":"^0.9.8"},B={"@babel/core":"^7.6.2","@babel/plugin-proposal-class-properties":"^7.5.5","@babel/plugin-proposal-object-rest-spread":"^7.6.2","@babel/plugin-transform-runtime":"^7.6.2","@babel/preset-env":"^7.6.2","@babel/preset-typescript":"^7.6.0","@babel/runtime":"^7.6.2","@types/jest":"^23.1.4","@types/node":"^10.14.4","@types/superagent":"^4.1.4",axios:"^0.19.0","babel-eslint":"^10.0.1","babel-loader":"^8.0.6","babel-polyfill":"^6.26.0",eslint:"^5.16.0","eslint-config-alloy":"^1.4.2","eslint-config-prettier":"^4.1.0","eslint-plugin-prettier":"^3.0.1","eslint-plugin-typescript":"^1.0.0-rc.3",express:"^4.17.1",husky:"^3.1.0",jest:"^24.7.1","jest-puppeteer":"^4.3.0","lint-staged":"^9.5.0","power-assert":"^1.6.1",puppeteer:"^1.20.0","serve-static":"^1.14.1","ts-jest":"^23.10.4","ts-loader":"^6.2.1",typescript:"^3.4.3","typescript-eslint-parser":"^22.0.0",webpack:"^4.41.3","webpack-bundle-analyzer":"^3.4.1","webpack-cli":"^3.3.0","webpack-dev-server":"^3.3.1","webpack-merge":"^4.2.2","webpack-visualizer-plugin":"^0.1.11"},W={hooks:{"pre-commit":"lint-staged"}},H={name:"tcb-js-sdk",version:"1.3.5",description:"js sdk for tcb",main:R,types:N,scripts:F,repository:z,keywords:q,author:"jimmyjzhang",license:"ISC",dependencies:U,devDependencies:B,husky:W,"lint-staged":{"*.{js,ts}":["eslint --fix","git add"]}},G=(L=Object.freeze({__proto__:null,name:"tcb-js-sdk",version:"1.3.5",description:"js sdk for tcb",main:R,types:N,scripts:F,repository:z,keywords:q,author:"jimmyjzhang",license:"ISC",dependencies:U,devDependencies:B,husky:W,default:H}))&&L.default||L,K=s((function(t,e){var n=r&&r.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n(G);e.SDK_VERISON=i.version,e.ACCESS_TOKEN="access_token",e.ACCESS_TOKEN_Expire="access_token_expire",e.REFRESH_TOKEN="refresh_token",e.ANONYMOUS_UUID="anonymous_uuid",e.LOGIN_TYPE_KEY="login_type",e.protocol="undefined"!=typeof location&&"http:"===location.protocol?"http:":"https:",e.BASE_URL="//tcb-api.tencentcloudapi.com/web"}));o(K),K.SDK_VERISON,K.ACCESS_TOKEN,K.ACCESS_TOKEN_Expire,K.REFRESH_TOKEN,K.ANONYMOUS_UUID,K.LOGIN_TYPE_KEY,K.protocol,K.BASE_URL;var V=s((function(t,e){var n=r&&r.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),i=r&&r.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=r&&r.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function o(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((i=i.apply(t,e||[])).next())}))},o=r&&r.__generator||function(t,e){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.get=function(t){return this._request(i(i({},t),{method:"get"}))},e.prototype.post=function(t){return this._request(i(i({},t),{method:"post"}))},e.prototype.upload=function(t){var e=t.data,n=t.file,a=t.name,r=new FormData;for(var o in e)r.append(o,e[o]);return r.append("key",a),r.append("file",n),this._request(i(i({},t),{data:r,method:"post"}))},e.prototype.download=function(t){return a(this,void 0,void 0,(function(){var e,n;return o(this,(function(i){return e=decodeURIComponent(new URL(t.url).pathname.split("/").pop()||""),(n=document.createElement("a")).href=t.url,n.setAttribute("download",e),n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),[2,new Promise((function(e){e({statusCode:200,tempFilePath:t.url})}))]}))}))},e.prototype._request=function(t){var e=String(t.method).toLowerCase()||"get";return new Promise((function(n){var i=t.url,a=t.headers,r=void 0===a?{}:a,o=t.data,s=t.responseType,c=E.formatUrl(K.protocol,i,"get"===e?o:{}),l=new XMLHttpRequest;for(var u in l.open(e,c),s&&(l.responseType=s),r)l.setRequestHeader(u,r[u]);l.onreadystatechange=function(){if(4===l.readyState){var t={statusCode:l.status};try{t.data=JSON.parse(l.responseText)}catch(t){}n(t)}},l.send("post"===e&&E.isFormData(o)?o:JSON.stringify(o||{}))}))},e}(O.AbstractSDKRequest);e.WebRequest=s,e.genAdapter=function(){return{root:window,reqClass:s,wsClass:WebSocket,localStorage:localStorage,sessionStorage:sessionStorage}}}));o(V),V.WebRequest,V.genAdapter;var Y=s((function(t,e){var n=r&&r.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i,a=n(V);!function(t){t.WEB="web",t.WX_MP="wx_mp"}(i=e.RUNTIME||(e.RUNTIME={})),e.useAdapters=function(t){for(var e=0,n=E.isArray(t)?t:[t];e<n.length;e++){var i=n[e],a=i.isMatch,r=i.genAdapter,o=i.runtime;if(a())return{adapter:r(),runtime:o}}},e.useDefaultAdapter=function(){return{adapter:a.genAdapter(),runtime:i.WEB}},e.Adapter={adapter:null,runtime:void 0}}));o(Y),Y.RUNTIME,Y.useAdapters,Y.useDefaultAdapter,Y.Adapter;var J=s((function(t,e){var n=r&&r.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){switch(Y.Adapter.adapter.primaryStorage||t){case"local":this.storageClass=Y.Adapter.adapter.localStorage||new o;break;case"none":this.storageClass=new o;break;default:this.storageClass=Y.Adapter.adapter.sessionStorage||new o}}return t.prototype.setStore=function(t,e,n){try{if(!this.storageClass)return}catch(t){return}var i,a={};a.version=n||"localCachev1",a.content=e,i=JSON.stringify(a);try{this.storageClass.setItem(t,i)}catch(t){return}},t.prototype.getStore=function(t,e){try{if(a&&Object({VUE_APP_PLATFORM:"app-plus",NODE_ENV:"production",BASE_URL:"/"})&&Object({VUE_APP_PLATFORM:"app-plus",NODE_ENV:"production",BASE_URL:"/"}).tcb_token)return Object({VUE_APP_PLATFORM:"app-plus",NODE_ENV:"production",BASE_URL:"/"}).tcb_token;if(!this.storageClass)return}catch(t){return""}e=e||"localCachev1";var n=this.storageClass.getItem(t);return n&&n.indexOf(e)>=0?JSON.parse(n).content:""},t.prototype.removeStore=function(t){this.storageClass.removeItem(t)},t}();e.Cache=i;var o=function(t){function e(){var e=t.call(this)||this;return Y.Adapter.adapter.root.tcbObject||(Y.Adapter.adapter.root.tcbObject={}),e}return n(e,t),e.prototype.setItem=function(t,e){Y.Adapter.adapter.root.tcbObject[t]=e},e.prototype.getItem=function(t){return Y.Adapter.adapter.root.tcbObject[t]},e.prototype.removeItem=function(t){delete Y.Adapter.adapter.root.tcbObject[t]},e.prototype.clear=function(){delete Y.Adapter.adapter.root.tcbObject},e}(O.AbstractStorage)}));o(J),J.Cache;var X=s((function(t,e){var n=r&&r.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),i=r&&r.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),a=0;for(e=0;e<n;e++)for(var r=arguments[e],o=0,s=r.length;o<s;o++,a++)i[a]=r[o];return i};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t,e){this.data=e||null,this.name=t};e.IEvent=a;var o=function(t){function e(e,n){var i=t.call(this,"error",{error:e,data:n})||this;return i.error=e,i}return n(e,t),e}(a);e.IErrorEvent=o;var s=function(){function t(){this._listeners={}}return t.prototype.on=function(t,e){return function(t,e,n){n[t]=n[t]||[],n[t].push(e)}(t,e,this._listeners),this},t.prototype.off=function(t,e){return function(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}(t,e,this._listeners),this},t.prototype.fire=function(t,e){if(E.isInstanceOf(t,o))return console.error(t.error),this;var n=E.isString(t)?new a(t,e||{}):t,r=n.name;if(this._listens(r)){n.target=this;for(var s=0,c=this._listeners[r]?i(this._listeners[r]):[];s<c.length;s++)c[s].call(this,n)}return this},t.prototype._listens=function(t){return this._listeners[t]&&this._listeners[t].length>0},t}();e.IEventEmitter=s;var c=new s;e.addEventListener=function(t,e){c.on(t,e)},e.activateEvent=function(t,e){void 0===e&&(e={}),c.fire(t,e)},e.removeEventListener=function(t,e){c.off(t,e)},e.EVENTS={LOGIN_STATE_CHANGED:"loginStateChanged",LOGIN_STATE_EXPIRE:"loginStateExpire",LOGIN_TYPE_CHANGE:"loginTypeChanged",ANONYMOUS_CONVERTED:"anonymousConverted",REFRESH_ACCESS_TOKEN:"refreshAccessToken"}}));o(X),X.IEvent,X.IErrorEvent,X.IEventEmitter,X.addEventListener,X.activateEvent,X.removeEventListener,X.EVENTS;var Q=s((function(t,e){var n=r&&r.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},i=r&&r.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function o(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((i=i.apply(t,e||[])).next())}))},a=r&&r.__generator||function(t,e){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously"],s={"X-SDK-Version":K.SDK_VERISON};function c(t,e,i){var a=t[e];t[e]=function(e){var r={},o={};i.forEach((function(n){var i=n.call(t,e),a=i.data,s=i.headers;Object.assign(r,a),Object.assign(o,s)}));var s=e.data;return s&&function(){if(E.isFormData(s))for(var t in r)s.append(t,r[t]);else e.data=n(n({},s),r)}(),e.headers=n(n({},e.headers||{}),o),a.call(t,e)}}function l(){var t=E.genSeqId();return{data:{seqId:t},headers:n(n({},s),{"x-seqid":t})}}var u=function(){function t(t){void 0===t&&(t={}),this.config=t,this.cache=new J.Cache(t.persistence),this.accessTokenKey=K.ACCESS_TOKEN+"_"+t.env,this.accessTokenExpireKey=K.ACCESS_TOKEN_Expire+"_"+t.env,this.refreshTokenKey=K.REFRESH_TOKEN+"_"+t.env,this.anonymousUuidKey=K.ANONYMOUS_UUID+"_"+t.env,this.loginTypeKey=K.LOGIN_TYPE_KEY+"_"+t.env,this._reqClass=new Y.Adapter.adapter.reqClass,c(this._reqClass,"post",[l]),c(this._reqClass,"upload",[l]),c(this._reqClass,"download",[l])}return t.prototype.post=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this._reqClass.post(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.upload=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this._reqClass.upload(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.download=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this._reqClass.download(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.refreshAccessToken=function(){return i(this,void 0,void 0,(function(){var t,e,n;return a(this,(function(i){switch(i.label){case 0:this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken()),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._refreshAccessTokenPromise];case 2:return t=i.sent(),[3,4];case 3:return n=i.sent(),e=n,[3,4];case 4:if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,e)throw e;return[2,t]}}))}))},t.prototype._refreshAccessToken=function(){return i(this,void 0,void 0,(function(){var t,e,n,i;return a(this,(function(a){switch(a.label){case 0:if(this.cache.removeStore(this.accessTokenKey),this.cache.removeStore(this.accessTokenExpireKey),!(t=this.cache.getStore(this.refreshTokenKey)))throw new Error("[tcb-js-sdk] 未登录CloudBase");return e={refresh_token:t},this.cache.getStore(this.loginTypeKey)===Z.LOGINTYPE.ANONYMOUS&&(e.anonymous_uuid=this.cache.getStore(this.anonymousUuidKey)),[4,this.request("auth.getJwt",e)];case 1:if((n=a.sent()).data.code)throw"SIGN_PARAM_INVALID"!==(i=n.data.code)&&"REFRESH_TOKEN_EXPIRED"!==i&&"INVALID_REFRESH_TOKEN"!==i||(X.activateEvent(X.EVENTS.LOGIN_STATE_EXPIRE),this.cache.removeStore(this.refreshTokenKey)),new Error("[tcb-js-sdk] 刷新access token失败："+n.data.code);return n.data.access_token?(X.activateEvent(X.EVENTS.REFRESH_ACCESS_TOKEN),this.cache.setStore(this.accessTokenKey,n.data.access_token),this.cache.setStore(this.accessTokenExpireKey,n.data.access_token_expire+Date.now()),X.activateEvent(X.EVENTS.LOGIN_TYPE_CHANGE,n.data.login_type),[2,{accessToken:n.data.access_token,accessTokenExpire:n.data.access_token_expire}]):(n.data.refresh_token&&(this.cache.removeStore(this.refreshTokenKey),this.cache.setStore(this.refreshTokenKey,n.data.refresh_token),this._refreshAccessToken()),[2])}}))}))},t.prototype.getAccessToken=function(){return i(this,void 0,void 0,(function(){var t,e,n,i;return a(this,(function(a){switch(a.label){case 0:return t=this.cache.getStore(this.accessTokenKey),e=this.cache.getStore(this.accessTokenExpireKey),n=!0,(i=this._shouldRefreshAccessTokenHook)?[4,this._shouldRefreshAccessTokenHook(t,e)]:[3,2];case 1:i=!a.sent(),a.label=2;case 2:return i&&(n=!1),(!t||!e||e<Date.now())&&n?[2,this.refreshAccessToken()]:[2,{accessToken:t,accessTokenExpire:e}]}}))}))},t.prototype.request=function(t,e,r){return i(this,void 0,void 0,(function(){var i,s,c,l,u,h,d,f,p,g,v,_;return a(this,(function(a){switch(a.label){case 0:return i="application/x-www-form-urlencoded",s=n({action:t,env:this.config.env,dataVersion:"2019-08-16"},e),-1!==o.indexOf(t)?[3,2]:(c=s,[4,this.getAccessToken()]);case 1:c.access_token=a.sent().accessToken,a.label=2;case 2:if("storage.uploadFile"===t){for(u in l=new FormData)l.hasOwnProperty(u)&&void 0!==l[u]&&l.append(u,s[u]);i="multipart/form-data"}else i="application/json;charset=UTF-8",l=s;return h={headers:{"content-type":i}},r&&r.onUploadProgress&&(h.onUploadProgress=r.onUploadProgress),d=e.parse,f=e.query,p=e.search,g={env:this.config.env},d&&(g.parse=!0),f&&(g=n(n({},f),g)),v=E.formatUrl(K.protocol,K.BASE_URL,g),p&&(v+=p),[4,this.post(n({url:v,data:l},h))];case 3:if(_=a.sent(),200!==Number(_.status)&&200!==Number(_.statusCode)||!_.data)throw new Error("network request error");return[2,_]}}))}))},t.prototype.send=function(t,e){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var n,i,r;return a(this,(function(a){switch(a.label){case 0:return n=setTimeout((function(){console.warn("Database operation is longer than 3s. Please check query performance and your network environment.")}),3e3),[4,this.request(t,e,{onUploadProgress:e.onUploadProgress})];case 1:return i=a.sent(),clearTimeout(n),"ACCESS_TOKEN_EXPIRED"!==i.data.code||-1!==o.indexOf(t)?[3,4]:[4,this.refreshAccessToken()];case 2:return a.sent(),[4,this.request(t,e,{onUploadProgress:e.onUploadProgress})];case 3:if((r=a.sent()).data.code)throw new Error("["+r.data.code+"] "+r.data.message);return[2,r.data];case 4:if(i.data.code)throw new Error("["+i.data.code+"] "+i.data.message);return[2,i.data]}}))}))},t}();e.Request=u}));o(Q),Q.Request;var Z=s((function(t,e){var n,i=r&&r.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function o(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((i=i.apply(t,e||[])).next())}))},a=r&&r.__generator||function(t,e){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.ANONYMOUS="ANONYMOUS",t.WECHAT="WECHAT",t.CUSTOM="CUSTOM",t.NULL="NULL"}(n=e.LOGINTYPE||(e.LOGINTYPE={}));var o=function(){function t(t){this._loginType=n.NULL,this.config=t,this.onLoginTypeChanged=this.onLoginTypeChanged.bind(this),X.addEventListener(X.EVENTS.LOGIN_TYPE_CHANGE,this.onLoginTypeChanged)}return t.prototype.init=function(){this.httpRequest=new Q.Request(this.config),this.cache=new J.Cache(this.config.persistence),this.accessTokenKey=K.ACCESS_TOKEN+"_"+this.config.env,this.accessTokenExpireKey=K.ACCESS_TOKEN_Expire+"_"+this.config.env,this.refreshTokenKey=K.REFRESH_TOKEN+"_"+this.config.env,this.loginTypeKey=K.LOGIN_TYPE_KEY+"_"+this.config.env},t.prototype.onLoginTypeChanged=function(t){this._loginType=t.data,this.cache.setStore(this.loginTypeKey,this._loginType)},Object.defineProperty(t.prototype,"loginType",{get:function(){return this._loginType},enumerable:!0,configurable:!0}),t.prototype.setRefreshToken=function(t){this.cache.removeStore(this.accessTokenKey),this.cache.removeStore(this.accessTokenExpireKey),this.cache.setStore(this.refreshTokenKey,t)},t.prototype.getRefreshTokenByWXCode=function(t,e,n){return i(this,void 0,void 0,(function(){var i;return a(this,(function(a){return i=Y.Adapter.runtime===Y.RUNTIME.WX_MP?"1":"0",[2,this.httpRequest.send("auth.getJwt",{appid:t,loginType:e,code:n,hybridMiniapp:i}).then((function(t){if(t.code)throw new Error("[tcb-js-sdk] 微信登录失败: "+t.code);if(t.refresh_token)return{refreshToken:t.refresh_token,accessToken:t.access_token,accessTokenExpire:t.access_token_expire};throw new Error("[tcb-js-sdk] getJwt未返回refreshToken")}))]}))}))},t}();e.default=o}));o(Z),Z.LOGINTYPE;var tt=s((function(t,e){var n=r&&r.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),i=r&&r.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function o(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((i=i.apply(t,e||[])).next())}))},a=r&&r.__generator||function(t,e){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},o=r&&r.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s,c,l=o(E),u=o(Z);!function(t){t.snsapi_base="snsapi_base",t.snsapi_userinfo="snsapi_userinfo",t.snsapi_login="snsapi_login"}(s||(s={})),function(t){t.redirect="redirect",t.prompt="prompt"}(c||(c={}));var h={},d=function(t){function e(e,n,i,a,r){var o=t.call(this,e)||this;return o.config=e,o.appid=n,o.scope=Y.Adapter.runtime===Y.RUNTIME.WX_MP?"snsapi_base":i,o.state=r||"weixin",o.loginMode=a||"redirect",o}return n(e,t),e.prototype.signIn=function(){return i(this,void 0,void 0,(function(){var t,e,n;return a(this,(function(i){switch(i.label){case 0:h[this.config.env]||(h[this.config.env]=this._signIn()),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,h[this.config.env]];case 2:return t=i.sent(),[3,4];case 3:return n=i.sent(),e=n,[3,4];case 4:if(h[this.config.env]=null,e)throw e;return[2,t]}}))}))},e.prototype._signIn=function(){return i(this,void 0,void 0,(function(){var t,e,n,i,r,o;return a(this,(function(a){switch(a.label){case 0:if(t=this.cache.getStore(this.accessTokenKey),e=this.cache.getStore(this.accessTokenExpireKey),t){if(e&&e>Date.now())return[2,{credential:{accessToken:t,refreshToken:this.cache.getStore(this.refreshTokenKey)}}];this.cache.removeStore(this.accessTokenKey),this.cache.removeStore(this.accessTokenExpireKey)}if(!1===Object.values(s).includes(s[this.scope]))throw new Error("错误的scope类型");return Y.Adapter.runtime!==Y.RUNTIME.WX_MP?[3,2]:[4,l.getMiniAppCode()];case 1:return n=a.sent(),[3,4];case 2:return[4,l.getWeixinCode()];case 3:if(!(n=a.sent()))return[2,this.redirect()];a.label=4;case 4:return i=function(t){switch(t){case s.snsapi_login:return"WECHAT-OPEN";default:return"WECHAT-PUBLIC"}}(this.scope),[4,this.getRefreshTokenByWXCode(this.appid,i,n)];case 5:return r=a.sent(),o=r.refreshToken,this.cache.setStore(this.refreshTokenKey,o),r.accessToken&&this.cache.setStore(this.accessTokenKey,r.accessToken),r.accessTokenExpire&&this.cache.setStore(this.accessTokenExpireKey,r.accessTokenExpire+Date.now()),X.activateEvent(X.EVENTS.LOGIN_STATE_CHANGED),X.activateEvent(X.EVENTS.LOGIN_TYPE_CHANGE,u.LOGINTYPE.WECHAT),[2,{credential:{refreshToken:o}}]}}))}))},e.prototype.redirect=function(){var t=l.removeParam("code",location.href);t=l.removeParam("state",t),t=encodeURIComponent(t);var e="//open.weixin.qq.com/connect/oauth2/authorize";"snsapi_login"===this.scope&&(e="//open.weixin.qq.com/connect/qrconnect"),"redirect"===c[this.loginMode]&&(location.href=e+"?appid="+this.appid+"&redirect_uri="+t+"&response_type=code&scope="+this.scope+"&state="+this.state+"#wechat_redirect")},e}(u.default);e.default=d}));o(tt);var et=s((function(t,e){var n=r&&r.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),i=r&&r.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=r&&r.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function o(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((i=i.apply(t,e||[])).next())}))},o=r&&r.__generator||function(t,e){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},s=r&&r.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var c=s(Z),l=function(t){function e(e){var n=t.call(this,i(i({},e),{persistence:"local"}))||this;return n._anonymousUuidKey=K.ANONYMOUS_UUID+"_"+n.config.env,n._loginTypeKey=K.LOGIN_TYPE_KEY+"_"+n.config.env,n}return n(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.signIn=function(){return a(this,void 0,void 0,(function(){var t,e,n;return o(this,(function(i){switch(i.label){case 0:return t=this.cache.getStore(this._anonymousUuidKey)||void 0,e=this.cache.getStore(this.refreshTokenKey)||void 0,[4,this.httpRequest.send("auth.signInAnonymously",{anonymous_uuid:t,refresh_token:e})];case 1:return(n=i.sent()).uuid&&n.refresh_token?(this._setAnonymousUUID(n.uuid),this.setRefreshToken(n.refresh_token),[4,this.httpRequest.refreshAccessToken()]):[3,3];case 2:return i.sent(),X.activateEvent(X.EVENTS.LOGIN_STATE_CHANGED),X.activateEvent(X.EVENTS.LOGIN_TYPE_CHANGE,c.LOGINTYPE.ANONYMOUS),[2,{credential:{refreshToken:n.refresh_token}}];case 3:throw new Error("[tcb-js-sdk] 匿名登录失败")}}))}))},e.prototype.linkAndRetrieveDataWithTicket=function(t){return a(this,void 0,void 0,(function(){var e,n,i;return o(this,(function(a){switch(a.label){case 0:return e=this.cache.getStore(this._anonymousUuidKey),n=this.cache.getStore(this.refreshTokenKey),[4,this.httpRequest.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:e,refresh_token:n,ticket:t})];case 1:return(i=a.sent()).refresh_token?(this._clearAnonymousUUID(),this.setRefreshToken(i.refresh_token),[4,this.httpRequest.refreshAccessToken()]):[3,3];case 2:return a.sent(),X.activateEvent(X.EVENTS.ANONYMOUS_CONVERTED,{refresh_token:i.refresh_token}),X.activateEvent(X.EVENTS.LOGIN_TYPE_CHANGE,c.LOGINTYPE.CUSTOM),[2,{credential:{refreshToken:i.refresh_token}}];case 3:throw new Error("[tcb-js-sdk] 匿名转化失败")}}))}))},e.prototype.getAllStore=function(){var t={};return t[this.refreshTokenKey]=this.cache.getStore(this.refreshTokenKey)||"",t[this._loginTypeKey]=this.cache.getStore(this._loginTypeKey)||"",t[this.accessTokenKey]=this.cache.getStore(this.accessTokenKey)||"",t[this.accessTokenExpireKey]=this.cache.getStore(this.accessTokenExpireKey)||"",t},e.prototype._setAnonymousUUID=function(t){this.cache.removeStore(this._anonymousUuidKey),this.cache.setStore(this._anonymousUuidKey,t),this.cache.setStore(this._loginTypeKey,c.LOGINTYPE.ANONYMOUS)},e.prototype._clearAnonymousUUID=function(){this.cache.removeStore(this._anonymousUuidKey)},e}(c.default);e.AnonymousAuthProvider=l}));o(et),et.AnonymousAuthProvider;var nt=s((function(t,e){var n=r&&r.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),i=r&&r.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=r&&r.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function o(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((i=i.apply(t,e||[])).next())}))},o=r&&r.__generator||function(t,e){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},s=r&&r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},c=r&&r.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var l=s(tt),u=c(Z),h=function(t){function e(e){var n=t.call(this,e)||this;return n.config=e,n}return n(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.customAuthProvider=new u.default(this.config),this.customAuthProvider.init()},e.prototype.weixinAuthProvider=function(t){var e=t.appid,n=t.scope,i=t.loginMode,a=t.state,r=new l.default(this.config,e,n,i,a);return r.init(),r},e.prototype.signInAnonymously=function(){return a(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){switch(e.label){case 0:return this._anonymousAuthProvider||(this._anonymousAuthProvider=new et.AnonymousAuthProvider(this.config),this._anonymousAuthProvider.init()),X.addEventListener(X.EVENTS.LOGIN_TYPE_CHANGE,(function(e){if(e&&e.data===u.LOGINTYPE.ANONYMOUS){var n=t._anonymousAuthProvider.getAllStore();for(var i in n)n[i]&&t.httpRequest.cache.setStore(i,n[i])}})),[4,this._anonymousAuthProvider.signIn()];case 1:return[2,e.sent()]}}))}))},e.prototype.linkAndRetrieveDataWithTicket=function(t){return a(this,void 0,void 0,(function(){var e=this;return o(this,(function(n){switch(n.label){case 0:return this._anonymousAuthProvider||(this._anonymousAuthProvider=new et.AnonymousAuthProvider(this.config),this._anonymousAuthProvider.init()),X.addEventListener(X.EVENTS.ANONYMOUS_CONVERTED,(function(t){var n=t.data.refresh_token;n&&e.httpRequest.cache.setStore(e.refreshTokenKey,n)})),[4,this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(t)];case 1:return[2,n.sent()]}}))}))},e.prototype.signOut=function(){return a(this,void 0,void 0,(function(){var t,e,n,i,a,r,s;return o(this,(function(o){switch(o.label){case 0:if(this.loginType===u.LOGINTYPE.ANONYMOUS)throw new Error("[tcb-js-sdk] 匿名用户不支持登出操作");return t=this.httpRequest,e=t.cache,n=t.refreshTokenKey,i=t.accessTokenKey,a=t.accessTokenExpireKey,(r=e.getStore(n))?[4,this.httpRequest.send("auth.logout",{refresh_token:r})]:[2];case 1:return s=o.sent(),e.removeStore(n),e.removeStore(i),e.removeStore(a),X.activateEvent(X.EVENTS.LOGIN_STATE_CHANGED),X.activateEvent(X.EVENTS.LOGIN_TYPE_CHANGE,u.LOGINTYPE.NULL),[2,s]}}))}))},e.prototype.getAccessToken=function(){return a(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t={},[4,this.httpRequest.getAccessToken()];case 1:return[2,(t.accessToken=e.sent().accessToken,t.env=this.config.env,t)]}}))}))},e.prototype.onLoginStateExpire=function(t){X.addEventListener("loginStateExpire",t)},e.prototype.getLoginState=function(){return a(this,void 0,void 0,(function(){var t,e,n,i,a;return o(this,(function(r){switch(r.label){case 0:if(t=this.httpRequest,e=t.cache,n=t.refreshTokenKey,i=t.accessTokenKey,!(a=e.getStore(n)))return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.httpRequest.refreshAccessToken()];case 2:return r.sent(),[3,4];case 3:return r.sent(),[2,null];case 4:return[2,{isAnonymous:this.loginType===u.LOGINTYPE.ANONYMOUS,credential:{refreshToken:a,accessToken:e.getStore(i)}}];case 5:return[2,null]}}))}))},e.prototype.signInWithTicket=function(t){return a(this,void 0,void 0,(function(){var e,n,i,a;return o(this,(function(r){switch(r.label){case 0:if("string"!=typeof t)throw new Error("ticket must be a string");return e=this.httpRequest,n=e.cache,i=e.refreshTokenKey,[4,this.httpRequest.send("auth.signInWithTicket",{ticket:t,refresh_token:n.getStore(i)||""})];case 1:return(a=r.sent()).refresh_token?(this.customAuthProvider.setRefreshToken(a.refresh_token),[4,this.httpRequest.refreshAccessToken()]):[3,3];case 2:return r.sent(),X.activateEvent(X.EVENTS.LOGIN_STATE_CHANGED),X.activateEvent(X.EVENTS.LOGIN_TYPE_CHANGE,u.LOGINTYPE.CUSTOM),[2,{credential:{refreshToken:a.refresh_token}}];case 3:throw new Error("[tcb-js-sdk] 自定义登录失败")}}))}))},e.prototype.shouldRefreshAccessToken=function(t){this.httpRequest._shouldRefreshAccessTokenHook=t.bind(this)},e.prototype.getUserInfo=function(){return this.httpRequest.send("auth.getUserInfo",{}).then((function(t){return t.code?t:i(i({},t.data),{requestId:t.seqId})}))},e}(u.default);e.default=h}));o(nt);var it=s((function(t,e){var n=r&&r.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function o(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((i=i.apply(t,e||[])).next())}))},i=r&&r.__generator||function(t,e){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.uploadFile=function(t,e){e=e||E.createPromiseCallback();var n=new Q.Request(this.config),i=t.cloudPath,a=t.filePath,r=t.onUploadProgress;return n.send("storage.getUploadMetadata",{path:i}).then((function(t){var o=t.data,s=o.url,c=o.authorization,l=o.token,u=o.fileId,h=o.cosFileId,d=t.requestId,f={key:i,signature:c,"x-cos-meta-fileid":h,success_action_status:"201","x-cos-security-token":l};n.upload({url:s,data:f,file:a,name:i,onUploadProgress:r}).then((function(t){201===t.statusCode?e(null,{fileID:u,requestId:d}):e(new Error("STORAGE_REQUEST_FAIL: "+t.data))})).catch((function(t){e(t)}))})).catch((function(t){e(t)})),e.promise},e.deleteFile=function(t,e){var n=t.fileList;if(e=e||E.createPromiseCallback(),!n||!Array.isArray(n))return{code:"INVALID_PARAM",message:"fileList必须是非空的数组"};for(var i=0,a=n;i<a.length;i++){var r=a[i];if(!r||"string"!=typeof r)return{code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"}}var o={fileid_list:n};return new Q.Request(this.config).send("storage.batchDeleteFile",o).then((function(t){t.code?e(null,t):e(null,{fileList:t.data.delete_list,requestId:t.requestId})})).catch((function(t){e(t)})),e.promise},e.getTempFileURL=function(t,e){var n=t.fileList;e=e||E.createPromiseCallback(),n&&Array.isArray(n)||e(null,{code:"INVALID_PARAM",message:"fileList必须是非空的数组"});for(var i=[],a=0,r=n;a<r.length;a++){var o=r[a];"object"==typeof o?(o.hasOwnProperty("fileID")&&o.hasOwnProperty("maxAge")||e(null,{code:"INVALID_PARAM",message:"fileList的元素必须是包含fileID和maxAge的对象"}),i.push({fileid:o.fileID,max_age:o.maxAge})):"string"==typeof o?i.push({fileid:o}):e(null,{code:"INVALID_PARAM",message:"fileList的元素必须是字符串"})}var s={file_list:i};return new Q.Request(this.config).send("storage.batchGetDownloadUrl",s).then((function(t){t.code?e(null,t):e(null,{fileList:t.data.download_list,requestId:t.requestId})})).catch((function(t){e(t)})),e.promise},e.downloadFile=function(t,a){var r=t.fileID;return n(this,void 0,void 0,(function(){var t,n,o,s,c;return i(this,(function(i){switch(i.label){case 0:return[4,e.getTempFileURL.call(this,{fileList:[{fileID:r,maxAge:600}]})];case 1:return t=i.sent(),"SUCCESS"!==(n=t.fileList[0]).code?[2,a?a(n):new Promise((function(t){t(n)}))]:(o=n.download_url,o=encodeURI(o),s=new Q.Request(this.config),a?[4,s.download({url:o})]:[3,3]);case 2:return c=i.sent(),a(c),[3,4];case 3:return[2,s.download({url:o})];case 4:return[2]}}))}))}}));o(it),it.uploadFile,it.deleteFile,it.getTempFileURL,it.downloadFile;var at=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.callFunction=function(t,e){var n,i=t.name,a=t.data,r=t.query,o=t.parse,s=t.search,c=e||E.createPromiseCallback();try{n=a?JSON.stringify(a):""}catch(t){return Promise.reject(t)}if(!i)return Promise.reject(new Error("函数名不能为空"));var l={query:r,parse:o,search:s,function_name:i,request_data:n};return new Q.Request(this.config).send("functions.invokeFunction",l).then((function(t){if(t.code)c(null,t);else{var e=t.data.response_data;if(o)c(null,{result:e,requestId:t.requestId});else try{e=JSON.parse(t.data.response_data),c(null,{result:e,requestId:t.requestId})}catch(t){c(new Error("response data must be json"))}}return c.promise})).catch((function(t){c(t)})),c.promise}}));o(at),at.callFunction;var rt=o(s((function(t){var e=r&&r.__assign||function(){return(e=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},n=r&&r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=r&&r.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},a=n(j),o=n(nt),s=i(it),c=i(at),l={timeout:15e3},u=new(function(){function t(t){var e=this;this.config=t||this.config,this.authObj=void 0,X.addEventListener(X.EVENTS.LOGIN_TYPE_CHANGE,(function(t){t.data===Z.LOGINTYPE.ANONYMOUS&&(e.config.persistence="local")}))}return t.prototype.init=function(n){return this.config=e(e({},l),n),Y.Adapter.adapter||this._useDefaultAdapter(),new t(this.config)},t.prototype.auth=function(t){var n=(void 0===t?{}:t).persistence;return this.authObj?this.authObj:(this.config=e(e({},this.config),{persistence:n||Y.Adapter.adapter.primaryStorage||"session"}),this.authObj=new o.default(this.config),this.authObj.init(),this.authObj)},t.prototype.on=function(t,e){return X.addEventListener.apply(this,[t,e])},t.prototype.off=function(t,e){return X.removeEventListener.apply(this,[t,e])},t.prototype.callFunction=function(t,e){return c.callFunction.apply(this,[t,e])},t.prototype.deleteFile=function(t,e){return s.deleteFile.apply(this,[t,e])},t.prototype.getTempFileURL=function(t,e){return s.getTempFileURL.apply(this,[t,e])},t.prototype.downloadFile=function(t,e){return s.downloadFile.apply(this,[t,e])},t.prototype.uploadFile=function(t,e){return s.uploadFile.apply(this,[t,e])},t.prototype.useAdapters=function(t){var e=Y.useAdapters(t)||{},n=e.adapter,i=e.runtime;n&&(Y.Adapter.adapter=n),i&&(Y.Adapter.runtime=i)},t.prototype._useDefaultAdapter=function(){var t=Y.useDefaultAdapter(),e=t.adapter,n=t.runtime;Y.Adapter.adapter=e,Y.Adapter.runtime=n},t}());u.useAdapters(a.default);try{window.tcb=u}catch(r){}t.exports=u})));rt.useAdapters(j);const ot=rt,st=ot.init;let ct,lt;function ut(t){ct||(ct=function(){const t=uni.getSystemInfoSync();return{PLATFORM:"app-plus",OS:t.platform,APPID:g.appid}}(),lt=function(){const t=uni.getSystemInfoSync();return{ak:g.appid,p:"android"===t.platform?"a":"i",ut:b(),uuid:m()}}());const e=JSON.parse(JSON.stringify(t.data||{})),n=t.name,i=this.config.spaceId,a={tencent:"t",aliyun:"a"}[this.config.provider],r=Object.assign({},lt,{fn:n,sid:i,pvd:a});return Object.assign(e,{clientInfo:ct,uniCloudClientInfo:encodeURIComponent(JSON.stringify(r))}),t.data=e,t}function ht(t){const e=ut.call(this,t),n={tencent:"tcb",aliyun:"aliyun"}[this.config.provider],i=lt.ak,a=this.config.spaceId,r=JSON.stringify(e.data),o=e.name,s=JSON.stringify({body:{provider:n,appid:i,spaceId:a,functionName:o,run_params:r},header:{token:"aa855340-5f9c-11ea-aade-13af6457b8b5"}});return new Promise((t,e)=>{uni.request({url:y,method:"POST",data:{param:s},complete(i){i||(i={});const a=i.data&&i.data.body;if(!a)return void e(new u({message:`[FUNCTIONS_EXECUTE_FAIL] Request Fail: [${o}]`}));if("tcb"===n&&console.log(a.log),0!==a.invokeResult&&"0"!==a.invokeResult)return void e(new u({message:a.errorMsg}));const r=a.requestId;let s={};try{s=JSON.parse(a.result)}catch(t){s=a.result}t({requestId:r,result:s})}})})}ot.init=function(t){t.env=t.spaceId;const e=st.call(this,t);e.config.provider="tencent",e.config.spaceId=t.spaceId;const n=e.auth;if(e.auth=function(t){const e=n.call(this,t);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach(t=>{e[t]=x(e[t]).bind(e)}),e},["uploadFile","deleteFile","getTempFileURL","downloadFile"].forEach(t=>{e[t]=x(e[t]).bind(e)}),!1!==t.autoSignIn){const t=e.auth();t.getLoginState().then(e=>{e||t.signInAnonymously()})}return e};const dt={init(t){let e={};const n=(t.debugFunction,!1);switch(t.provider){case"tencent":e=ot.init(Object.assign(t,{useDebugFunction:n}));break;case"aliyun":e=w.init(Object.assign(t,{useDebugFunction:n}));break;default:throw new Error("未提供正确的provider参数")}return function(t){let e=t.callFunction;t.config.useDebugFunction&&"tencent"===t.config.provider&&(e=ht),t.callFunction=function(t){const n=ut.call(this,t);return new Promise((i,a)=>{e.call(this,n).then(t=>{i(t)}).catch(e=>{e&&e.message&&(e.message=`[${t.name}]: ${e.message}`),a(e)})})};const n=t.callFunction;t.callFunction=function(t){return x(n).call(this,t)}}(e),e.init=this.init,e}};let ft=dt;try{let t={};1===[{provider:"aliyun",spaceName:"formaldata",spaceId:"20ef610b-c354-49b8-8f3d-d6fcf22f027d",clientSecret:"OBBG3I/2j68pQ+sQD9QgCQ==",endpoint:"https://api.bspapp.com"}].length&&(t=[{provider:"aliyun",spaceName:"formaldata",spaceId:"20ef610b-c354-49b8-8f3d-d6fcf22f027d",clientSecret:"OBBG3I/2j68pQ+sQD9QgCQ==",endpoint:"https://api.bspapp.com"}][0]),ft=dt.init(t)}catch(r){["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile"].forEach(t=>{ft[t]=function(){const t=[{provider:"aliyun",spaceName:"formaldata",spaceId:"20ef610b-c354-49b8-8f3d-d6fcf22f027d",clientSecret:"OBBG3I/2j68pQ+sQD9QgCQ==",endpoint:"https://api.bspapp.com"}].length>0?"应用有多个服务空间，请通过uniCloud.init方法指定要使用的服务空间":"应用未关联服务空间，请在cloudfunctions目录右键关联服务空间";return console.error(t),Promise.reject(new u({code:"SYS_ERR",message:t}))}})}var pt=ft;e["default"]=pt}.call(this,n("c8ba"),n("fe07")["default"],n("4362"))},ad0f:function(t,e,n){"use strict";n.r(e);var i=n("538d"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},af5a:function(t,e,n){"use strict";n.r(e);var i=n("31ad"),a=n("d0db");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"44cbbd21",null,!1,i["a"],o);e["default"]=c.exports},b50e:function(t,e,n){"use strict";n.r(e);var i=n("8b90"),a=n("2bfa");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"104b3076",null,!1,i["a"],o);e["default"]=c.exports},b62f:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("bfc3"));function a(t){return t&&t.__esModule?t:{default:t}}var r={},o={},s={name:"HistogramChart",props:{dataAs:{type:Object,default:function(){return{}}},basicAs:{type:Object,default:function(){return{}}},xAxisAs:{type:Object,default:function(){return{}}},yAxisAs:{type:Object,default:function(){return{}}},legendAs:{type:Object,default:function(){return{}}},extraAs:{type:Object,default:function(){return{}}},width:{type:Number,default:750},height:{type:Number,default:500},labelKey:{type:String,default:"categories"},valueKey:{type:String,default:"series"},canvasId:{type:String,default:"histogram_canvas_".concat(Math.ceil(1e4*Math.random(5)))}},data:function(){return{}},computed:{cWidth:function(){return uni.upx2px(this.width)},cHeight:function(){return uni.upx2px(this.height)}},mounted:function(){},methods:{showCharts:function(){var t=this,e={$this:this,canvasId:this.canvasId,type:"column",padding:[15,15,0,15],colors:["#1890ff","#2fc25b","#facc14","#f04864","#8543e0","#90ed7d"],rotate:!1,rotateLock:!0,enableScroll:!0,enableMarkLine:!1,animation:!0,dataLabel:!0,duration:1e3,fontSize:12,background:"#f1f1f1",pixelRatio:1,width:this.cWidth,height:this.cHeight,categories:this.dataAs[this.labelKey],series:this.dataAs[this.valueKey],xAxis:{type:"grid",rotateLabel:!0,itemCount:5,scrollShow:!0,scrollAlign:"left",scrollBackgroundColor:"#EFEBEF",scrollColor:"#A6A6A6",disabled:!1,disableGrid:!0,fontColor:"#666666",boundaryGap:"center",axisLine:!1,axisLineColor:"#cccccc"},yAxis:{disabled:!1,position:"left",format:function(e){var n={type:"number",fixed:0,name:""},i=t.yAxisAs&&t.yAxisAs.formatter?Object.assign(n,t.yAxisAs.formatter):n,a=i.type,r=i.fixed,o=i.name;if("number"==a)return"".concat(e.toFixed(r)).concat(o);if("percent"==a){var s=o||"%";return"".concat((100*e).toFixed(r)).concat(o).concat(s)}return e.toFixed(0)},title:""},legend:{show:!0,position:"top",float:"left",padding:10,margin:0},extra:{column:{type:"group",width:.45*this.cWidth/this.dataAs[this.labelKey].length}}};o[this.canvasId]=Object.assign(e,this.basicAs,this.xAxisAS,this.yAxisAS,this.legendAs,this.extraAs),r[this.canvasId]=new i.default(o[this.canvasId])},touchstart:function(t){var e=this;r[this.canvasId].touchLegend(t,{animation:!1}),r[this.canvasId].scrollStart(t),r[this.canvasId].showToolTip(t,{format:function(t,n){var i,a={type:"number",fixed:0,name:""},r=e.yAxisAs&&e.yAxisAs.formatter?Object.assign(a,e.yAxisAs.formatter):a,o=r.type,s=r.fixed,c=r.name;return"object"===typeof t.data?"number"==o?"".concat(n," ").concat(t.name,":").concat(t.data.value.toFixed(s)).concat(c):"percent"==o?(i=c||"%","".concat(n," ").concat(t.name,":").concat((100*t.data.value).toFixed(s)).concat(i)):"".concat(n," ").concat(t.name,":").concat(t.data.value):"number"==o?"".concat(n," ").concat(t.name,":").concat(t.data.toFixed(s)).concat(c):"percent"==o?(i=c||"%","".concat(n," ").concat(t.name,":").concat((100*t.data).toFixed(s)).concat(i)):"".concat(n," ").concat(t.name,":").concat(t.data)}})},touchmove:function(t){r[this.canvasId].scroll(t)},touchend:function(t){r[this.canvasId].scrollEnd(t)},changeData:function(t){var e=t.series,n=t.categories;r[this.canvasId].updateData({series:e,categories:n})}}};e.default=s},b980:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","pie_chart"),attrs:{_i:0}},[n("canvas",{style:t._$s(1,"s",{width:t.cWidth+"px",height:t.cHeight+"px"}),attrs:{canvasId:t._$s(1,"a-canvasId",t.canvasId),id:"canvasId",_i:1},on:{touchstart:t.touchstart}}),t._t("default",null,{_i:2})],2)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},b9e0:function(t,e,n){"use strict";n.r(e);var i=n("2773"),a=n("ad0f");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},bbd0:function(t,e,n){"use strict";n.r(e);var i=n("a9b9"),a=n("3b17");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"fa51e4fa",null,!1,i["a"],o);e["default"]=c.exports},bbfa:function(t,e,n){"use strict";n.r(e);var i=n("c969"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},bdc8:function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=h(n("fc91")),r=h(n("c6d6")),o=h(n("cc1c")),s=h(n("8f42")),c=h(n("b50e")),l=h(n("c806")),u=h(n("a6cd"));function h(t){return t&&t.__esModule?t:{default:t}}function d(t){return g(t)||p(t)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function g(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var v={components:{uniCard:u.default,uniList:l.default,uniPopup:c.default,uniListItem:s.default,uniIcons:o.default,uniPagination:r.default,uniNavBar:a.default},onLoad:function(){var t=uni.getStorageSync("userId")||"";t?this.Token=t:uni.reLaunch({url:"./login"}),this.navs=d(this.Navs.navs);var e=new Date;this.nowdate={year:String(e.getFullYear()),month:String(Number(e.getMonth()+1)<10?"0"+(e.getMonth()+1):e.getMonth()+1),day:String(Number(e.getDate()+1)<10?"0"+e.getDate():e.getDate())}},onShow:function(){var t=uni.getStorageSync("userId")||"";t&&(this.getSummary(),this.getData())},data:function(){return{navs:[],Token:"",lists:[],budget:"",imgUrl:"",pageNum:0,opearObj:{},isnull:!1,iseye:!1,isbudget:!1,isoperat:!1,nowdate:{year:"",month:"",day:"",startTime:"",endTime:""},summary:{budgetotal:0,budgetId:"",exAmount:0,inAmount:0}}},methods:{getSummary:function(){var e=this;uni.showLoading({mask:!0,title:"数据加载中..."});var n={range:"month",token:this.Token,yearMonth:this.nowdate.year+"-"+this.nowdate.month,year:this.nowdate.year,month:this.nowdate.month};t.callFunction({name:"summary",data:n}).then((function(t){uni.hideLoading(),e.summary=t.result,e.budget=t.result.budgetotal})).catch((function(t){uni.hideLoading(),uni.showModal({content:"查询失败，错误信息为：".concat(t.message),showCancel:!1}),i("error",t," at pages\\bill\\index.vue:251")}))},getData:function(){var e=this;uni.showLoading({mask:!0,title:"数据加载中..."});var n={token:this.Token,pageNum:this.pageNum,range:"day",year:this.nowdate.year,month:this.nowdate.month,day:this.nowdate.day};t.callFunction({name:"get",data:n}).then((function(t){uni.hideLoading();var n=0,i=0;if(t.result.total>0){e.isnull=!1,t.result.list.forEach((function(t){t.weekday=e.utils.getMyDay(t.useDate),1==t.genre?n+=Number(t.amount):2==t.genre&&(i+=Number(t.amount))}));var a={datetime:"".concat(e.nowdate.year,"-").concat(e.nowdate.month,"-").concat(e.nowdate.day),budget:"收入：".concat(i," 支出：").concat(n),listItem:t.result.list};e.lists=[],e.lists.push(a)}else e.isnull=!0})).catch((function(t){uni.hideLoading(),e.lists=[],e.isnull=!0,uni.showToast({icon:"none",mask:!0,title:"未查询到相关信息"})}))},setbudget:function(){this.isbudget=!0,this.isoperat=!1,this.$refs.indpopup.open()},submitBudget:function(){var e=this;uni.showLoading({mask:!0,title:"处理中..."});var n=this.nowdate.year+"-"+this.nowdate.month,a="",r={yearMonth:n,createTime:new Date(n).getTime(),budgetTotal:this.budget,token:this.Token};this.summary.budgetId?(a="updateBudget",r.budgetId=this.summary.budgetId):a="budget",t.callFunction({name:a,data:r}).then((function(t){uni.hideLoading(),e.$refs.indpopup.close(),e.isbudget=!1,uni.showModal({content:"设置成功",showCancel:!1}),e.getSummary()})).catch((function(t){e.$refs.indpopup.close(),e.isbudget=!1,uni.hideLoading(),uni.showModal({content:"设置失败，请重新设置",showCancel:!1}),i("error",t," at pages\\bill\\index.vue:354")}))},clickSearch:function(){this.$refs.navs.close(),this.$refs.picture.close(),this.$refs.indpopup.close(),uni.navigateTo({url:"./search"})},handleItem:function(t){uni.navigateTo({url:"./details?id="+t})},handleLong:function(t){this.opearObj=t,this.isoperat=!0,this.isbudget=!1,this.$refs.indpopup.open()},onshowproof:function(t){this.imgUrl=t,this.$refs.picture.open()},moreOper:function(e){var n=this;1==e?this.handleItem(this.opearObj._id):uni.showModal({title:"提示",content:"是否确认删除此条数据？",success:function(e){e.confirm?(uni.showLoading({title:"数据删除中..."}),t.callFunction({name:"remove",data:{token:n.Token,dataId:n.opearObj._id}}).then((function(t){uni.hideLoading(),uni.showToast({title:t.result.msg,icon:"none",duration:2e3}),n.getData()})).catch((function(t){uni.hideLoading(),uni.showModal({content:"操作失败，请重新操作",showCancel:!1}),i("error",t," at pages\\bill\\index.vue:418")}))):e.cancel&&i("log","用户点击取消"," at pages\\bill\\index.vue:422")}}),this.isoperat=!1,this.$refs.indpopup.close()},openNavs:function(){this.$refs.navs.open()},handleNav:function(t){this.$refs.navs.close(),1==t.id?uni.navigateTo({url:"./about"}):2==t.id?uni.navigateTo({url:"./site"}):3==t.id&&uni.navigateTo({url:"./annal"})}}};e.default=v}).call(this,n("a9ff")["default"],n("0de9")["default"])},be1f:function(t,e,n){"use strict";n.r(e);var i=n("699e"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},bfc3:function(t,e,n){"use strict";(function(e){var n={yAxisWidth:15,yAxisSplit:5,xAxisHeight:15,xAxisLineHeight:15,legendHeight:15,yAxisTitleWidth:15,padding:[10,10,10,10],pixelRatio:1,rotate:!1,columePadding:3,fontSize:13,dataPointShape:["circle","circle","circle","circle"],colors:["#1890ff","#2fc25b","#facc14","#f04864","#8543e0","#90ed7d"],pieChartLinePadding:15,pieChartTextPadding:5,xAxisTextPadding:3,titleColor:"#333333",titleFontSize:20,subtitleColor:"#999999",subtitleFontSize:15,toolTipPadding:3,toolTipBackground:"#000000",toolTipOpacity:.7,toolTipLineHeight:20,radarLabelTextMargin:15,gaugeLabelTextMargin:15},i=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(null==t)throw new TypeError("Cannot convert undefined or null to object");if(!n||n.length<=0)return t;function a(t,e){for(var n in e)t[n]=t[n]&&"[object Object]"===t[n].toString()?a(t[n],e[n]):t[n]=e[n];return t}return n.forEach((function(e){t=a(t,e)})),t},a={toFixed:function(t,e){return e=e||2,this.isFloat(t)&&(t=t.toFixed(e)),t},isFloat:function(t){return t%1!==0},approximatelyEqual:function(t,e){return Math.abs(t-e)<1e-10},isSameSign:function(t,e){return Math.abs(t)===t&&Math.abs(e)===e||Math.abs(t)!==t&&Math.abs(e)!==e},isSameXCoordinateArea:function(t,e){return this.isSameSign(t.x,e.x)},isCollision:function(t,e){t.end={},t.end.x=t.start.x+t.width,t.end.y=t.start.y-t.height,e.end={},e.end.x=e.start.x+e.width,e.end.y=e.start.y-e.height;var n=e.start.x>t.end.x||e.end.x<t.start.x||e.end.y>t.start.y||e.start.y<t.end.y;return!n}};function r(t,e){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=t.replace(n,(function(t,e,n,i){return e+e+n+n+i+i})),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),r=parseInt(a[1],16),o=parseInt(a[2],16),s=parseInt(a[3],16);return"rgba("+r+","+o+","+s+","+e+")"}function o(t,e,n){if(isNaN(t))throw new Error("[uCharts] unvalid series data!");n=n||10,e=e||"upper";var i=1;while(n<1)n*=10,i*=10;t="upper"===e?Math.ceil(t*i):Math.floor(t*i);while(t%n!==0)"upper"===e?t++:t--;return t/i}function s(t,e,n,i){for(var a=[],r=0;r<t.length;r++){for(var o={data:[],name:e[r],color:n[r]},s=0,c=i.length;s<c;s++)if(s<t[r])o.data.push(null);else{for(var l=0,u=0;u<t[r];u++)l+=i[s-u][1];o.data.push(+(l/t[r]).toFixed(3))}a.push(o)}return a}function c(t,e,n,i,a){var r=a.width-a.area[1]-a.area[3],o=n.eachSpacing*(a.chartData.xAxisData.xAxisPoints.length-1),s=e;return e>=0?(s=0,t.event.trigger("scrollLeft")):Math.abs(e)>=o-r&&(s=r-o,t.event.trigger("scrollRight")),s}function l(t,e,n){function i(t){while(t<0)t+=2*Math.PI;while(t>2*Math.PI)t-=2*Math.PI;return t}return t=i(t),e=i(e),n=i(n),e>n&&(n+=2*Math.PI,t<e&&(t+=2*Math.PI)),t>=e&&t<=n}function u(t,e,n){var i=t,a=n-e,r=i+(n-a-i)/Math.sqrt(2);r*=-1;var o=(n-a)*(Math.sqrt(2)-1)-(n-a-i)/Math.sqrt(2);return{transX:r,transY:o}}function h(t,e){function n(t,e){return!(!t[e-1]||!t[e+1])&&(t[e].y>=Math.max(t[e-1].y,t[e+1].y)||t[e].y<=Math.min(t[e-1].y,t[e+1].y))}var i=.2,a=.2,r=null,o=null,s=null,c=null;if(e<1?(r=t[0].x+(t[1].x-t[0].x)*i,o=t[0].y+(t[1].y-t[0].y)*i):(r=t[e].x+(t[e+1].x-t[e-1].x)*i,o=t[e].y+(t[e+1].y-t[e-1].y)*i),e>t.length-3){var l=t.length-1;s=t[l].x-(t[l].x-t[l-1].x)*a,c=t[l].y-(t[l].y-t[l-1].y)*a}else s=t[e+1].x-(t[e+2].x-t[e].x)*a,c=t[e+1].y-(t[e+2].y-t[e].y)*a;return n(t,e+1)&&(c=t[e+1].y),n(t,e)&&(o=t[e].y),(o>=Math.max(t[e].y,t[e+1].y)||o<=Math.min(t[e].y,t[e+1].y))&&(o=t[e].y),(c>=Math.max(t[e].y,t[e+1].y)||c<=Math.min(t[e].y,t[e+1].y))&&(c=t[e+1].y),{ctrA:{x:r,y:o},ctrB:{x:s,y:c}}}function d(t,e,n){return{x:n.x+t,y:n.y-e}}function f(t,e){if(e)while(a.isCollision(t,e))t.start.x>0?t.start.y--:t.start.x<0?t.start.y++:t.start.y>0?t.start.y++:t.start.y--;return t}function p(t,e,n){var i=0;return t.map((function(t){if(t.color||(t.color=n.colors[i],i=(i+1)%n.colors.length),t.index||(t.index=0),t.type||(t.type=e.type),"undefined"==typeof t.show&&(t.show=!0),t.type||(t.type=e.type),t.pointShape||(t.pointShape="circle"),!t.legendShape)switch(t.type){case"line":t.legendShape="line";break;case"column":t.legendShape="rect";break;case"area":t.legendShape="triangle";break;default:t.legendShape="circle"}return t}))}function g(t,e){var n=0,i=e-t;return n=i>=1e4?1e3:i>=1e3?100:i>=100?10:i>=10?5:i>=1?1:i>=.1?.1:i>=.01?.01:i>=.001?.001:i>=1e-4?1e-4:i>=1e-5?1e-5:1e-6,{minRange:o(t,"lower",n),maxRange:o(e,"upper",n)}}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.fontSize;t=String(t);t=t.split("");for(var i=0,a=0;a<t.length;a++){var r=t[a];/[a-zA-Z]/.test(r)?i+=7:/[0-9]/.test(r)?i+=5.5:/\./.test(r)?i+=2.7:/-/.test(r)?i+=3.25:/[\u4e00-\u9fa5]/.test(r)?i+=10:/\(|\)/.test(r)?i+=3.73:/\s/.test(r)?i+=2.5:/%/.test(r)?i+=8:i+=10}return i*e/10}function _(t){return t.reduce((function(t,e){return(t.data?t.data:t).concat(e.data)}),[])}function y(t,e){for(var n=new Array(e),i=0;i<n.length;i++)n[i]=0;for(var a=0;a<t.length;a++)for(i=0;i<n.length;i++)n[i]+=t[a].data[i];return t.reduce((function(t,e){return(t.data?t.data:t).concat(e.data).concat(n)}),[])}function m(t,e,n){var i,a;return t.clientX?e.rotate?(a=e.height-t.clientX*e.pixelRatio,i=(t.pageY-n.currentTarget.offsetTop-e.height/e.pixelRatio/2*(e.pixelRatio-1))*e.pixelRatio):(i=t.clientX*e.pixelRatio,a=(t.pageY-n.currentTarget.offsetTop-e.height/e.pixelRatio/2*(e.pixelRatio-1))*e.pixelRatio):e.rotate?(a=e.height-t.x*e.pixelRatio,i=t.y*e.pixelRatio):(i=t.x*e.pixelRatio,a=t.y*e.pixelRatio),{x:i,y:a}}function b(t,e){for(var n=[],i=0;i<t.length;i++){var a=t[i];if(null!==a.data[e]&&"undefined"!==typeof a.data[e]&&a.show){var r={};r.color=a.color,r.type=a.type,r.style=a.style,r.pointShape=a.pointShape,r.disableLegend=a.disableLegend,r.name=a.name,r.show=a.show,r.data=a.format?a.format(a.data[e]):a.data[e],n.push(r)}}return n}function x(t){var e=t.map((function(t){return v(t)}));return Math.max.apply(null,e)}function w(t){for(var e=2*Math.PI/t,n=[],i=0;i<t;i++)n.push(e*i);return n.map((function(t){return-1*t+Math.PI/2}))}function S(t,e,n,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=t.map((function(t){var e=[];return e=i||t.data,{text:a.format?a.format(t,e[n]):t.name+": "+t.data,color:t.color}})),o=[],s={x:0,y:0},c=0;c<e.length;c++){var l=e[c];"undefined"!==typeof l[n]&&null!==l[n]&&o.push(l[n])}for(var u=0;u<o.length;u++){var h=o[u];s.x=Math.round(h.x),s.y+=h.y}return s.y/=o.length,{textList:r,offset:s}}function T(t,e,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=t.map((function(t){return{text:a.format?a.format(t,i[n]):t.name+": "+t.data,color:t.color,disableLegend:!!t.disableLegend}}));r=r.filter((function(t){if(!0!==t.disableLegend)return t}));for(var o=[],s={x:0,y:0},c=0;c<e.length;c++){var l=e[c];"undefined"!==typeof l[n]&&null!==l[n]&&o.push(l[n])}for(var u=0;u<o.length;u++){var h=o[u];s.x=Math.round(h.x),s.y+=h.y}return s.y/=o.length,{textList:r,offset:s}}function k(t,e,n,i,a,r){arguments.length>6&&void 0!==arguments[6]&&arguments[6];var o=r.color.upFill,s=r.color.downFill,c=[o,o,s,o],l=[],u={text:a[i],color:null};l.push(u),e.map((function(e){0==i&&e.data[1]-e.data[0]<0?c[1]=s:(e.data[0]<t[i-1][1]&&(c[0]=s),e.data[1]<e.data[0]&&(c[1]=s),e.data[2]>t[i-1][1]&&(c[2]=o),e.data[3]<t[i-1][1]&&(c[3]=s));var n={text:"开盘："+e.data[0],color:c[0]},a={text:"收盘："+e.data[1],color:c[1]},r={text:"最低："+e.data[2],color:c[2]},u={text:"最高："+e.data[3],color:c[3]};l.push(n,a,r,u)}));for(var h=[],d={x:0,y:0},f=0;f<n.length;f++){var p=n[f];"undefined"!==typeof p[i]&&null!==p[i]&&h.push(p[i])}return d.x=Math.round(h[0][0].x),{textList:l,offset:d}}function A(t){for(var e=[],n=0;n<t.length;n++)1==t[n].show&&e.push(t[n]);return e}function P(t,e,n,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=-1,o=0,s=[],c=0;c<e[0].length;c++)s.push(e[0][c].x);return"line"!=n.type&&"area"!=n.type||"justify"!=n.xAxis.boundaryGap||(o=n.chartData.eachSpacing/2),n.categories||(o=0),$(t,n,i)&&s.forEach((function(e,n){t.x+a+o>e&&(r=n)})),r}function O(t,e,n){var i=-1;if(C(t,e.area)){for(var a=e.points,r=-1,o=0,s=a.length;o<s;o++)for(var c=a[o],l=0;l<c.length;l++){r+=1;var u=c[l]["area"];if(t.x>u[0]&&t.x<u[2]&&t.y>u[1]&&t.y<u[3]){i=r;break}}return i}return i}function C(t,e){return t.x>e.start.x&&t.x<e.end.x&&t.y>e.start.y&&t.y<e.end.y}function $(t,e,n){return t.x<=e.width-e.area[1]+10&&t.x>=e.area[3]-10&&t.y>=e.area[0]&&t.y<=e.height-e.area[2]}function D(t,e,n){var i=2*Math.PI/n,a=-1;if(L(t,e.center,e.radius)){var r=function(t){return t<0&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),t},o=Math.atan2(e.center.y-t.y,t.x-e.center.x);o*=-1,o<0&&(o+=2*Math.PI);var s=e.angleList.map((function(t){return t=r(-1*t),t}));s.forEach((function(t,e){var n=r(t-i/2),s=r(t+i/2);s<n&&(s+=2*Math.PI),(o>=n&&o<=s||o+2*Math.PI>=n&&o+2*Math.PI<=s)&&(a=e)}))}return a}function I(t,e){for(var n=-1,i=0,a=e.series.length;i<a;i++){var r=e.series[i];if(t.x>r.funnelArea[0]&&t.x<r.funnelArea[2]&&t.y>r.funnelArea[1]&&t.y<r.funnelArea[3]){n=i;break}}return n}function M(t,e){for(var n=-1,i=0,a=e.length;i<a;i++){var r=e[i];if(t.x>r.area[0]&&t.x<r.area[2]&&t.y>r.area[1]&&t.y<r.area[3]){n=i;break}}return n}function j(t,e){for(var n=-1,i=e.chartData.mapData,a=e.series,r=Nt(t.y,t.x,i.bounds,i.scale,i.xoffset,i.yoffset),o=[r.x,r.y],s=0,c=a.length;s<c;s++){var l=a[s].geometry.coordinates;if(zt(o,l)){n=s;break}}return n}function E(t,e){var n=-1;if(L(t,e.center,e.radius)){var i=Math.atan2(e.center.y-t.y,t.x-e.center.x);i=-i;for(var a=0,r=e.series.length;a<r;a++){var o=e.series[a];if(l(i,o._start_,o._start_+2*o._proportion_*Math.PI)){n=a;break}}}return n}function L(t,e,n){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n,2)}function R(t){var e=[],n=[];return t.forEach((function(t,i){null!==t?n.push(t):(n.length&&e.push(n),n=[])})),n.length&&e.push(n),e}function N(t,e,n,i){var a={area:{start:{x:0,y:0},end:{x:0,y:0},width:0,height:0,wholeWidth:0,wholeHeight:0},points:[],widthArr:[],heightArr:[]};if(!1===e.legend.show)return i.legendData=a,a;var r=e.legend.padding,o=e.legend.margin,s=e.legend.fontSize,c=15*e.pixelRatio,l=5*e.pixelRatio,u=Math.max(e.legend.lineHeight*e.pixelRatio,s);if("top"==e.legend.position||"bottom"==e.legend.position){for(var h=[],d=0,f=[],p=[],g=0;g<t.length;g++){var _=t[g],y=c+l+v(_.name||"undefined",s)+e.legend.itemGap;d+y>e.width-e.padding[1]-e.padding[3]?(h.push(p),f.push(d-e.legend.itemGap),d=y,p=[_]):(d+=y,p.push(_))}if(p.length){h.push(p),f.push(d-e.legend.itemGap),a.widthArr=f;var m=Math.max.apply(null,f);switch(e.legend.float){case"left":a.area.start.x=e.padding[3],a.area.end.x=e.padding[3]+2*r;break;case"right":a.area.start.x=e.width-e.padding[1]-m-2*r,a.area.end.x=e.width-e.padding[1];break;default:a.area.start.x=(e.width-m)/2-r,a.area.end.x=(e.width+m)/2+r}a.area.width=m+2*r,a.area.wholeWidth=m+2*r,a.area.height=h.length*u+2*r,a.area.wholeHeight=h.length*u+2*r+2*o,a.points=h}}else{var b=t.length,x=e.height-e.padding[0]-e.padding[2]-2*o-2*r,w=Math.min(Math.floor(x/u),b);switch(a.area.height=w*u+2*r,a.area.wholeHeight=w*u+2*r,e.legend.float){case"top":a.area.start.y=e.padding[0]+o,a.area.end.y=e.padding[0]+o+a.area.height;break;case"bottom":a.area.start.y=e.height-e.padding[2]-o-a.area.height,a.area.end.y=e.height-e.padding[2]-o;break;default:a.area.start.y=(e.height-a.area.height)/2,a.area.end.y=(e.height+a.area.height)/2}for(var S=b%w===0?b/w:Math.floor(b/w+1),T=[],k=0;k<S;k++){var A=t.slice(k*w,k*w+w);T.push(A)}if(a.points=T,T.length){for(var P=0;P<T.length;P++){for(var O=T[P],C=0,$=0;$<O.length;$++){var D=c+l+v(O[$].name||"undefined",s)+e.legend.itemGap;D>C&&(C=D)}a.widthArr.push(C),a.heightArr.push(O.length*u+2*r)}for(var I=0,M=0;M<a.widthArr.length;M++)I+=a.widthArr[M];a.area.width=I-e.legend.itemGap+2*r,a.area.wholeWidth=a.area.width+r}}switch(e.legend.position){case"top":a.area.start.y=e.padding[0]+o,a.area.end.y=e.padding[0]+o+a.area.height;break;case"bottom":a.area.start.y=e.height-e.padding[2]-a.area.height-o,a.area.end.y=e.height-e.padding[2]-o;break;case"left":a.area.start.x=e.padding[3],a.area.end.x=e.padding[3]+a.area.width;break;case"right":a.area.start.x=e.width-e.padding[1]-a.area.width,a.area.end.x=e.width-e.padding[1];break}return i.legendData=a,a}function F(t,e,n,i){var a={angle:0,xAxisHeight:n.xAxisHeight},r=t.map((function(t){return v(t,e.xAxis.fontSize||n.fontSize)})),o=Math.max.apply(this,r);return 1==e.xAxis.rotateLabel&&o+2*n.xAxisTextPadding>i&&(a.angle=45*Math.PI/180,a.xAxisHeight=2*n.xAxisTextPadding+o*Math.sin(a.angle)),a}function z(t,e,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,a=_(t),r=[];a=a.filter((function(t){return"object"===typeof t&&null!==t?t.constructor==Array?null!==t:null!==t.value:null!==t})),a.map((function(t){"object"===typeof t?t.constructor==Array?"candle"==e.type?t.map((function(t){r.push(t)})):r.push(t[0]):r.push(t.value):r.push(t)}));var o=0,s=0;if(r.length>0&&(o=Math.min.apply(this,r),s=Math.max.apply(this,r)),i>-1?("number"===typeof e.xAxis.data[i].min&&(o=Math.min(e.xAxis.data[i].min,o)),"number"===typeof e.xAxis.data[i].max&&(s=Math.max(e.xAxis.data[i].max,s))):("number"===typeof e.xAxis.min&&(o=Math.min(e.xAxis.min,o)),"number"===typeof e.xAxis.max&&(s=Math.max(e.xAxis.max,s))),o===s){var c=s||10;s+=c}for(var l=g(o,s),u=l.minRange,h=l.maxRange,d=[],f=(h-u)/e.xAxis.splitNumber,p=0;p<=e.xAxis.splitNumber;p++)d.push(u+f*p);return d}function q(t,e,n){var i={angle:0,xAxisHeight:n.xAxisHeight};i.ranges=z(t,e,n),i.rangesFormat=i.ranges.map((function(t){return t=e.xAxis.format?e.xAxis.format(t):a.toFixed(t,2),t}));var r=i.ranges.map((function(t){return t=a.toFixed(t,2),t=e.xAxis.format?e.xAxis.format(Number(t)):t,t}));i=Object.assign(i,Z(r,e,n));var o=i.eachSpacing,s=r.map((function(t){return v(t)})),c=Math.max.apply(this,s);return c+2*n.xAxisTextPadding>o&&(i.angle=45*Math.PI/180,i.xAxisHeight=2*n.xAxisTextPadding+c*Math.sin(i.angle)),!0===e.xAxis.disabled&&(i.xAxisHeight=0),i}function U(t,e,n,i,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=a.extra.radar||{};o.max=o.max||0;for(var s=Math.max(o.max,Math.max.apply(null,_(i))),c=[],l=function(a){var o=i[a],l={};l.color=o.color,l.legendShape=o.legendShape,l.pointShape=o.pointShape,l.data=[],o.data.forEach((function(i,a){var o={};o.angle=t[a],o.proportion=i/s,o.position=d(n*o.proportion*r*Math.cos(o.angle),n*o.proportion*r*Math.sin(o.angle),e),l.data.push(o)})),c.push(l)},u=0;u<i.length;u++)l(u);return c}function B(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=0,a=0,r=0;r<t.length;r++){var o=t[r];o.data=null===o.data?0:o.data,i+=o.data}for(var s=0;s<t.length;s++){var c=t[s];c.data=null===c.data?0:c.data,c._proportion_=0===i?1/t.length*n:c.data/i*n,c._radius_=e}for(var l=0;l<t.length;l++){var u=t[l];u._start_=a,a+=2*u._proportion_*Math.PI}return t}function W(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t=t.sort((function(t,e){return parseInt(e.data)-parseInt(t.data)}));for(var i=0;i<t.length;i++)t[i].radius=t[i].data/t[0].data*e*n,t[i]._proportion_=t[i].data/t[0].data;return t.reverse()}function H(t,e,n,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=0,o=0,s=[],c=0;c<t.length;c++){var l=t[c];l.data=null===l.data?0:l.data,r+=l.data,s.push(l.data)}for(var u=Math.min.apply(null,s),h=Math.max.apply(null,s),d=i-n,f=0;f<t.length;f++){var p=t[f];p.data=null===p.data?0:p.data,0===r||"area"==e?(p._proportion_=p.data/r*a,p._rose_proportion_=1/t.length*a):(p._proportion_=p.data/r*a,p._rose_proportion_=p.data/r*a),p._radius_=n+d*((p.data-u)/(h-u))}for(var g=0;g<t.length;g++){var v=t[g];v._start_=o,o+=2*v._rose_proportion_*Math.PI}return t}function G(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;1==n&&(n=.999999);for(var i=0;i<t.length;i++){var a=t[i];a.data=null===a.data?0:a.data;var r=void 0;r="circle"==e.type?2:e.endAngle<e.startAngle?2+e.endAngle-e.startAngle:e.startAngle-e.endAngle,a._proportion_=r*a.data*n+e.startAngle,a._proportion_>=2&&(a._proportion_=a._proportion_%2)}return t}function K(t,e,n){for(var i=e-n+1,a=e,r=0;r<t.length;r++)t[r].value=null===t[r].value?0:t[r].value,t[r]._startAngle_=a,t[r]._endAngle_=i*t[r].value+e,t[r]._endAngle_>=2&&(t[r]._endAngle_=t[r]._endAngle_%2),a=t[r]._endAngle_;return t}function V(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=0;a<t.length;a++){var r=t[a];if(r.data=null===r.data?0:r.data,"auto"==n.pointer.color){for(var o=0;o<e.length;o++)if(r.data<=e[o].value){r.color=e[o].color;break}}else r.color=n.pointer.color;var s=n.startAngle-n.endAngle+1;r._endAngle_=s*r.data+n.startAngle,r._oldAngle_=n.oldAngle,n.oldAngle<n.endAngle&&(r._oldAngle_+=2),r.data>=n.oldData?r._proportion_=(r._endAngle_-r._oldAngle_)*i+n.oldAngle:r._proportion_=r._oldAngle_-(r._oldAngle_-r._endAngle_)*i,r._proportion_>=2&&(r._proportion_=r._proportion_%2)}return t}function Y(t){t=B(t);for(var e=0,n=0;n<t.length;n++){var i=t[n],r=i.format?i.format(+i._proportion_.toFixed(2)):a.toFixed(100*i._proportion_)+"%";e=Math.max(e,v(r))}return e}function J(t,e,n,i,a,r){return t.map((function(t){return null===t?null:(t.width=Math.ceil((e-2*a.columePadding)/n),r.extra.column&&r.extra.column.width&&+r.extra.column.width>0&&(t.width=Math.min(t.width,+r.extra.column.width)),t.width<=0&&(t.width=1),t.x+=(i+.5-n/2)*t.width,t)}))}function X(t,e,n,i,a,r,o){return t.map((function(t){return null===t?null:(t.width=Math.ceil((e-2*a.columePadding)/2),r.extra.column&&r.extra.column.width&&+r.extra.column.width>0&&(t.width=Math.min(t.width,+r.extra.column.width)),i>0&&(t.width-=2*o),t)}))}function Q(t,e,n,i,a,r,o){return t.map((function(t,n){return null===t?null:(t.width=Math.ceil((e-2*a.columePadding)/2),r.extra.column&&r.extra.column.width&&+r.extra.column.width>0&&(t.width=Math.min(t.width,+r.extra.column.width)),t)}))}function Z(t,e,n){var i=e.width-e.area[1]-e.area[3],a=e.enableScroll?Math.min(e.xAxis.itemCount,t.length):t.length;("line"==e.type||"area"==e.type)&&a>1&&"justify"==e.xAxis.boundaryGap&&(a-=1);var r=i/a,o=[],s=e.area[3],c=e.width-e.area[1];return t.forEach((function(t,e){o.push(s+e*r)})),"justify"!==e.xAxis.boundaryGap&&(!0===e.enableScroll?o.push(s+t.length*r):o.push(c)),{xAxisPoints:o,startX:s,endX:c,eachSpacing:r}}function tt(t,e,n,i,a,r,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c=[],l=r.height-r.area[0]-r.area[2];return t.forEach((function(t,o){if(null===t)c.push(null);else{var u=[];t.forEach((function(t,c){var h={};h.x=i[o]+Math.round(a/2);var d=t.value||t,f=l*(d-e)/(n-e);f*=s,h.y=r.height-Math.round(f)-r.area[2],u.push(h)})),c.push(u)}})),c}function et(t,e,n,i,a,r,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c="center";"line"!=r.type&&"area"!=r.type||(c=r.xAxis.boundaryGap);var l=[],u=r.height-r.area[0]-r.area[2],h=r.width-r.area[1]-r.area[3];return t.forEach((function(t,o){if(null===t)l.push(null);else{var d={};d.color=t.color,d.x=i[o];var f,p,g,v=t;if("object"===typeof t&&null!==t)if(t.constructor==Array)f=[].concat(r.chartData.xAxisData.ranges),p=f.shift(),g=f.pop(),v=t[1],d.x=r.area[3]+h*(t[0]-p)/(g-p);else v=t.value;"center"==c&&(d.x+=Math.round(a/2));var _=u*(v-e)/(n-e);_*=s,d.y=r.height-Math.round(_)-r.area[2],l.push(d)}})),l}function nt(t,e,n,i,a,r,o,s,c){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,u=[],h=r.height-r.area[0]-r.area[2];return t.forEach((function(t,o){if(null===t)u.push(null);else{var d={};if(d.color=t.color,d.x=i[o]+Math.round(a/2),s>0){for(var f=0,p=0;p<=s;p++)f+=c[p].data[o];var g=f-t,v=h*(f-e)/(n-e),_=h*(g-e)/(n-e)}else f=t,v=h*(f-e)/(n-e),_=0;var y=_;v*=l,y*=l,d.y=r.height-Math.round(v)-r.area[2],d.y0=r.height-Math.round(y)-r.area[2],u.push(d)}})),u}function it(t,e,n,i){var a,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;a="stack"==i?y(t,e.categories.length):_(t);var o=[];a=a.filter((function(t){return"object"===typeof t&&null!==t?t.constructor==Array?null!==t:null!==t.value:null!==t})),a.map((function(t){"object"===typeof t?t.constructor==Array?"candle"==e.type?t.map((function(t){o.push(t)})):o.push(t[1]):o.push(t.value):o.push(t)}));var s=0,c=0;if(o.length>0&&(s=Math.min.apply(this,o),c=Math.max.apply(this,o)),r>-1?("number"===typeof e.yAxis.data[r].min&&(s=Math.min(e.yAxis.data[r].min,s)),"number"===typeof e.yAxis.data[r].max&&(c=Math.max(e.yAxis.data[r].max,c))):("number"===typeof e.yAxis.min&&(s=Math.min(e.yAxis.min,s)),"number"===typeof e.yAxis.max&&(c=Math.max(e.yAxis.max,c))),s===c){var l=c||10;c+=l}for(var u=g(s,c),h=u.minRange,d=u.maxRange,f=[],p=(d-h)/e.yAxis.splitNumber,v=0;v<=e.yAxis.splitNumber;v++)f.push(h+p*v);return f.reverse()}function at(t,e,n){var r=i({},{type:""},e.extra.column),o=e.yAxis.data.length,s=new Array(o);if(o>0){for(var c=0;c<o;c++){s[c]=[];for(var l=0;l<t.length;l++)t[l].index==c&&s[c].push(t[l])}for(var u=new Array(o),h=new Array(o),d=new Array(o),f=function(t){var i=e.yAxis.data[t];1==e.yAxis.disabled&&(i.disabled=!0),u[t]=it(s[t],e,n,r.type,t);var o=i.fontSize||n.fontSize;d[t]={position:i.position?i.position:"left",width:0},h[t]=u[t].map((function(e){return e=a.toFixed(e,6),e=i.format?i.format(Number(e)):e,d[t].width=Math.max(d[t].width,v(e,o)+5),e}));var c=i.calibration?4*e.pixelRatio:0;d[t].width+=c+3*e.pixelRatio,!0===i.disabled&&(d[t].width=0)},p=0;p<o;p++)f(p)}else{u=new Array(1),h=new Array(1),d=new Array(1);u[0]=it(t,e,n,r.type),d[0]={position:"left",width:0};var g=e.yAxis.fontSize||n.fontSize;h[0]=u[0].map((function(t){return t=a.toFixed(t,6),t=e.yAxis.format?e.yAxis.format(Number(t)):t,d[0].width=Math.max(d[0].width,v(t,g)+5),t})),d[0].width+=3*e.pixelRatio,!0===e.yAxis.disabled?(d[0]={position:"left",width:0},e.yAxis.data[0]={disabled:!0}):e.yAxis.data[0]={disabled:!1,position:"left",max:e.yAxis.max,min:e.yAxis.min,format:e.yAxis.format}}return{rangesFormat:h,ranges:u,yAxisWidth:d}}function rt(t,e,n,i,a){for(var r=[].concat(n.chartData.yAxisData.ranges),o=n.height-n.area[0]-n.area[2],s=n.area[0],c=[],l=0;l<r.length;l++){var u=r[l].shift(),h=r[l].pop(),d=u-(u-h)*(t-s)/o;d=n.yAxis.data[l].format?n.yAxis.data[l].format(Number(d)):d.toFixed(0),c.push(String(d))}return c}function ot(t,e){for(var n,i,a=e.height-e.area[0]-e.area[2],r=0;r<t.length;r++){t[r].yAxisIndex=t[r].yAxisIndex?t[r].yAxisIndex:0;var o=[].concat(e.chartData.yAxisData.ranges[t[r].yAxisIndex]);n=o.pop(),i=o.shift();var s=a*(t[r].value-n)/(i-n);t[r].y=e.height-Math.round(s)-e.area[2]}return t}function st(t,e){!0!==e.rotateLock?(t.translate(e.height,0),t.rotate(90*Math.PI/180)):!0!==e._rotate_&&(t.translate(e.height,0),t.rotate(90*Math.PI/180),e._rotate_=!0)}function ct(t,e,n,i,a){i.beginPath(),"hollow"==a.dataPointShapeType?(i.setStrokeStyle(e),i.setFillStyle(a.background),i.setLineWidth(2*a.pixelRatio)):(i.setStrokeStyle("#ffffff"),i.setFillStyle(e),i.setLineWidth(1*a.pixelRatio)),"diamond"===n?t.forEach((function(t,e){null!==t&&(i.moveTo(t.x,t.y-4.5),i.lineTo(t.x-4.5,t.y),i.lineTo(t.x,t.y+4.5),i.lineTo(t.x+4.5,t.y),i.lineTo(t.x,t.y-4.5))})):"circle"===n?t.forEach((function(t,e){null!==t&&(i.moveTo(t.x+2.5*a.pixelRatio,t.y),i.arc(t.x,t.y,3*a.pixelRatio,0,2*Math.PI,!1))})):"rect"===n?t.forEach((function(t,e){null!==t&&(i.moveTo(t.x-3.5,t.y-3.5),i.rect(t.x-3.5,t.y-3.5,7,7))})):"triangle"===n&&t.forEach((function(t,e){null!==t&&(i.moveTo(t.x,t.y-4.5),i.lineTo(t.x-4.5,t.y+4.5),i.lineTo(t.x+4.5,t.y+4.5),i.lineTo(t.x,t.y-4.5))})),i.closePath(),i.fill(),i.stroke()}function lt(t,e,n,i){var a=t.title.fontSize||e.titleFontSize,r=t.subtitle.fontSize||e.subtitleFontSize,o=t.title.name||"",s=t.subtitle.name||"",c=t.title.color||e.titleColor,l=t.subtitle.color||e.subtitleColor,u=o?a:0,h=s?r:0,d=5;if(s){var f=v(s,r),p=i.x-f/2+(t.subtitle.offsetX||0),g=i.y+r/2+(t.subtitle.offsetY||0);o&&(g+=(u+d)/2),n.beginPath(),n.setFontSize(r),n.setFillStyle(l),n.fillText(s,p,g),n.closePath(),n.stroke()}if(o){var _=v(o,a),y=i.x-_/2+(t.title.offsetX||0),m=i.y+a/2+(t.title.offsetY||0);s&&(m-=(h+d)/2),n.beginPath(),n.setFontSize(a),n.setFillStyle(c),n.fillText(o,y,m),n.closePath(),n.stroke()}}function ut(t,e,n,i){var a=e.data;t.forEach((function(t,r){if(null!==t){i.beginPath(),i.setFontSize(e.textSize||n.fontSize),i.setFillStyle(e.textColor||"#666666");var o=a[r];"object"===typeof a[r]&&null!==a[r]&&(o=a[r].constructor==Array?a[r][1]:a[r].value);var s=e.format?e.format(o):o;i.fillText(String(s),t.x-v(s,e.textSize||n.fontSize)/2,t.y-4),i.closePath(),i.stroke()}}))}function ht(t,e,n,i,a,r){e-=t.width/2+a.gaugeLabelTextMargin;for(var o=t.startAngle-t.endAngle+1,s=o/t.splitLine.splitNumber,c=t.endNumber-t.startNumber,l=c/t.splitLine.splitNumber,u=t.startAngle,h=t.startNumber,d=0;d<t.splitLine.splitNumber+1;d++){var f={x:e*Math.cos(u*Math.PI),y:e*Math.sin(u*Math.PI)},p=t.labelFormat?t.labelFormat(h):h;f.x+=n.x-v(p)/2,f.y+=n.y;var g=f.x,_=f.y;r.beginPath(),r.setFontSize(a.fontSize),r.setFillStyle(t.labelColor||"#666666"),r.fillText(p,g,_+a.fontSize/2),r.closePath(),r.stroke(),u+=s,u>=2&&(u%=2),h+=l}}function dt(t,e,n,i,r,o){var s=i.extra.radar||{};e+=r.radarLabelTextMargin,t.forEach((function(t,c){var l={x:e*Math.cos(t),y:e*Math.sin(t)},u=d(l.x,l.y,n),h=u.x,f=u.y;a.approximatelyEqual(l.x,0)?h-=v(i.categories[c]||"")/2:l.x<0&&(h-=v(i.categories[c]||"")),o.beginPath(),o.setFontSize(r.fontSize),o.setFillStyle(s.labelColor||"#666666"),o.fillText(i.categories[c]||"",h,f+r.fontSize/2),o.closePath(),o.stroke()}))}function ft(t,e,n,i,r,o){for(var s=n.pieChartLinePadding,c=[],l=null,u=t.map((function(t){var e=t.format?t.format(+t._proportion_.toFixed(2)):a.toFixed(100*t._proportion_.toFixed(4))+"%";t._rose_proportion_&&(t._proportion_=t._rose_proportion_);var n=2*Math.PI-(t._start_+2*Math.PI*t._proportion_/2),i=t.color,r=t._radius_;return{arc:n,text:e,color:i,radius:r,textColor:t.textColor,textSize:t.textSize}})),h=0;h<u.length;h++){var p=u[h],g=Math.cos(p.arc)*(p.radius+s),_=Math.sin(p.arc)*(p.radius+s),y=Math.cos(p.arc)*p.radius,m=Math.sin(p.arc)*p.radius,b=g>=0?g+n.pieChartTextPadding:g-n.pieChartTextPadding,x=_,w=v(p.text,p.textSize||n.fontSize),S=x;l&&a.isSameXCoordinateArea(l.start,{x:b})&&(S=b>0?Math.min(x,l.start.y):g<0?Math.max(x,l.start.y):x>0?Math.max(x,l.start.y):Math.min(x,l.start.y)),b<0&&(b-=w);var T={lineStart:{x:y,y:m},lineEnd:{x:g,y:_},start:{x:b,y:S},width:w,height:n.fontSize,text:p.text,color:p.color,textColor:p.textColor,textSize:p.textSize};l=f(T,l),c.push(l)}for(var k=0;k<c.length;k++){var A=c[k],P=d(A.lineStart.x,A.lineStart.y,o),O=d(A.lineEnd.x,A.lineEnd.y,o),C=d(A.start.x,A.start.y,o);i.setLineWidth(1*e.pixelRatio),i.setFontSize(n.fontSize),i.beginPath(),i.setStrokeStyle(A.color),i.setFillStyle(A.color),i.moveTo(P.x,P.y);var $=A.start.x<0?C.x+A.width:C.x,D=A.start.x<0?C.x-5:C.x+5;i.quadraticCurveTo(O.x,O.y,$,C.y),i.moveTo(P.x,P.y),i.stroke(),i.closePath(),i.beginPath(),i.moveTo(C.x+A.width,C.y),i.arc($,C.y,2,0,2*Math.PI),i.closePath(),i.fill(),i.beginPath(),i.setFontSize(A.textSize||n.fontSize),i.setFillStyle(A.textColor||"#666666"),i.fillText(A.text,D,C.y+3),i.closePath(),i.stroke(),i.closePath()}}function pt(t,e,n,i){var a=e.extra.tooltip||{};a.gridType=void 0==a.gridType?"solid":a.gridType,a.dashLength=void 0==a.dashLength?4:a.dashLength;var o=e.area[0],s=e.height-e.area[2];if("dash"==a.gridType&&i.setLineDash([a.dashLength,a.dashLength]),i.setStrokeStyle(a.gridColor||"#cccccc"),i.setLineWidth(1*e.pixelRatio),i.beginPath(),i.moveTo(t,o),i.lineTo(t,s),i.stroke(),i.setLineDash([]),a.xAxisLabel){var c=e.categories[e.tooltip.index];i.setFontSize(n.fontSize);var l=v(c,n.fontSize),u=t-.5*l,h=s;i.beginPath(),i.setFillStyle(r(a.labelBgColor||n.toolTipBackground,a.labelBgOpacity||n.toolTipOpacity)),i.setStrokeStyle(a.labelBgColor||n.toolTipBackground),i.setLineWidth(1*e.pixelRatio),i.rect(u-n.toolTipPadding,h,l+2*n.toolTipPadding,n.fontSize+2*n.toolTipPadding),i.closePath(),i.stroke(),i.fill(),i.beginPath(),i.setFontSize(n.fontSize),i.setFillStyle(a.labelFontColor||n.fontColor),i.fillText(String(c),u,h+n.toolTipPadding+n.fontSize),i.closePath(),i.stroke()}}function gt(t,e,n){for(var a=i({},{type:"solid",dashLength:4,data:[]},t.extra.markLine),o=t.area[3],s=t.width-t.area[1],c=ot(a.data,t),l=0;l<c.length;l++){var u=i({},{lineColor:"#DE4A42",showLabel:!1,labelFontColor:"#666666",labelBgColor:"#DFE8FF",labelBgOpacity:.8,yAxisIndex:0},c[l]);if("dash"==a.type&&n.setLineDash([a.dashLength,a.dashLength]),n.setStrokeStyle(u.lineColor),n.setLineWidth(1*t.pixelRatio),n.beginPath(),n.moveTo(o,u.y),n.lineTo(s,u.y),n.stroke(),n.setLineDash([]),u.showLabel){var h=t.yAxis.format?t.yAxis.format(Number(u.value)):u.value;n.setFontSize(e.fontSize);var d=v(h,e.fontSize),f=t.padding[3]+e.yAxisTitleWidth-e.toolTipPadding,p=Math.max(t.area[3],d+2*e.toolTipPadding),g=p-f,_=f+(g-d)/2,y=u.y;n.setFillStyle(r(u.labelBgColor,u.labelBgOpacity)),n.setStrokeStyle(u.labelBgColor),n.setLineWidth(1*t.pixelRatio),n.beginPath(),n.rect(f,y-.5*e.fontSize-e.toolTipPadding,g,e.fontSize+2*e.toolTipPadding),n.closePath(),n.stroke(),n.fill(),n.beginPath(),n.setFontSize(e.fontSize),n.setFillStyle(u.labelFontColor),n.fillText(String(h),_,y+.5*e.fontSize),n.stroke()}}}function vt(t,e,n,a,o){var s=i({},{gridType:"solid",dashLength:4},t.extra.tooltip),c=t.area[3],l=t.width-t.area[1];if("dash"==s.gridType&&n.setLineDash([s.dashLength,s.dashLength]),n.setStrokeStyle(s.gridColor||"#cccccc"),n.setLineWidth(1*t.pixelRatio),n.beginPath(),n.moveTo(c,t.tooltip.offset.y),n.lineTo(l,t.tooltip.offset.y),n.stroke(),n.setLineDash([]),s.yAxisLabel)for(var u=rt(t.tooltip.offset.y,t.series,t,e,a),h=t.chartData.yAxisData.yAxisWidth,d=t.area[3],f=t.width-t.area[1],p=0;p<u.length;p++){n.setFontSize(e.fontSize);var g=v(u[p],e.fontSize),_=void 0,y=void 0,m=void 0;"left"==h[p].position?(_=d-h[p].width,y=Math.max(_,_+g+2*e.toolTipPadding)):(_=f,y=Math.max(_+h[p].width,_+g+2*e.toolTipPadding)),m=y-_;var b=_+(m-g)/2,x=t.tooltip.offset.y;n.beginPath(),n.setFillStyle(r(s.labelBgColor||e.toolTipBackground,s.labelBgOpacity||e.toolTipOpacity)),n.setStrokeStyle(s.labelBgColor||e.toolTipBackground),n.setLineWidth(1*t.pixelRatio),n.rect(_,x-.5*e.fontSize-e.toolTipPadding,m,e.fontSize+2*e.toolTipPadding),n.closePath(),n.stroke(),n.fill(),n.beginPath(),n.setFontSize(e.fontSize),n.setFillStyle(s.labelFontColor||e.fontColor),n.fillText(u[p],b,x+.5*e.fontSize),n.closePath(),n.stroke(),"left"==h[p].position?d-=h[p].width+t.yAxis.padding:f+=h[p].width+t.yAxis.padding}}function _t(t,e,n,a,o){var s=i({},{activeBgColor:"#000000",activeBgOpacity:.08},e.extra.tooltip),c=e.area[0],l=e.height-e.area[2];a.beginPath(),a.setFillStyle(r(s.activeBgColor,s.activeBgOpacity)),a.rect(t-o/2,c,o,l-c),a.closePath(),a.fill()}function yt(t,e,n,a,o,s,c){var l=i({},{showBox:!0,bgColor:"#000000",bgOpacity:.7,fontColor:"#FFFFFF"},n.extra.tooltip),u=4*n.pixelRatio,h=5*n.pixelRatio,d=8*n.pixelRatio,f=!1;"line"!=n.type&&"area"!=n.type&&"candle"!=n.type&&"mix"!=n.type||pt(n.tooltip.offset.x,n,a,o),e=i({x:0,y:0},e),e.y-=8*n.pixelRatio;var p=t.map((function(t){return v(t.text,a.fontSize)})),g=u+h+4*a.toolTipPadding+Math.max.apply(null,p),_=2*a.toolTipPadding+t.length*a.toolTipLineHeight;0!=l.showBox&&(e.x-Math.abs(n._scrollDistance_)+d+g>n.width&&(f=!0),_+e.y>n.height&&(e.y=n.height-_),o.beginPath(),o.setFillStyle(r(l.bgColor||a.toolTipBackground,l.bgOpacity||a.toolTipOpacity)),f?(o.moveTo(e.x,e.y+10*n.pixelRatio),o.lineTo(e.x-d,e.y+10*n.pixelRatio-5*n.pixelRatio),o.lineTo(e.x-d,e.y),o.lineTo(e.x-d-Math.round(g),e.y),o.lineTo(e.x-d-Math.round(g),e.y+_),o.lineTo(e.x-d,e.y+_),o.lineTo(e.x-d,e.y+10*n.pixelRatio+5*n.pixelRatio),o.lineTo(e.x,e.y+10*n.pixelRatio)):(o.moveTo(e.x,e.y+10*n.pixelRatio),o.lineTo(e.x+d,e.y+10*n.pixelRatio-5*n.pixelRatio),o.lineTo(e.x+d,e.y),o.lineTo(e.x+d+Math.round(g),e.y),o.lineTo(e.x+d+Math.round(g),e.y+_),o.lineTo(e.x+d,e.y+_),o.lineTo(e.x+d,e.y+10*n.pixelRatio+5*n.pixelRatio),o.lineTo(e.x,e.y+10*n.pixelRatio)),o.closePath(),o.fill(),t.forEach((function(t,n){if(null!==t.color){o.beginPath(),o.setFillStyle(t.color);var i=e.x+d+2*a.toolTipPadding,r=e.y+(a.toolTipLineHeight-a.fontSize)/2+a.toolTipLineHeight*n+a.toolTipPadding+1;f&&(i=e.x-g-d+2*a.toolTipPadding),o.fillRect(i,r,u,a.fontSize),o.closePath()}})),t.forEach((function(t,n){var i=e.x+d+2*a.toolTipPadding+u+h;f&&(i=e.x-g-d+2*a.toolTipPadding+ +u+h);var r=e.y+(a.toolTipLineHeight-a.fontSize)/2+a.toolTipLineHeight*n+a.toolTipPadding;o.beginPath(),o.setFontSize(a.fontSize),o.setFillStyle(l.fontColor),o.fillText(t.text,i,r+a.fontSize),o.closePath(),o.stroke()})))}function mt(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=e.chartData.xAxisData,s=o.xAxisPoints,c=o.eachSpacing,l=i({},{type:"group",width:c/2,meter:{border:4,fillColor:"#FFFFFF"}},e.extra.column),u=[];a.save();var h=-2,d=s.length+2;return e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&(a.translate(e._scrollDistance_,0),h=Math.floor(-e._scrollDistance_/c)-2,d=h+e.xAxis.itemCount+4),e.tooltip&&e.tooltip.textList&&e.tooltip.textList.length&&1===r&&_t(e.tooltip.offset.x,e,n,a,c),t.forEach((function(i,o){var f,p,g;f=[].concat(e.chartData.yAxisData.ranges[i.index]),p=f.pop(),g=f.shift();var v=i.data;switch(l.type){case"group":var _=et(v,p,g,s,c,e,n,r),y=nt(v,p,g,s,c,e,n,o,t,r);u.push(y),_=J(_,c,t.length,o,n,e);for(var m=0;m<_.length;m++){var b=_[m];if(null!==b&&m>h&&m<d){a.beginPath(),a.setStrokeStyle(b.color||i.color),a.setLineWidth(1),a.setFillStyle(b.color||i.color);var x=b.x-b.width/2,w=e.height-b.y-e.area[2];a.moveTo(x-1,b.y),a.lineTo(x+b.width-2,b.y),a.lineTo(x+b.width-2,e.height-e.area[2]),a.lineTo(x,e.height-e.area[2]),a.lineTo(x,b.y),a.closePath(),a.stroke(),a.fill()}}break;case"stack":_=nt(v,p,g,s,c,e,n,o,t,r);u.push(_),_=Q(_,c,t.length,o,n,e,t);for(var S=0;S<_.length;S++){var T=_[S];if(null!==T&&S>h&&S<d){a.beginPath(),a.setFillStyle(T.color||i.color);x=T.x-T.width/2+1,w=e.height-T.y-e.area[2];var k=e.height-T.y0-e.area[2];o>0&&(w-=k),a.moveTo(x,T.y),a.fillRect(x,T.y,T.width-2,w),a.closePath(),a.fill()}}break;case"meter":_=et(v,p,g,s,c,e,n,r);if(u.push(_),_=X(_,c,t.length,o,n,e,l.meter.border),0==o)for(var A=0;A<_.length;A++){var P=_[A];if(null!==P&&A>h&&A<d){a.beginPath(),a.setFillStyle(l.meter.fillColor);x=P.x-P.width/2,w=e.height-P.y-e.area[2];a.moveTo(x,P.y),a.fillRect(x,P.y,P.width,w),a.closePath(),a.fill(),l.meter.border>0&&(a.beginPath(),a.setStrokeStyle(i.color),a.setLineWidth(l.meter.border*e.pixelRatio),a.moveTo(x+.5*l.meter.border,P.y+w),a.lineTo(x+.5*l.meter.border,P.y+.5*l.meter.border),a.lineTo(x+P.width-.5*l.meter.border,P.y+.5*l.meter.border),a.lineTo(x+P.width-.5*l.meter.border,P.y+w),a.stroke())}}else for(var O=0;O<_.length;O++){var C=_[O];if(null!==C&&O>h&&O<d){a.beginPath(),a.setFillStyle(C.color||i.color);x=C.x-C.width/2,w=e.height-C.y-e.area[2];a.moveTo(x,C.y),a.fillRect(x,C.y,C.width,w),a.closePath(),a.fill()}}break}})),!1!==e.dataLabel&&1===r&&t.forEach((function(i,o){var u,h,d;u=[].concat(e.chartData.yAxisData.ranges[i.index]),h=u.pop(),d=u.shift();var f=i.data;switch(l.type){case"group":var p=et(f,h,d,s,c,e,n,r);p=J(p,c,t.length,o,n,e),ut(p,i,n,a);break;case"stack":p=nt(f,h,d,s,c,e,n,o,t,r);ut(p,i,n,a);break;case"meter":p=et(f,h,d,s,c,e,n,r);ut(p,i,n,a);break}})),a.restore(),{xAxisPoints:s,calPoints:u,eachSpacing:c}}function bt(t,e,n,a,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=i({},{color:{},average:{}},n.extra.candle);s.color=i({},{upLine:"#f04864",upFill:"#f04864",downLine:"#2fc25b",downFill:"#2fc25b"},s.color),s.average=i({},{show:!1,name:[],day:[],color:a.colors},s.average),n.extra.candle=s;var c=n.chartData.xAxisData,l=c.xAxisPoints,u=c.eachSpacing,d=[];r.save();var f=-2,p=l.length+2,g=0,v=n.width+u;return n._scrollDistance_&&0!==n._scrollDistance_&&!0===n.enableScroll&&(r.translate(n._scrollDistance_,0),f=Math.floor(-n._scrollDistance_/u)-2,p=f+n.xAxis.itemCount+4,g=-n._scrollDistance_-u+n.area[3],v=g+(n.xAxis.itemCount+4)*u),s.average.show&&e.forEach((function(t,e){var i,s,c;i=[].concat(n.chartData.yAxisData.ranges[t.index]),s=i.pop(),c=i.shift();for(var d=t.data,f=et(d,s,c,l,u,n,a,o),p=R(f),_=0;_<p.length;_++){var y=p[_];if(r.beginPath(),r.setStrokeStyle(t.color),r.setLineWidth(1),1===y.length)r.moveTo(y[0].x,y[0].y),r.arc(y[0].x,y[0].y,1,0,2*Math.PI);else{r.moveTo(y[0].x,y[0].y);for(var m=0,b=0;b<y.length;b++){var x=y[b];if(0==m&&x.x>g&&(r.moveTo(x.x,x.y),m=1),b>0&&x.x>g&&x.x<v){var w=h(y,b-1);r.bezierCurveTo(w.ctrA.x,w.ctrA.y,w.ctrB.x,w.ctrB.y,x.x,x.y)}}r.moveTo(y[0].x,y[0].y)}r.closePath(),r.stroke()}})),t.forEach((function(t,e){var i,c,h;i=[].concat(n.chartData.yAxisData.ranges[t.index]),c=i.pop(),h=i.shift();var g=t.data,v=tt(g,c,h,l,u,n,a,o);d.push(v);for(var _=R(v),y=0;y<_[0].length;y++)if(y>f&&y<p){var m=_[0][y];r.beginPath(),g[y][1]-g[y][0]>0?(r.setStrokeStyle(s.color.upLine),r.setFillStyle(s.color.upFill),r.setLineWidth(1*n.pixelRatio),r.moveTo(m[3].x,m[3].y),r.lineTo(m[1].x,m[1].y),r.lineTo(m[1].x-u/4,m[1].y),r.lineTo(m[0].x-u/4,m[0].y),r.lineTo(m[0].x,m[0].y),r.lineTo(m[2].x,m[2].y),r.lineTo(m[0].x,m[0].y),r.lineTo(m[0].x+u/4,m[0].y),r.lineTo(m[1].x+u/4,m[1].y),r.lineTo(m[1].x,m[1].y),r.moveTo(m[3].x,m[3].y)):(r.setStrokeStyle(s.color.downLine),r.setFillStyle(s.color.downFill),r.setLineWidth(1*n.pixelRatio),r.moveTo(m[3].x,m[3].y),r.lineTo(m[0].x,m[0].y),r.lineTo(m[0].x-u/4,m[0].y),r.lineTo(m[1].x-u/4,m[1].y),r.lineTo(m[1].x,m[1].y),r.lineTo(m[2].x,m[2].y),r.lineTo(m[1].x,m[1].y),r.lineTo(m[1].x+u/4,m[1].y),r.lineTo(m[0].x+u/4,m[0].y),r.lineTo(m[0].x,m[0].y),r.moveTo(m[3].x,m[3].y)),r.closePath(),r.fill(),r.stroke()}})),r.restore(),{xAxisPoints:l,calPoints:d,eachSpacing:u}}function xt(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=i({},{type:"straight",opacity:.2,addLine:!1,width:2,gradient:!1},e.extra.area),c=e.chartData.xAxisData,l=c.xAxisPoints,u=c.eachSpacing,d=e.height-e.area[2],f=[];a.save();var p=0,g=e.width+u;return e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&(a.translate(e._scrollDistance_,0),p=-e._scrollDistance_-u+e.area[3],g=p+(e.xAxis.itemCount+4)*u),t.forEach((function(t,i){var c,v,_;c=[].concat(e.chartData.yAxisData.ranges[t.index]),v=c.pop(),_=c.shift();var y=t.data,m=et(y,v,_,l,u,e,n,o);f.push(m);for(var b=R(m),x=0;x<b.length;x++){var w=b[x];if(a.beginPath(),a.setStrokeStyle(r(t.color,s.opacity)),s.gradient){var S=a.createLinearGradient(0,e.area[0],0,e.height-e.area[2]);S.addColorStop("0",r(t.color,s.opacity)),S.addColorStop("1.0",r("#FFFFFF",.1)),a.setFillStyle(S)}else a.setFillStyle(r(t.color,s.opacity));if(a.setLineWidth(s.width*e.pixelRatio),w.length>1){var T=w[0],k=w[w.length-1];a.moveTo(T.x,T.y);var A=0;if("curve"===s.type)for(var P=0;P<w.length;P++){var O=w[P];if(0==A&&O.x>p&&(a.moveTo(O.x,O.y),A=1),P>0&&O.x>p&&O.x<g){var C=h(w,P-1);a.bezierCurveTo(C.ctrA.x,C.ctrA.y,C.ctrB.x,C.ctrB.y,O.x,O.y)}}else for(var $=0;$<w.length;$++){var D=w[$];0==A&&D.x>p&&(a.moveTo(D.x,D.y),A=1),$>0&&D.x>p&&D.x<g&&a.lineTo(D.x,D.y)}a.lineTo(k.x,d),a.lineTo(T.x,d),a.lineTo(T.x,T.y)}else{var I=w[0];a.moveTo(I.x-u/2,I.y),a.lineTo(I.x+u/2,I.y),a.lineTo(I.x+u/2,d),a.lineTo(I.x-u/2,d),a.moveTo(I.x-u/2,I.y)}if(a.closePath(),a.fill(),s.addLine){if("dash"==t.lineType){var M=t.dashLength?t.dashLength:8;M*=e.pixelRatio,a.setLineDash([M,M])}if(a.beginPath(),a.setStrokeStyle(t.color),a.setLineWidth(s.width*e.pixelRatio),1===w.length)a.moveTo(w[0].x,w[0].y),a.arc(w[0].x,w[0].y,1,0,2*Math.PI);else{a.moveTo(w[0].x,w[0].y);var j=0;if("curve"===s.type)for(var E=0;E<w.length;E++){var L=w[E];if(0==j&&L.x>p&&(a.moveTo(L.x,L.y),j=1),E>0&&L.x>p&&L.x<g){var N=h(w,E-1);a.bezierCurveTo(N.ctrA.x,N.ctrA.y,N.ctrB.x,N.ctrB.y,L.x,L.y)}}else for(var F=0;F<w.length;F++){var z=w[F];0==j&&z.x>p&&(a.moveTo(z.x,z.y),j=1),F>0&&z.x>p&&z.x<g&&a.lineTo(z.x,z.y)}a.moveTo(w[0].x,w[0].y)}a.stroke(),a.setLineDash([])}}!1!==e.dataPointShape&&ct(m,t.color,t.pointShape,a,e)})),!1!==e.dataLabel&&1===o&&t.forEach((function(t,i){var r,s,c;r=[].concat(e.chartData.yAxisData.ranges[t.index]),s=r.pop(),c=r.shift();var h=t.data,d=et(h,s,c,l,u,e,n,o);ut(d,t,n,a)})),a.restore(),{xAxisPoints:l,calPoints:f,eachSpacing:u}}function wt(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=i({},{type:"straight",width:2},e.extra.line);o.width*=e.pixelRatio;var s=e.chartData.xAxisData,c=s.xAxisPoints,l=s.eachSpacing,u=[];a.save();var d=0,f=e.width+l;return e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&(a.translate(e._scrollDistance_,0),d=-e._scrollDistance_-l+e.area[3],f=d+(e.xAxis.itemCount+4)*l),t.forEach((function(t,i){var s,p,g;s=[].concat(e.chartData.yAxisData.ranges[t.index]),p=s.pop(),g=s.shift();var v=t.data,_=et(v,p,g,c,l,e,n,r);u.push(_);var y=R(_);if("dash"==t.lineType){var m=t.dashLength?t.dashLength:8;m*=e.pixelRatio,a.setLineDash([m,m])}a.beginPath(),a.setStrokeStyle(t.color),a.setLineWidth(o.width),y.forEach((function(t,e){if(1===t.length)a.moveTo(t[0].x,t[0].y),a.arc(t[0].x,t[0].y,1,0,2*Math.PI);else{a.moveTo(t[0].x,t[0].y);var n=0;if("curve"===o.type)for(var i=0;i<t.length;i++){var r=t[i];if(0==n&&r.x>d&&(a.moveTo(r.x,r.y),n=1),i>0&&r.x>d&&r.x<f){var s=h(t,i-1);a.bezierCurveTo(s.ctrA.x,s.ctrA.y,s.ctrB.x,s.ctrB.y,r.x,r.y)}}else for(var c=0;c<t.length;c++){var l=t[c];0==n&&l.x>d&&(a.moveTo(l.x,l.y),n=1),c>0&&l.x>d&&l.x<f&&a.lineTo(l.x,l.y)}a.moveTo(t[0].x,t[0].y)}})),a.stroke(),a.setLineDash([]),!1!==e.dataPointShape&&ct(_,t.color,t.pointShape,a,e)})),!1!==e.dataLabel&&1===r&&t.forEach((function(t,i){var o,s,u;o=[].concat(e.chartData.yAxisData.ranges[t.index]),s=o.pop(),u=o.shift();var h=t.data,d=et(h,s,u,c,l,e,n,r);ut(d,t,n,a)})),a.restore(),{xAxisPoints:c,calPoints:u,eachSpacing:l}}function St(t,e,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=e.chartData.xAxisData,s=o.xAxisPoints,c=o.eachSpacing,l=e.height-e.area[2],u=[],d=0,f=0;t.forEach((function(t,e){"column"==t.type&&(f+=1)})),i.save();var p=-2,g=s.length+2,v=0,_=e.width+c;if(e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&(i.translate(e._scrollDistance_,0),p=Math.floor(-e._scrollDistance_/c)-2,g=p+e.xAxis.itemCount+4,v=-e._scrollDistance_-c+e.area[3],_=v+(e.xAxis.itemCount+4)*c),t.forEach((function(t,o){var y,m,b;y=[].concat(e.chartData.yAxisData.ranges[t.index]),m=y.pop(),b=y.shift();var x=t.data,w=et(x,m,b,s,c,e,n,a);if(u.push(w),"column"==t.type){w=J(w,c,f,d,n,e);for(var S=0;S<w.length;S++){var T=w[S];if(null!==T&&S>p&&S<g){i.beginPath(),i.setStrokeStyle(T.color||t.color),i.setLineWidth(1),i.setFillStyle(T.color||t.color);var k=T.x-T.width/2;e.height,T.y,e.area[2];i.moveTo(k,T.y),i.moveTo(k-1,T.y),i.lineTo(k+T.width-2,T.y),i.lineTo(k+T.width-2,e.height-e.area[2]),i.lineTo(k,e.height-e.area[2]),i.lineTo(k,T.y),i.closePath(),i.stroke(),i.fill(),i.closePath(),i.fill()}}d+=1}if("area"==t.type)for(var A=R(w),P=0;P<A.length;P++){var O=A[P];if(i.beginPath(),i.setStrokeStyle(t.color),i.setFillStyle(r(t.color,.2)),i.setLineWidth(2*e.pixelRatio),O.length>1){var C=O[0],$=O[O.length-1];i.moveTo(C.x,C.y);var D=0;if("curve"===t.style)for(var I=0;I<O.length;I++){var M=O[I];if(0==D&&M.x>v&&(i.moveTo(M.x,M.y),D=1),I>0&&M.x>v&&M.x<_){var j=h(O,I-1);i.bezierCurveTo(j.ctrA.x,j.ctrA.y,j.ctrB.x,j.ctrB.y,M.x,M.y)}}else for(var E=0;E<O.length;E++){var L=O[E];0==D&&L.x>v&&(i.moveTo(L.x,L.y),D=1),E>0&&L.x>v&&L.x<_&&i.lineTo(L.x,L.y)}i.lineTo($.x,l),i.lineTo(C.x,l),i.lineTo(C.x,C.y)}else{var N=O[0];i.moveTo(N.x-c/2,N.y),i.lineTo(N.x+c/2,N.y),i.lineTo(N.x+c/2,l),i.lineTo(N.x-c/2,l),i.moveTo(N.x-c/2,N.y)}i.closePath(),i.fill()}if("line"==t.type){var F=R(w);F.forEach((function(n,a){if("dash"==t.lineType){var r=t.dashLength?t.dashLength:8;r*=e.pixelRatio,i.setLineDash([r,r])}if(i.beginPath(),i.setStrokeStyle(t.color),i.setLineWidth(2*e.pixelRatio),1===n.length)i.moveTo(n[0].x,n[0].y),i.arc(n[0].x,n[0].y,1,0,2*Math.PI);else{i.moveTo(n[0].x,n[0].y);var o=0;if("curve"==t.style)for(var s=0;s<n.length;s++){var c=n[s];if(0==o&&c.x>v&&(i.moveTo(c.x,c.y),o=1),s>0&&c.x>v&&c.x<_){var l=h(n,s-1);i.bezierCurveTo(l.ctrA.x,l.ctrA.y,l.ctrB.x,l.ctrB.y,c.x,c.y)}}else for(var u=0;u<n.length;u++){var d=n[u];0==o&&d.x>v&&(i.moveTo(d.x,d.y),o=1),u>0&&d.x>v&&d.x<_&&i.lineTo(d.x,d.y)}i.moveTo(n[0].x,n[0].y)}i.stroke(),i.setLineDash([])}))}"point"==t.type&&(t.addPoint=!0),1==t.addPoint&&"column"!==t.type&&ct(w,t.color,t.pointShape,i,e)})),!1!==e.dataLabel&&1===a){d=0;t.forEach((function(t,r){var o,l,u;o=[].concat(e.chartData.yAxisData.ranges[t.index]),l=o.pop(),u=o.shift();var h=t.data,p=et(h,l,u,s,c,e,n,a);"column"!==t.type?ut(p,t,n,i):(p=J(p,c,f,d,n,e),ut(p,t,n,i),d+=1)}))}return i.restore(),{xAxisPoints:s,calPoints:u,eachSpacing:c}}function Tt(t,e,n,i,a,r){var o=t.extra.tooltip||{};o.horizentalLine&&t.tooltip&&1===i&&("line"==t.type||"area"==t.type||"column"==t.type||"candle"==t.type||"mix"==t.type)&&vt(t,e,n,a,r),n.save(),t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&n.translate(t._scrollDistance_,0),t.tooltip&&t.tooltip.textList&&t.tooltip.textList.length&&1===i&&yt(t.tooltip.textList,t.tooltip.offset,t,e,n,a,r),n.restore()}function kt(t,e,n,i){var a=e.chartData.xAxisData,r=a.xAxisPoints,o=a.startX,s=a.endX,c=a.eachSpacing,l="center";"line"!=e.type&&"area"!=e.type||(l=e.xAxis.boundaryGap);var h=e.height-e.area[2],d=e.area[0];if(e.enableScroll&&e.xAxis.scrollShow){var f=e.height-e.area[2]+n.xAxisHeight,p=s-o,g=c*(r.length-1),_=p*p/g,y=0;e._scrollDistance_&&(y=-e._scrollDistance_*p/g),i.beginPath(),i.setLineCap("round"),i.setLineWidth(6*e.pixelRatio),i.setStrokeStyle(e.xAxis.scrollBackgroundColor||"#EFEBEF"),i.moveTo(o,f),i.lineTo(s,f),i.stroke(),i.closePath(),i.beginPath(),i.setLineCap("round"),i.setLineWidth(6*e.pixelRatio),i.setStrokeStyle(e.xAxis.scrollColor||"#A6A6A6"),i.moveTo(o+y,f),i.lineTo(o+y+_,f),i.stroke(),i.closePath(),i.setLineCap("butt")}if(i.save(),e._scrollDistance_&&0!==e._scrollDistance_&&i.translate(e._scrollDistance_,0),!0===e.xAxis.calibration&&(i.setStrokeStyle(e.xAxis.gridColor||"#cccccc"),i.setLineCap("butt"),i.setLineWidth(1*e.pixelRatio),r.forEach((function(t,n){n>0&&(i.beginPath(),i.moveTo(t-c/2,h),i.lineTo(t-c/2,h+3*e.pixelRatio),i.closePath(),i.stroke())}))),!0!==e.xAxis.disableGrid&&(i.setStrokeStyle(e.xAxis.gridColor||"#cccccc"),i.setLineCap("butt"),i.setLineWidth(1*e.pixelRatio),"dash"==e.xAxis.gridType&&i.setLineDash([e.xAxis.dashLength,e.xAxis.dashLength]),e.xAxis.gridEval=e.xAxis.gridEval||1,r.forEach((function(t,n){n%e.xAxis.gridEval==0&&(i.beginPath(),i.moveTo(t,h),i.lineTo(t,d),i.stroke())})),i.setLineDash([])),!0!==e.xAxis.disabled){var m=t.length;e.xAxis.labelCount&&(m=e.xAxis.itemCount?Math.ceil(t.length/e.xAxis.itemCount*e.xAxis.labelCount):e.xAxis.labelCount,m-=1);for(var b=Math.ceil(t.length/m),x=[],w=t.length,S=0;S<w;S++)S%b!==0?x.push(""):x.push(t[S]);x[w-1]=t[w-1];var T=e.xAxis.fontSize||n.fontSize;0===n._xAxisTextAngle_?x.forEach((function(t,a){var o=-v(String(t),T)/2;"center"==l&&(o+=c/2);var s=0;e.xAxis.scrollShow&&(s=6*e.pixelRatio),i.beginPath(),i.setFontSize(T),i.setFillStyle(e.xAxis.fontColor||"#666666"),i.fillText(String(t),r[a]+o,h+T+(n.xAxisHeight-s-T)/2),i.closePath(),i.stroke()})):x.forEach((function(t,a){i.save(),i.beginPath(),i.setFontSize(T),i.setFillStyle(e.xAxis.fontColor||"#666666");var o=v(String(t),T),s=-o;"center"==l&&(s+=c/2);var d=u(r[a]+c/2,h+T/2+5,e.height),f=d.transX,p=d.transY;i.rotate(-1*n._xAxisTextAngle_),i.translate(f,p),i.fillText(String(t),r[a]+s,h+T+5),i.closePath(),i.stroke(),i.restore()}))}i.restore(),e.xAxis.axisLine&&(i.beginPath(),i.setStrokeStyle(e.xAxis.axisLineColor),i.setLineWidth(1*e.pixelRatio),i.moveTo(o,e.height-e.area[2]),i.lineTo(s,e.height-e.area[2]),i.stroke())}function At(t,e,n,i){if(!0!==e.yAxis.disableGrid){for(var a=e.height-e.area[0]-e.area[2],r=a/e.yAxis.splitNumber,o=e.area[3],s=e.chartData.xAxisData.xAxisPoints,c=e.chartData.xAxisData.eachSpacing,l=c*(s.length-1),u=o+l,h=[],d=0;d<e.yAxis.splitNumber+1;d++)h.push(e.height-e.area[2]-r*d);i.save(),e._scrollDistance_&&0!==e._scrollDistance_&&i.translate(e._scrollDistance_,0),"dash"==e.yAxis.gridType&&i.setLineDash([e.yAxis.dashLength,e.yAxis.dashLength]),i.setStrokeStyle(e.yAxis.gridColor),i.setLineWidth(1*e.pixelRatio),h.forEach((function(t,e){i.beginPath(),i.moveTo(o,t),i.lineTo(u,t),i.stroke()})),i.setLineDash([]),i.restore()}}function Pt(t,e,n,i){if(!0!==e.yAxis.disabled){var a=e.height-e.area[0]-e.area[2],r=a/e.yAxis.splitNumber,o=e.area[3],s=e.width-e.area[1],c=e.height-e.area[2],l=c+n.xAxisHeight;e.xAxis.scrollShow&&(l-=3*e.pixelRatio),e.xAxis.rotateLabel&&(l=e.height-e.area[2]+3),i.beginPath(),i.setFillStyle(e.background||"#ffffff"),e._scrollDistance_<0&&i.fillRect(0,0,o,l),1==e.enableScroll&&i.fillRect(s,0,e.width,l),i.closePath(),i.stroke();for(var u=[],h=0;h<=e.yAxis.splitNumber;h++)u.push(e.area[0]+r*h);for(var d=e.area[3],f=e.width-e.area[1],p=function(t){var a=e.yAxis.data[t];if(!0!==a.disabled){var r=e.chartData.yAxisData.rangesFormat[t],o=a.fontSize||n.fontSize,s=e.chartData.yAxisData.yAxisWidth[t];if(r.forEach((function(t,n){var r=u[n]?u[n]:c;i.beginPath(),i.setFontSize(o),i.setLineWidth(1*e.pixelRatio),i.setStrokeStyle(a.axisLineColor||"#cccccc"),i.setFillStyle(a.fontColor||"#666666"),"left"==s.position?(i.fillText(String(t),d-s.width,r+o/2),1==a.calibration&&(i.moveTo(d,r),i.lineTo(d-3*e.pixelRatio,r))):(i.fillText(String(t),f+4*e.pixelRatio,r+o/2),1==a.calibration&&(i.moveTo(f,r),i.lineTo(f+3*e.pixelRatio,r))),i.closePath(),i.stroke()})),!1!==a.axisLine&&(i.beginPath(),i.setStrokeStyle(a.axisLineColor||"#cccccc"),i.setLineWidth(1*e.pixelRatio),"left"==s.position?(i.moveTo(d,e.height-e.area[2]),i.lineTo(d,e.area[0])):(i.moveTo(f,e.height-e.area[2]),i.lineTo(f,e.area[0])),i.stroke()),e.yAxis.showTitle){var l=a.titleFontSize||n.fontSize,h=a.title;i.beginPath(),i.setFontSize(l),i.setFillStyle(a.titleFontColor||"#666666"),"left"==s.position?i.fillText(h,d-v(h,l)/2,e.area[0]-10*e.pixelRatio):i.fillText(h,f-v(h,l)/2,e.area[0]-10*e.pixelRatio),i.closePath(),i.stroke()}"left"==s.position?d-=s.width+e.yAxis.padding:f+=s.width+e.yAxis.padding}},g=0;g<e.yAxis.data.length;g++)p(g)}}function Ot(t,e,n,i,a){if(!1!==e.legend.show){var r=a.legendData,o=r.points,s=r.area,c=e.legend.padding,l=e.legend.fontSize,u=15*e.pixelRatio,h=5*e.pixelRatio,d=e.legend.itemGap,f=Math.max(e.legend.lineHeight*e.pixelRatio,l);i.beginPath(),i.setLineWidth(e.legend.borderWidth),i.setStrokeStyle(e.legend.borderColor),i.setFillStyle(e.legend.backgroundColor),i.moveTo(s.start.x,s.start.y),i.rect(s.start.x,s.start.y,s.width,s.height),i.closePath(),i.fill(),i.stroke(),o.forEach((function(t,a){var o=0,p=0;o=r.widthArr[a],p=r.heightArr[a];var g=0,_=0;"top"==e.legend.position||"bottom"==e.legend.position?(g=s.start.x+(s.width-o)/2,_=s.start.y+c+a*f):(o=0==a?0:r.widthArr[a-1],g=s.start.x+c+o,_=s.start.y+c+(s.height-p)/2),i.setFontSize(n.fontSize);for(var y=0;y<t.length;y++){var m=t[y];switch(m.area=[0,0,0,0],m.area[0]=g,m.area[1]=_,m.area[3]=_+f,i.beginPath(),i.setLineWidth(1*e.pixelRatio),i.setStrokeStyle(m.show?m.color:e.legend.hiddenColor),i.setFillStyle(m.show?m.color:e.legend.hiddenColor),m.legendShape){case"line":i.moveTo(g,_+.5*f-2*e.pixelRatio),i.fillRect(g,_+.5*f-2*e.pixelRatio,15*e.pixelRatio,4*e.pixelRatio);break;case"triangle":i.moveTo(g+7.5*e.pixelRatio,_+.5*f-5*e.pixelRatio),i.lineTo(g+2.5*e.pixelRatio,_+.5*f+5*e.pixelRatio),i.lineTo(g+12.5*e.pixelRatio,_+.5*f+5*e.pixelRatio),i.lineTo(g+7.5*e.pixelRatio,_+.5*f-5*e.pixelRatio);break;case"diamond":i.moveTo(g+7.5*e.pixelRatio,_+.5*f-5*e.pixelRatio),i.lineTo(g+2.5*e.pixelRatio,_+.5*f),i.lineTo(g+7.5*e.pixelRatio,_+.5*f+5*e.pixelRatio),i.lineTo(g+12.5*e.pixelRatio,_+.5*f),i.lineTo(g+7.5*e.pixelRatio,_+.5*f-5*e.pixelRatio);break;case"circle":i.moveTo(g+7.5*e.pixelRatio,_+.5*f),i.arc(g+7.5*e.pixelRatio,_+.5*f,5*e.pixelRatio,0,2*Math.PI);break;case"rect":i.moveTo(g,_+.5*f-5*e.pixelRatio),i.fillRect(g,_+.5*f-5*e.pixelRatio,15*e.pixelRatio,10*e.pixelRatio);break;default:i.moveTo(g,_+.5*f-5*e.pixelRatio),i.fillRect(g,_+.5*f-5*e.pixelRatio,15*e.pixelRatio,10*e.pixelRatio)}i.closePath(),i.fill(),i.stroke(),g+=u+h;var b=.5*f+.5*l-2;i.beginPath(),i.setFontSize(l),i.setFillStyle(m.show?e.legend.fontColor:e.legend.hiddenColor),i.fillText(m.name,g,_+b),i.closePath(),i.stroke(),"top"==e.legend.position||"bottom"==e.legend.position?(g+=v(m.name,l)+d,m.area[2]=g):(m.area[2]=g+v(m.name,l)+d,g-=u+h,_+=f)}}))}}function Ct(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=i({},{activeOpacity:.5,activeRadius:10*e.pixelRatio,offsetAngle:0,labelWidth:15*e.pixelRatio,ringWidth:0,border:!1,borderWidth:2,borderColor:"#FFFFFF"},e.extra.pie),c={x:e.area[3]+(e.width-e.area[1]-e.area[3])/2,y:e.area[0]+(e.height-e.area[0]-e.area[2])/2};0==n.pieChartLinePadding&&(n.pieChartLinePadding=s.activeRadius);var l=Math.min((e.width-e.area[1]-e.area[3])/2-n.pieChartLinePadding-n.pieChartTextPadding-n._pieTextMaxLength_,(e.height-e.area[0]-e.area[2])/2-n.pieChartLinePadding-n.pieChartTextPadding);t=B(t,l,o);var u=s.activeRadius;if(t=t.map((function(t){return t._start_+=s.offsetAngle*Math.PI/180,t})),t.forEach((function(t,n){e.tooltip&&e.tooltip.index==n&&(a.beginPath(),a.setFillStyle(r(t.color,e.extra.pie.activeOpacity||.5)),a.moveTo(c.x,c.y),a.arc(c.x,c.y,t._radius_+u,t._start_,t._start_+2*t._proportion_*Math.PI),a.closePath(),a.fill()),a.beginPath(),a.setLineWidth(s.borderWidth*e.pixelRatio),a.lineJoin="round",a.setStrokeStyle(s.borderColor),a.setFillStyle(t.color),a.moveTo(c.x,c.y),a.arc(c.x,c.y,t._radius_,t._start_,t._start_+2*t._proportion_*Math.PI),a.closePath(),a.fill(),1==s.border&&a.stroke()})),"ring"===e.type){var h=.6*l;"number"===typeof e.extra.pie.ringWidth&&e.extra.pie.ringWidth>0&&(h=Math.max(0,l-e.extra.pie.ringWidth)),a.beginPath(),a.setFillStyle(e.background||"#ffffff"),a.moveTo(c.x,c.y),a.arc(c.x,c.y,h,0,2*Math.PI),a.closePath(),a.fill()}if(!1!==e.dataLabel&&1===o){for(var d=!1,f=0,p=t.length;f<p;f++)if(t[f].data>0){d=!0;break}d&&ft(t,e,n,a,l,c)}return 1===o&&"ring"===e.type&&lt(e,n,a,c),{center:c,radius:l,series:t}}function $t(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=i({},{type:"area",activeOpacity:.5,activeRadius:10*e.pixelRatio,offsetAngle:0,labelWidth:15*e.pixelRatio,border:!1,borderWidth:2,borderColor:"#FFFFFF"},e.extra.rose);0==n.pieChartLinePadding&&(n.pieChartLinePadding=s.activeRadius);var c={x:e.area[3]+(e.width-e.area[1]-e.area[3])/2,y:e.area[0]+(e.height-e.area[0]-e.area[2])/2},l=Math.min((e.width-e.area[1]-e.area[3])/2-n.pieChartLinePadding-n.pieChartTextPadding-n._pieTextMaxLength_,(e.height-e.area[0]-e.area[2])/2-n.pieChartLinePadding-n.pieChartTextPadding),u=s.minRadius||.5*l;t=H(t,s.type,u,l,o);var h=s.activeRadius;if(t=t.map((function(t){return t._start_+=(s.offsetAngle||0)*Math.PI/180,t})),t.forEach((function(t,n){e.tooltip&&e.tooltip.index==n&&(a.beginPath(),a.setFillStyle(r(t.color,s.activeOpacity||.5)),a.moveTo(c.x,c.y),a.arc(c.x,c.y,h+t._radius_,t._start_,t._start_+2*t._rose_proportion_*Math.PI),a.closePath(),a.fill()),a.beginPath(),a.setLineWidth(s.borderWidth*e.pixelRatio),a.lineJoin="round",a.setStrokeStyle(s.borderColor),a.setFillStyle(t.color),a.moveTo(c.x,c.y),a.arc(c.x,c.y,t._radius_,t._start_,t._start_+2*t._rose_proportion_*Math.PI),a.closePath(),a.fill(),1==s.border&&a.stroke()})),!1!==e.dataLabel&&1===o){for(var d=!1,f=0,p=t.length;f<p;f++)if(t[f].data>0){d=!0;break}d&&ft(t,e,n,a,l,c)}return{center:c,radius:l,series:t}}function Dt(t,e,n,a){var r,o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=i({},{startAngle:.75,endAngle:.25,type:"default",width:12*e.pixelRatio,gap:2*e.pixelRatio},e.extra.arcbar);t=G(t,c,s),r=c.center?c.center:{x:e.width/2,y:e.height/2},c.radius?o=c.radius:(o=Math.min(r.x,r.y),o-=5*e.pixelRatio,o-=c.width/2);for(var l=0;l<t.length;l++){var u=t[l];a.setLineWidth(c.width),a.setStrokeStyle(c.backgroundColor||"#E9E9E9"),a.setLineCap("round"),a.beginPath(),"default"==c.type?a.arc(r.x,r.y,o-(c.width+c.gap)*l,c.startAngle*Math.PI,c.endAngle*Math.PI,!1):a.arc(r.x,r.y,o-(c.width+c.gap)*l,0,2*Math.PI,!1),a.stroke(),a.setLineWidth(c.width),a.setStrokeStyle(u.color),a.setLineCap("round"),a.beginPath(),a.arc(r.x,r.y,o-(c.width+c.gap)*l,c.startAngle*Math.PI,u._proportion_*Math.PI,!1),a.stroke()}return lt(e,n,a,r),{center:r,radius:o,series:t}}function It(t,e,n,a,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=i({},{type:"default",startAngle:.75,endAngle:.25,width:15,splitLine:{fixRadius:0,splitNumber:10,width:15,color:"#FFFFFF",childNumber:5,childWidth:5},pointer:{width:15,color:"auto"}},n.extra.gauge);void 0==c.oldAngle&&(c.oldAngle=c.startAngle),void 0==c.oldData&&(c.oldData=0),t=K(t,c.startAngle,c.endAngle);var l={x:n.width/2,y:n.height/2},u=Math.min(l.x,l.y);u-=5*n.pixelRatio,u-=c.width/2;var h=u-c.width,d=0;if("progress"==c.type){var f=u-3*c.width;o.beginPath();var p=o.createLinearGradient(l.x,l.y-f,l.x,l.y+f);p.addColorStop("0",r(e[0].color,.3)),p.addColorStop("1.0",r("#FFFFFF",.1)),o.setFillStyle(p),o.arc(l.x,l.y,f,0,2*Math.PI,!1),o.fill(),o.setLineWidth(c.width),o.setStrokeStyle(r(e[0].color,.3)),o.setLineCap("round"),o.beginPath(),o.arc(l.x,l.y,h,c.startAngle*Math.PI,c.endAngle*Math.PI,!1),o.stroke(),d=c.startAngle-c.endAngle+1;c.splitLine.splitNumber;var g=d/c.splitLine.splitNumber/c.splitLine.childNumber,v=-u-.5*c.width-c.splitLine.fixRadius,_=-u-c.width-c.splitLine.fixRadius+c.splitLine.width;o.save(),o.translate(l.x,l.y),o.rotate((c.startAngle-1)*Math.PI);for(var y=c.splitLine.splitNumber*c.splitLine.childNumber+1,m=e[0].data*s,b=0;b<y;b++)o.beginPath(),m>b/y?o.setStrokeStyle(r(e[0].color,1)):o.setStrokeStyle(r(e[0].color,.3)),o.setLineWidth(3*n.pixelRatio),o.moveTo(v,0),o.lineTo(_,0),o.stroke(),o.rotate(g*Math.PI);o.restore(),e=G(e,c,s),o.setLineWidth(c.width),o.setStrokeStyle(e[0].color),o.setLineCap("round"),o.beginPath(),o.arc(l.x,l.y,h,c.startAngle*Math.PI,e[0]._proportion_*Math.PI,!1),o.stroke();var x=u-2.5*c.width;o.save(),o.translate(l.x,l.y),o.rotate((e[0]._proportion_-1)*Math.PI),o.beginPath(),o.setLineWidth(c.width/3);var w=o.createLinearGradient(0,.6*-x,0,.6*x);w.addColorStop("0",r("#FFFFFF",0)),w.addColorStop("0.5",r(e[0].color,1)),w.addColorStop("1.0",r("#FFFFFF",0)),o.setStrokeStyle(w),o.arc(0,0,x,.85*Math.PI,1.15*Math.PI,!1),o.stroke(),o.beginPath(),o.setLineWidth(1),o.setStrokeStyle(e[0].color),o.setFillStyle(e[0].color),o.moveTo(-x-c.width/3/2,-4),o.lineTo(-x-c.width/3/2-4,0),o.lineTo(-x-c.width/3/2,4),o.lineTo(-x-c.width/3/2,-4),o.stroke(),o.fill(),o.restore()}else{o.setLineWidth(c.width),o.setLineCap("butt");for(var S=0;S<t.length;S++){var T=t[S];o.beginPath(),o.setStrokeStyle(T.color),o.arc(l.x,l.y,u,T._startAngle_*Math.PI,T._endAngle_*Math.PI,!1),o.stroke()}o.save(),d=c.startAngle-c.endAngle+1;var k=d/c.splitLine.splitNumber,A=d/c.splitLine.splitNumber/c.splitLine.childNumber,P=-u-.5*c.width-c.splitLine.fixRadius,O=-u-.5*c.width-c.splitLine.fixRadius+c.splitLine.width,C=-u-.5*c.width-c.splitLine.fixRadius+c.splitLine.childWidth;o.translate(l.x,l.y),o.rotate((c.startAngle-1)*Math.PI);for(var $=0;$<c.splitLine.splitNumber+1;$++)o.beginPath(),o.setStrokeStyle(c.splitLine.color),o.setLineWidth(2*n.pixelRatio),o.moveTo(P,0),o.lineTo(O,0),o.stroke(),o.rotate(k*Math.PI);o.restore(),o.save(),o.translate(l.x,l.y),o.rotate((c.startAngle-1)*Math.PI);for(var D=0;D<c.splitLine.splitNumber*c.splitLine.childNumber+1;D++)o.beginPath(),o.setStrokeStyle(c.splitLine.color),o.setLineWidth(1*n.pixelRatio),o.moveTo(P,0),o.lineTo(C,0),o.stroke(),o.rotate(A*Math.PI);o.restore(),e=V(e,t,c,s);for(var I=0;I<e.length;I++){var M=e[I];o.save(),o.translate(l.x,l.y),o.rotate((M._proportion_-1)*Math.PI),o.beginPath(),o.setFillStyle(M.color),o.moveTo(c.pointer.width,0),o.lineTo(0,-c.pointer.width/2),o.lineTo(-h,0),o.lineTo(0,c.pointer.width/2),o.lineTo(c.pointer.width,0),o.closePath(),o.fill(),o.beginPath(),o.setFillStyle("#FFFFFF"),o.arc(0,0,c.pointer.width/6,0,2*Math.PI,!1),o.fill(),o.restore()}!1!==n.dataLabel&&ht(c,u,l,n,a,o)}return lt(n,a,o,l),1===s&&"gauge"===n.type&&(n.extra.gauge.oldAngle=e[0]._proportion_,n.extra.gauge.oldData=e[0].data),{center:l,radius:u,innerRadius:h,categories:t,totalAngle:d}}function Mt(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=i({},{gridColor:"#cccccc",labelColor:"#666666",opacity:.2,gridCount:3},e.extra.radar),c=w(e.categories.length),l={x:e.area[3]+(e.width-e.area[1]-e.area[3])/2,y:e.area[0]+(e.height-e.area[0]-e.area[2])/2},u=Math.min(l.x-(x(e.categories)+n.radarLabelTextMargin),l.y-n.radarLabelTextMargin);u-=e.padding[1],a.beginPath(),a.setLineWidth(1*e.pixelRatio),a.setStrokeStyle(s.gridColor),c.forEach((function(t){var e=d(u*Math.cos(t),u*Math.sin(t),l);a.moveTo(l.x,l.y),a.lineTo(e.x,e.y)})),a.stroke(),a.closePath();for(var h=function(t){var n={};a.beginPath(),a.setLineWidth(1*e.pixelRatio),a.setStrokeStyle(s.gridColor),c.forEach((function(e,i){var r=d(u/s.gridCount*t*Math.cos(e),u/s.gridCount*t*Math.sin(e),l);0===i?(n=r,a.moveTo(r.x,r.y)):a.lineTo(r.x,r.y)})),a.lineTo(n.x,n.y),a.stroke(),a.closePath()},f=1;f<=s.gridCount;f++)h(f);var p=U(c,l,u,t,e,o);return p.forEach((function(t,n){if(a.beginPath(),a.setFillStyle(r(t.color,s.opacity)),t.data.forEach((function(t,e){0===e?a.moveTo(t.position.x,t.position.y):a.lineTo(t.position.x,t.position.y)})),a.closePath(),a.fill(),!1!==e.dataPointShape){var i=t.data.map((function(t){return t.position}));ct(i,t.color,t.pointShape,a,e)}})),dt(c,u,l,e,n,a),{center:l,radius:u,angleList:c}}function jt(t,e,n){n=0==n?1:n;for(var i=[],a=0;a<n;a++)i[a]=Math.random();return Math.floor(i.reduce((function(t,e){return t+e}))/n*(e-t))+t}function Et(t,e,n,i){for(var a=!1,r=0;r<e.length;r++)if(e[r].area){if(!(t[3]<e[r].area[1]||t[0]>e[r].area[2]||t[1]>e[r].area[3]||t[2]<e[r].area[0])){a=!0;break}if(t[0]<0||t[1]<0||t[2]>n||t[3]>i){a=!0;break}a=!1}return a}function Lt(t){var e,n={};n.xMin=180,n.xMax=0,n.yMin=90,n.yMax=0;for(var i=0;i<t.length;i++)for(var a=t[i].geometry.coordinates,r=0;r<a.length;r++){e=a[r],1==e.length&&(e=e[0]);for(var o=0;o<e.length;o++){var s=e[o][0],c=e[o][1],l={x:s,y:c};n.xMin=n.xMin<l.x?n.xMin:l.x,n.xMax=n.xMax>l.x?n.xMax:l.x,n.yMin=n.yMin<l.y?n.yMin:l.y,n.yMax=n.yMax>l.y?n.yMax:l.y}}return n}function Rt(t,e,n,i,a,r){return{x:(e-n.xMin)*i+a,y:(n.yMax-t)*i+r}}function Nt(t,e,n,i,a,r){return{x:(e-a)/i+n.xMin,y:n.yMax-(t-r)/i}}function Ft(t,e,n){if(e[1]==n[1])return!1;if(e[1]>t[1]&&n[1]>t[1])return!1;if(e[1]<t[1]&&n[1]<t[1])return!1;if(e[1]==t[1]&&n[1]>t[1])return!1;if(n[1]==t[1]&&e[1]>t[1])return!1;if(e[0]<t[0]&&n[1]<t[1])return!1;var i=n[0]-(n[0]-e[0])*(n[1]-t[1])/(n[1]-e[1]);return!(i<t[0])}function zt(t,e){for(var n=0,i=0;i<e.length;i++){var a=e[i][0];1==e.length&&(a=e[i][0]);for(var r=0;r<a.length-1;r++){var o=a[r],s=a[r+1];Ft(t,o,s)&&(n+=1)}}return n%2==1}function qt(t,e,n,a){var o,s,c=i({},{border:!0,borderWidth:1,borderColor:"#666666",fillOpacity:.6,activeBorderColor:"#f04864",activeFillColor:"#facc14",activeFillOpacity:1},e.extra.map),l=t,u=Lt(l),h=e.width/Math.abs(u.xMax-u.xMin),d=e.height/Math.abs(u.yMax-u.yMin),f=h<d?h:d,p=e.width/2-Math.abs(u.xMax-u.xMin)/2*f,g=e.height/2-Math.abs(u.yMax-u.yMin)/2*f;a.beginPath(),a.clearRect(0,0,e.width,e.height),a.setFillStyle(e.background||"#FFFFFF"),a.rect(0,0,e.width,e.height),a.fill();for(var _=0;_<l.length;_++){a.beginPath(),a.setLineWidth(c.borderWidth*e.pixelRatio),a.setStrokeStyle(c.borderColor),a.setFillStyle(r(t[_].color,c.fillOpacity)),e.tooltip&&e.tooltip.index==_&&(a.setStrokeStyle(c.activeBorderColor),a.setFillStyle(r(c.activeFillColor,c.activeFillOpacity)));for(var y=l[_].geometry.coordinates,m=0;m<y.length;m++){o=y[m],1==o.length&&(o=o[0]);for(var b=0;b<o.length;b++)s=Rt(o[b][1],o[b][0],u,f,p,g),0===b?(a.beginPath(),a.moveTo(s.x,s.y)):a.lineTo(s.x,s.y);a.fill(),1==c.border&&a.stroke()}if(1==e.dataLabel){var x=l[_].properties.centroid;if(x){s=Rt(x[1],x[0],u,f,p,g);var w=l[_].textSize||n.fontSize,S=l[_].properties.name;a.beginPath(),a.setFontSize(w),a.setFillStyle(l[_].textColor||"#666666"),a.fillText(S,s.x-v(S,w)/2,s.y+w/2),a.closePath(),a.stroke()}}}e.chartData.mapData={bounds:u,scale:f,xoffset:p,yoffset:g},Tt(e,n,a,1),a.draw()}function Ut(t,e){var n=t.series.sort((function(t,e){return parseInt(e.textSize)-parseInt(t.textSize)}));switch(e){case"normal":for(var i=0;i<n.length;i++){var a=n[i].name,r=n[i].textSize,o=v(a,r),s=void 0,c=void 0,l=void 0,u=0;while(1){u++,s=jt(-t.width/2,t.width/2,5)-o/2,c=jt(-t.height/2,t.height/2,5)+r/2,l=[s-5+t.width/2,c-5-r+t.height/2,s+o+5+t.width/2,c+5+t.height/2];var h=Et(l,n,t.width,t.height);if(!h)break;if(1e3==u){l=[-100,-100,-100,-100];break}}n[i].area=l}break;case"vertical":for(var d=function(){return Math.random()>.7},f=0;f<n.length;f++){var p=n[f].name,g=n[f].textSize,_=v(p,g),y=d(),m=void 0,b=void 0,x=void 0,w=void 0,S=0;while(1){S++;var T=void 0;if(y?(m=jt(-t.width/2,t.width/2,5)-_/2,b=jt(-t.height/2,t.height/2,5)+g/2,x=[b-5-_+t.width/2,-m-5+t.height/2,b+5+t.width/2,-m+g+5+t.height/2],w=[t.width-(t.width/2-t.height/2)-(-m+g+5+t.height/2)-5,t.height/2-t.width/2+(b-5-_+t.width/2)-5,t.width-(t.width/2-t.height/2)-(-m+g+5+t.height/2)+g,t.height/2-t.width/2+(b-5-_+t.width/2)+_+5],T=Et(w,n,t.height,t.width)):(m=jt(-t.width/2,t.width/2,5)-_/2,b=jt(-t.height/2,t.height/2,5)+g/2,x=[m-5+t.width/2,b-5-g+t.height/2,m+_+5+t.width/2,b+5+t.height/2],T=Et(x,n,t.width,t.height)),!T)break;if(1e3==S){x=[-1e3,-1e3,-1e3,-1e3];break}}y?(n[f].area=w,n[f].areav=x):n[f].area=x,n[f].rotate=y}break}return n}function Bt(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;i({},{type:"normal",autoColors:!0},e.extra.word);a.beginPath(),a.setFillStyle(e.background||"#FFFFFF"),a.rect(0,0,e.width,e.height),a.fill(),a.save();var o=e.chartData.wordCloudData;a.translate(e.width/2,e.height/2);for(var s=0;s<o.length;s++){a.save(),o[s].rotate&&a.rotate(90*Math.PI/180);var c=o[s].name,l=o[s].textSize,u=v(c,l);a.beginPath(),a.setStrokeStyle(o[s].color),a.setFillStyle(o[s].color),a.setFontSize(l),o[s].rotate?o[s].areav[0]>0&&(e.tooltip&&e.tooltip.index==s?a.strokeText(c,(o[s].areav[0]+5-e.width/2)*r-u*(1-r)/2,(o[s].areav[1]+5+l-e.height/2)*r):a.fillText(c,(o[s].areav[0]+5-e.width/2)*r-u*(1-r)/2,(o[s].areav[1]+5+l-e.height/2)*r)):o[s].area[0]>0&&(e.tooltip&&e.tooltip.index==s?a.strokeText(c,(o[s].area[0]+5-e.width/2)*r-u*(1-r)/2,(o[s].area[1]+5+l-e.height/2)*r):a.fillText(c,(o[s].area[0]+5-e.width/2)*r-u*(1-r)/2,(o[s].area[1]+5+l-e.height/2)*r)),a.stroke(),a.restore()}a.restore()}function Wt(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=i({},{activeWidth:10,activeOpacity:.3,border:!1,borderWidth:2,borderColor:"#FFFFFF",fillOpacity:1,labelAlign:"right"},e.extra.funnel),c=(e.height-e.area[0]-e.area[2])/t.length,l={x:e.area[3]+(e.width-e.area[1]-e.area[3])/2,y:e.height-e.area[2]},u=s.activeWidth,h=Math.min((e.width-e.area[1]-e.area[3])/2-u,(e.height-e.area[0]-e.area[2])/2-u);t=W(t,h,o),a.save(),a.translate(l.x,l.y);for(var d=0;d<t.length;d++)0==d?(e.tooltip&&e.tooltip.index==d&&(a.beginPath(),a.setFillStyle(r(t[d].color,s.activeOpacity)),a.moveTo(-u,0),a.lineTo(-t[d].radius-u,-c),a.lineTo(t[d].radius+u,-c),a.lineTo(u,0),a.lineTo(-u,0),a.closePath(),a.fill()),t[d].funnelArea=[l.x-t[d].radius,l.y-c,l.x+t[d].radius,l.y],a.beginPath(),a.setLineWidth(s.borderWidth*e.pixelRatio),a.setStrokeStyle(s.borderColor),a.setFillStyle(r(t[d].color,s.fillOpacity)),a.moveTo(0,0),a.lineTo(-t[d].radius,-c),a.lineTo(t[d].radius,-c),a.lineTo(0,0),a.closePath(),a.fill(),1==s.border&&a.stroke()):(e.tooltip&&e.tooltip.index==d&&(a.beginPath(),a.setFillStyle(r(t[d].color,s.activeOpacity)),a.moveTo(0,0),a.lineTo(-t[d-1].radius-u,0),a.lineTo(-t[d].radius-u,-c),a.lineTo(t[d].radius+u,-c),a.lineTo(t[d-1].radius+u,0),a.lineTo(0,0),a.closePath(),a.fill()),t[d].funnelArea=[l.x-t[d].radius,l.y-c*(d+1),l.x+t[d].radius,l.y-c*d],a.beginPath(),a.setLineWidth(s.borderWidth*e.pixelRatio),a.setStrokeStyle(s.borderColor),a.setFillStyle(r(t[d].color,s.fillOpacity)),a.moveTo(0,0),a.lineTo(-t[d-1].radius,0),a.lineTo(-t[d].radius,-c),a.lineTo(t[d].radius,-c),a.lineTo(t[d-1].radius,0),a.lineTo(0,0),a.closePath(),a.fill(),1==s.border&&a.stroke()),a.translate(0,-c);return a.restore(),!1!==e.dataLabel&&1===o&&Ht(t,e,a,c,s.labelAlign,u,l),{center:l,radius:h,series:t}}function Ht(t,e,n,i,r,o,s){for(var c=0;c<t.length;c++){var l=t[c],u=void 0,h=void 0,d=void 0,f=void 0,p=l.format?l.format(+l._proportion_.toFixed(2)):a.toFixed(100*l._proportion_)+"%";"right"==r?(u=0==c?(l.funnelArea[2]+s.x)/2:(l.funnelArea[2]+t[c-1].funnelArea[2])/2,h=u+2*o,d=l.funnelArea[1]+i/2,f=l.textSize||e.fontSize,n.setLineWidth(1*e.pixelRatio),n.setStrokeStyle(l.color),n.setFillStyle(l.color),n.beginPath(),n.moveTo(u,d),n.lineTo(h,d),n.stroke(),n.closePath(),n.beginPath(),n.moveTo(h,d),n.arc(h,d,2,0,2*Math.PI),n.closePath(),n.fill(),n.beginPath(),n.setFontSize(f),n.setFillStyle(l.textColor||"#666666"),n.fillText(p,h+5,d+f/2-2),n.closePath(),n.stroke(),n.closePath()):(u=0==c?(l.funnelArea[0]+s.x)/2:(l.funnelArea[0]+t[c-1].funnelArea[0])/2,h=u-2*o,d=l.funnelArea[1]+i/2,f=l.textSize||e.fontSize,n.setLineWidth(1*e.pixelRatio),n.setStrokeStyle(l.color),n.setFillStyle(l.color),n.beginPath(),n.moveTo(u,d),n.lineTo(h,d),n.stroke(),n.closePath(),n.beginPath(),n.moveTo(h,d),n.arc(h,d,2,0,2*Math.PI),n.closePath(),n.fill(),n.beginPath(),n.setFontSize(f),n.setFillStyle(l.textColor||"#666666"),n.fillText(p,h-5-v(p),d+f/2-2),n.closePath(),n.stroke(),n.closePath())}}function Gt(t,e){e.draw()}var Kt={easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},linear:function(t){return t}};function Vt(t){this.isStop=!1,t.duration="undefined"===typeof t.duration?1e3:t.duration,t.timing=t.timing||"linear";var e=17;function n(){return"undefined"!==typeof setTimeout?function(t,e){setTimeout((function(){var e=+new Date;t(e)}),e)}:"undefined"!==typeof requestAnimationFrame?requestAnimationFrame:function(t){t(null)}}var i=n(),a=null,r=function(n){if(null===n||!0===this.isStop)return t.onProcess&&t.onProcess(1),void(t.onAnimationFinish&&t.onAnimationFinish());if(null===a&&(a=n),n-a<t.duration){var o=(n-a)/t.duration,s=Kt[t.timing];o=s(o),t.onProcess&&t.onProcess(o),i(r,e)}else t.onProcess&&t.onProcess(1),t.onAnimationFinish&&t.onAnimationFinish()};r=r.bind(this),i(r,e)}function Yt(t,e,n,a){var r=this,o=e.series,c=e.categories;o=p(o,e,n);var l=e.animation?e.duration:0;r.animationInstance&&r.animationInstance.stop();var u=null;if("candle"==t){var h=i({},e.extra.candle.average);h.show?(u=s(h.day,h.name,h.color,o[0].data),u=p(u,e,n),e.seriesMA=u):u=e.seriesMA?e.seriesMA=p(e.seriesMA,e,n):o}else u=o;e._series_=o=A(o),e.area=new Array(4);for(var d=0;d<4;d++)e.area[d]=e.padding[d];var f=N(u,e,n,e.chartData),g=f.area.wholeHeight,v=f.area.wholeWidth;switch(e.legend.position){case"top":e.area[0]+=g;break;case"bottom":e.area[2]+=g;break;case"left":e.area[3]+=v;break;case"right":e.area[1]+=v;break}var _={},y=0;if("line"===e.type||"column"===e.type||"area"===e.type||"mix"===e.type||"candle"===e.type){if(_=at(o,e,n),y=_.yAxisWidth,e.yAxis.showTitle){for(var m=0,b=0;b<e.yAxis.data.length;b++)m=Math.max(m,e.yAxis.data[b].titleFontSize?e.yAxis.data[b].titleFontSize:n.fontSize);e.area[0]+=(m+6)*e.pixelRatio}for(var x=0,w=0,S=0;S<y.length;S++)"left"==y[S].position?(e.area[3]+=w>0?y[S].width+e.yAxis.padding:y[S].width,w+=1):(e.area[1]+=x>0?y[S].width+e.yAxis.padding:y[S].width,x+=1)}else n.yAxisWidth=y;if(e.chartData.yAxisData=_,e.categories&&e.categories.length){e.chartData.xAxisData=Z(e.categories,e,n);var T=F(e.categories,e,n,e.chartData.xAxisData.eachSpacing),k=T.xAxisHeight,P=T.angle;n.xAxisHeight=k,n._xAxisTextAngle_=P,e.area[2]+=k,e.chartData.categoriesData=T}else if("line"===e.type||"area"===e.type||"points"===e.type){e.chartData.xAxisData=q(o,e,n),c=e.chartData.xAxisData.rangesFormat;var O=F(c,e,n,e.chartData.xAxisData.eachSpacing),C=O.xAxisHeight,$=O.angle;n.xAxisHeight=C,n._xAxisTextAngle_=$,e.area[2]+=C,e.chartData.categoriesData=O}else e.chartData.xAxisData={xAxisPoints:[]};if(e.enableScroll&&"right"==e.xAxis.scrollAlign&&void 0===e._scrollDistance_){var D=0,I=e.chartData.xAxisData.xAxisPoints,M=e.chartData.xAxisData.startX,j=e.chartData.xAxisData.endX,E=e.chartData.xAxisData.eachSpacing,L=E*(I.length-1),R=j-M;D=R-L,r.scrollOption={currentOffset:D,startTouchX:D,distance:0,lastMoveTime:0},e._scrollDistance_=D}switch("pie"!==t&&"ring"!==t&&"rose"!==t||(n._pieTextMaxLength_=!1===e.dataLabel?0:Y(u)),t){case"word":var z=i({},{type:"normal",autoColors:!0},e.extra.word);1!=e.updateData&&void 0!=e.updateData||(e.chartData.wordCloudData=Ut(e,z.type)),this.animationInstance=new Vt({timing:"easeInOut",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),Bt(o,e,n,a,t),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break;case"map":a.clearRect(0,0,e.width,e.height),qt(o,e,n,a);break;case"funnel":this.animationInstance=new Vt({timing:"easeInOut",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),e.chartData.funnelData=Wt(o,e,n,a,t),Ot(e.series,e,n,a,e.chartData),Tt(e,n,a,t),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break;case"line":this.animationInstance=new Vt({timing:"easeIn",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),At(c,e,n,a),kt(c,e,n,a);var i=wt(o,e,n,a,t),r=i.xAxisPoints,s=i.calPoints,l=i.eachSpacing;e.chartData.xAxisPoints=r,e.chartData.calPoints=s,e.chartData.eachSpacing=l,Pt(o,e,n,a),!1!==e.enableMarkLine&&1===t&&gt(e,n,a),Ot(e.series,e,n,a,e.chartData),Tt(e,n,a,t,l,r),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break;case"mix":this.animationInstance=new Vt({timing:"easeIn",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),At(c,e,n,a),kt(c,e,n,a);var i=St(o,e,n,a,t),r=i.xAxisPoints,s=i.calPoints,l=i.eachSpacing;e.chartData.xAxisPoints=r,e.chartData.calPoints=s,e.chartData.eachSpacing=l,Pt(o,e,n,a),!1!==e.enableMarkLine&&1===t&&gt(e,n,a),Ot(e.series,e,n,a,e.chartData),Tt(e,n,a,t,l,r),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break;case"column":this.animationInstance=new Vt({timing:"easeIn",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),At(c,e,n,a),kt(c,e,n,a);var i=mt(o,e,n,a,t),r=i.xAxisPoints,s=i.calPoints,l=i.eachSpacing;e.chartData.xAxisPoints=r,e.chartData.calPoints=s,e.chartData.eachSpacing=l,Pt(o,e,n,a),!1!==e.enableMarkLine&&1===t&&gt(e,n,a),Ot(e.series,e,n,a,e.chartData),Tt(e,n,a,t,l,r),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break;case"area":this.animationInstance=new Vt({timing:"easeIn",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),At(c,e,n,a),kt(c,e,n,a);var i=xt(o,e,n,a,t),r=i.xAxisPoints,s=i.calPoints,l=i.eachSpacing;e.chartData.xAxisPoints=r,e.chartData.calPoints=s,e.chartData.eachSpacing=l,Pt(o,e,n,a),!1!==e.enableMarkLine&&1===t&&gt(e,n,a),Ot(e.series,e,n,a,e.chartData),Tt(e,n,a,t,l,r),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break;case"ring":case"pie":this.animationInstance=new Vt({timing:"easeInOut",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),e.chartData.pieData=Ct(o,e,n,a,t),Ot(e.series,e,n,a,e.chartData),Tt(e,n,a,t),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break;case"rose":this.animationInstance=new Vt({timing:"easeInOut",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),e.chartData.pieData=$t(o,e,n,a,t),Ot(e.series,e,n,a,e.chartData),Tt(e,n,a,t),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break;case"radar":this.animationInstance=new Vt({timing:"easeInOut",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),e.chartData.radarData=Mt(o,e,n,a,t),Ot(e.series,e,n,a,e.chartData),Tt(e,n,a,t),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break;case"arcbar":this.animationInstance=new Vt({timing:"easeInOut",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),e.chartData.arcbarData=Dt(o,e,n,a,t),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break;case"gauge":this.animationInstance=new Vt({timing:"easeInOut",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),e.chartData.gaugeData=It(c,o,e,n,a,t),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break;case"candle":this.animationInstance=new Vt({timing:"easeIn",duration:l,onProcess:function(t){a.clearRect(0,0,e.width,e.height),e.rotate&&st(a,e),At(c,e,n,a),kt(c,e,n,a);var i=bt(o,u,e,n,a,t),r=i.xAxisPoints,s=i.calPoints,l=i.eachSpacing;e.chartData.xAxisPoints=r,e.chartData.calPoints=s,e.chartData.eachSpacing=l,Pt(o,e,n,a),!1!==e.enableMarkLine&&1===t&&gt(e,n,a),Ot(u||e.series,e,n,a,e.chartData),Tt(e,n,a,t,l,r),Gt(e,a)},onAnimationFinish:function(){r.event.trigger("renderComplete")}});break}}function Jt(){this.events={}}Vt.prototype.stop=function(){this.isStop=!0},Jt.prototype.addEventListener=function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},Jt.prototype.trigger=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=n[0],r=n.slice(1);this.events[a]&&this.events[a].forEach((function(t){try{t.apply(null,r)}catch(n){e("error",n," at plugins\\stan-ucharts\\u-charts\\u-charts.js:5091")}}))};var Xt=function(t){t.pixelRatio=t.pixelRatio?t.pixelRatio:1,t.fontSize=t.fontSize?t.fontSize*t.pixelRatio:13*t.pixelRatio,t.title=i({},t.title),t.subtitle=i({},t.subtitle),t.duration=t.duration?t.duration:1e3,t.yAxis=i({},{data:[],showTitle:!1,disabled:!1,disableGrid:!1,splitNumber:5,gridType:"solid",dashLength:4*t.pixelRatio,gridColor:"#cccccc",padding:10,fontColor:"#666666"},t.yAxis),t.yAxis.dashLength*=t.pixelRatio,t.yAxis.padding*=t.pixelRatio,t.xAxis=i({},{rotateLabel:!1,type:"calibration",gridType:"solid",dashLength:4,scrollAlign:"left",boundaryGap:"center",axisLine:!0,axisLineColor:"#cccccc"},t.xAxis),t.xAxis.dashLength*=t.pixelRatio,t.legend=i({},{show:!0,position:"bottom",float:"center",backgroundColor:"rgba(0,0,0,0)",borderColor:"rgba(0,0,0,0)",borderWidth:0,padding:5,margin:5,itemGap:10,fontSize:t.fontSize,lineHeight:t.fontSize,fontColor:"#333333",format:{},hiddenColor:"#CECECE"},t.legend),t.legend.borderWidth=t.legend.borderWidth*t.pixelRatio,t.legend.itemGap=t.legend.itemGap*t.pixelRatio,t.legend.padding=t.legend.padding*t.pixelRatio,t.legend.margin=t.legend.margin*t.pixelRatio,t.extra=i({},t.extra),t.rotate=!!t.rotate,t.animation=!!t.animation,t.rotate=!!t.rotate;var e=JSON.parse(JSON.stringify(n));if(e.colors=t.colors?t.colors:e.colors,e.yAxisTitleWidth=!0!==t.yAxis.disabled&&t.yAxis.title?e.yAxisTitleWidth:0,"pie"!=t.type&&"ring"!=t.type||(e.pieChartLinePadding=!1===t.dataLabel?0:t.extra.pie.labelWidth*t.pixelRatio||e.pieChartLinePadding*t.pixelRatio),"rose"==t.type&&(e.pieChartLinePadding=!1===t.dataLabel?0:t.extra.rose.labelWidth*t.pixelRatio||e.pieChartLinePadding*t.pixelRatio),e.pieChartTextPadding=!1===t.dataLabel?0:e.pieChartTextPadding*t.pixelRatio,e.yAxisSplit=t.yAxis.splitNumber?t.yAxis.splitNumber:n.yAxisSplit,e.rotate=t.rotate,t.rotate){var a=t.width,r=t.height;t.width=r,t.height=a}t.padding=t.padding?t.padding:e.padding;for(var o=0;o<4;o++)t.padding[o]*=t.pixelRatio;e.yAxisWidth=n.yAxisWidth*t.pixelRatio,e.xAxisHeight=n.xAxisHeight*t.pixelRatio,t.enableScroll&&t.xAxis.scrollShow&&(e.xAxisHeight+=6*t.pixelRatio),e.xAxisLineHeight=n.xAxisLineHeight*t.pixelRatio,e.fontSize=t.fontSize,e.titleFontSize=n.titleFontSize*t.pixelRatio,e.subtitleFontSize=n.subtitleFontSize*t.pixelRatio,e.toolTipPadding=n.toolTipPadding*t.pixelRatio,e.toolTipLineHeight=n.toolTipLineHeight*t.pixelRatio,e.columePadding=n.columePadding*t.pixelRatio,t.$this=t.$this?t.$this:this,this.context=uni.createCanvasContext(t.canvasId,t.$this),t.chartData={},this.event=new Jt,this.scrollOption={currentOffset:0,startTouchX:0,distance:0,lastMoveTime:0},this.opts=t,this.config=e,Yt.call(this,t.type,t,e,this.context)};Xt.prototype.updateData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=i({},this.opts,t),this.opts.updateData=!0;var e=t.scrollPosition||"current";switch(e){case"current":this.opts._scrollDistance_=this.scrollOption.currentOffset;break;case"left":this.opts._scrollDistance_=0,this.scrollOption={currentOffset:0,startTouchX:0,distance:0,lastMoveTime:0};break;case"right":var n=at(this.opts.series,this.opts,this.config),a=n.yAxisWidth;this.config.yAxisWidth=a;var r=0,o=Z(this.opts.categories,this.opts,this.config),s=o.xAxisPoints,c=o.startX,l=o.endX,u=o.eachSpacing,h=u*(s.length-1),d=l-c;r=d-h,this.scrollOption={currentOffset:r,startTouchX:r,distance:0,lastMoveTime:0},this.opts._scrollDistance_=r;break}Yt.call(this,this.opts.type,this.opts,this.config,this.context)},Xt.prototype.zoom=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.opts.xAxis.itemCount;if(!0===this.opts.enableScroll){var n=Math.round(Math.abs(this.scrollOption.currentOffset)/this.opts.chartData.eachSpacing)+Math.round(this.opts.xAxis.itemCount/2);this.opts.animation=!1,this.opts.xAxis.itemCount=t.itemCount;var i=at(this.opts.series,this.opts,this.config),a=i.yAxisWidth;this.config.yAxisWidth=a;var r=0,o=Z(this.opts.categories,this.opts,this.config),s=o.xAxisPoints,c=o.startX,l=o.endX,u=o.eachSpacing,h=u*n,d=l-c,f=d-u*(s.length-1);r=d/2-h,r>0&&(r=0),r<f&&(r=f),this.scrollOption={currentOffset:r,startTouchX:r,distance:0,lastMoveTime:0},this.opts._scrollDistance_=r,Yt.call(this,this.opts.type,this.opts,this.config,this.context)}else e("log","请启用滚动条后使用！"," at plugins\\stan-ucharts\\u-charts\\u-charts.js:5265")},Xt.prototype.stopAnimation=function(){this.animationInstance&&this.animationInstance.stop()},Xt.prototype.addEventListener=function(t,e){this.event.addEventListener(t,e)},Xt.prototype.getCurrentDataIndex=function(t){var e=null;if(e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],e){var n=m(e,this.opts,t);return"pie"===this.opts.type||"ring"===this.opts.type||"rose"===this.opts.type?E({x:n.x,y:n.y},this.opts.chartData.pieData):"radar"===this.opts.type?D({x:n.x,y:n.y},this.opts.chartData.radarData,this.opts.categories.length):"funnel"===this.opts.type?I({x:n.x,y:n.y},this.opts.chartData.funnelData):"map"===this.opts.type?j({x:n.x,y:n.y},this.opts):"word"===this.opts.type?M({x:n.x,y:n.y},this.opts.chartData.wordCloudData):P({x:n.x,y:n.y},this.opts.chartData.calPoints,this.opts,this.config,Math.abs(this.scrollOption.currentOffset))}return-1},Xt.prototype.getLegendDataIndex=function(t){var e=null;if(e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],e){var n=m(e,this.opts,t);return O({x:n.x,y:n.y},this.opts.chartData.legendData)}return-1},Xt.prototype.touchLegend=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null;if(n=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],n){m(n,this.opts,t);var i=this.getLegendDataIndex(t);i>=0&&(this.opts.series[i].show=!this.opts.series[i].show,this.opts.animation=!!e.animation,this.opts._scrollDistance_=this.scrollOption.currentOffset,Yt.call(this,this.opts.type,this.opts,this.config,this.context))}},Xt.prototype.showToolTip=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null;a=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],a||e("log","touchError"," at plugins\\stan-ucharts\\u-charts\\u-charts.js:5402");var r=m(a,this.opts,t),o=this.scrollOption.currentOffset,s=i({},this.opts,{_scrollDistance_:o,animation:!1});if("line"===this.opts.type||"area"===this.opts.type||"column"===this.opts.type){var c=this.getCurrentDataIndex(t);if(c>-1){var l=b(this.opts.series,c);if(0!==l.length){var u=S(l,this.opts.chartData.calPoints,c,this.opts.categories,n),h=u.textList,d=u.offset;d.y=r.y,s.tooltip={textList:h,offset:d,option:n,index:c}}}Yt.call(this,s.type,s,this.config,this.context)}if("mix"===this.opts.type){c=this.getCurrentDataIndex(t);if(c>-1){o=this.scrollOption.currentOffset,s=i({},this.opts,{_scrollDistance_:o,animation:!1}),l=b(this.opts.series,c);if(0!==l.length){var f=T(l,this.opts.chartData.calPoints,c,this.opts.categories,n);h=f.textList,d=f.offset;d.y=r.y,s.tooltip={textList:h,offset:d,option:n,index:c}}}Yt.call(this,s.type,s,this.config,this.context)}if("candle"===this.opts.type){c=this.getCurrentDataIndex(t);if(c>-1){o=this.scrollOption.currentOffset,s=i({},this.opts,{_scrollDistance_:o,animation:!1}),l=b(this.opts.series,c);if(0!==l.length){u=k(this.opts.series[0].data,l,this.opts.chartData.calPoints,c,this.opts.categories,this.opts.extra.candle,n),h=u.textList,d=u.offset;d.y=r.y,s.tooltip={textList:h,offset:d,option:n,index:c}}}Yt.call(this,s.type,s,this.config,this.context)}if("pie"===this.opts.type||"ring"===this.opts.type||"rose"===this.opts.type||"funnel"===this.opts.type){c=this.getCurrentDataIndex(t);if(c>-1){o=this.scrollOption.currentOffset,s=i({},this.opts,{_scrollDistance_:o,animation:!1}),l=this.opts._series_[c],h=[{text:n.format?n.format(l):l.name+": "+l.data,color:l.color}],d={x:r.x,y:r.y};s.tooltip={textList:h,offset:d,option:n,index:c}}Yt.call(this,s.type,s,this.config,this.context)}if("map"===this.opts.type||"word"===this.opts.type){c=this.getCurrentDataIndex(t);if(c>-1){o=this.scrollOption.currentOffset,s=i({},this.opts,{_scrollDistance_:o,animation:!1}),l=this.opts._series_[c],h=[{text:n.format?n.format(l):l.properties.name,color:l.color}],d={x:r.x,y:r.y};s.tooltip={textList:h,offset:d,option:n,index:c}}s.updateData=!1,Yt.call(this,s.type,s,this.config,this.context)}if("radar"===this.opts.type){c=this.getCurrentDataIndex(t);if(c>-1){o=this.scrollOption.currentOffset,s=i({},this.opts,{_scrollDistance_:o,animation:!1}),l=b(this.opts.series,c);if(0!==l.length){h=l.map((function(t){return{text:n.format?n.format(t):t.name+": "+t.data,color:t.color}})),d={x:r.x,y:r.y};s.tooltip={textList:h,offset:d,option:n,index:c}}}Yt.call(this,s.type,s,this.config,this.context)}},Xt.prototype.translate=function(t){this.scrollOption={currentOffset:t,startTouchX:t,distance:0,lastMoveTime:0};var e=i({},this.opts,{_scrollDistance_:t,animation:!1});Yt.call(this,this.opts.type,e,this.config,this.context)},Xt.prototype.scrollStart=function(t){var e=null;e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0];var n=m(e,this.opts,t);e&&!0===this.opts.enableScroll&&(this.scrollOption.startTouchX=n.x)},Xt.prototype.scroll=function(t){0===this.scrollOption.lastMoveTime&&(this.scrollOption.lastMoveTime=Date.now());var e=this.opts.extra.touchMoveLimit||20,n=Date.now(),a=n-this.scrollOption.lastMoveTime;if(!(a<Math.floor(1e3/e))){this.scrollOption.lastMoveTime=n;var r=null;if(r=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],r&&!0===this.opts.enableScroll){var o,s=m(r,this.opts,t);o=s.x-this.scrollOption.startTouchX;var l=this.scrollOption.currentOffset,u=c(this,l+o,this.opts.chartData,this.config,this.opts);this.scrollOption.distance=o=u-l;var h=i({},this.opts,{_scrollDistance_:l+o,animation:!1});return Yt.call(this,h.type,h,this.config,this.context),l+o}}},Xt.prototype.scrollEnd=function(t){if(!0===this.opts.enableScroll){var e=this.scrollOption,n=e.currentOffset,i=e.distance;this.scrollOption.currentOffset=n+i,this.scrollOption.distance=0}},"object"===typeof t.exports&&(t.exports=Xt)}).call(this,n("0de9")["default"])},c6d6:function(t,e,n){"use strict";n.r(e);var i=n("80d4"),a=n("94d4");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"2412d300",null,!1,i["a"],o);e["default"]=c.exports},c75b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=uni.getSystemInfoSync().platform,a={name:"UniLoadMore",props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default:function(){return{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}}}},data:function(){return{webviewHide:!1,platform:i}},computed:{iconSnowWidth:function(){return 2*(Math.floor(this.iconSize/24)||1)}},mounted:function(){var t=this,e=getCurrentPages(),n=e[e.length-1],i=n.$getAppWebview();i.addEventListener("hide",(function(){t.webviewHide=!0})),i.addEventListener("show",(function(){t.webviewHide=!1}))},methods:{onClick:function(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}};e.default=a},c806:function(t,e,n){"use strict";n.r(e);var i=n("5c65"),a=n("4367");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"15c24540",null,!1,i["a"],o);e["default"]=c.exports},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n},c969:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniCard",props:{title:{type:String,default:""},extra:{type:String,default:""},note:{type:String,default:""},thumbnail:{type:String,default:""},mode:{type:String,default:"basic"},isFull:{type:Boolean,default:!1},isShadow:{type:Boolean,default:!1}},methods:{onClick:function(){this.$emit("click")}}};e.default=i},c9bf:function(t,e,n){"use strict";n.r(e);var i=n("d529"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},cc1c:function(t,e,n){"use strict";n.r(e);var i=n("7180"),a=n("1be4");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"02ca7ebc",null,!1,i["a"],o);e["default"]=c.exports},d0db:function(t,e,n){"use strict";n.r(e);var i=n("2f37"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},d529:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("2f62");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={methods:r({},(0,i.mapMutations)(["login"])),onLaunch:function(){var t=uni.getStorageSync("userId")||"";t&&uni.setStorage({key:"userId",data:t})},onShow:function(){},onHide:function(){}};e.default=s},d7ce:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={getMyDay:function(t){var e=t.split(" "),n="",i="";if(e[0]){var a=new Date(e[0]);switch(a.getDay()){case 0:n="周日";break;case 1:n="周一";break;case 2:n="周二";break;case 3:n="周三";break;case 4:n="周四";break;case 5:n="周五";break;case 6:n="周六";break}}if(e[1]){var r=e[1].split(":"),o="",s=r[0];s<6?o="凌晨":s<7?o="早上":s<12?o="上午":s<13?o="中午":s<17?o="下午":s<19?o="傍晚":s<24&&(o="晚上"),s>12&&(s=Number(s)-12),i=o+s+":"+r[1]}return n+" "+i},monthday:function(t,e){var n=new Date(t,e,1),i=new Date(n.getTime()-864e5).getDate();return i},monthDay:function(t,e,n){var i=e<10?"0"+e:e;if(1==n){var a=t+"/"+i+"/01 0:0:0";return new Date(a).getTime()}if(2==n){var r=new Date(t,e,0).getDate(),o=t+"/"+i+"/"+r+" 23:59:59";return new Date(o).getTime()}},monthYear:function(t,e){if(1==e){var n=t+"/01/01 0:0:0";return new Date(n).getTime()}if(2==e){var i=new Date(t,12,0).getDate(),a=t+"/12/"+i+" 23:59:59";return new Date(a).getTime()}},Format:function(t){var e=t.getMonth()+1,n=t.getDate();return e=e<10?"0"+e:e,n=n<10?"0"+n:n,"".concat(t.getFullYear(),"-").concat(e,"-").concat(n," ").concat(t.getHours(),":").concat(t.getMinutes())},compare:function(t){return function(e,n){var i=e[t],a=n[t];return i-a}},randomColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},randomNum:function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+1,10);case 2:return parseInt(Math.random()*(e-t+1)+t,10);default:return 0}},formatSeconds:function(t){var e=parseInt(t),n=0,i=0,a=0;e>60&&(n=parseInt(e/60),e=parseInt(e%60),n>60&&(i=parseInt(n/60),n=parseInt(n%60),i>24&&(a=parseInt(i/24),i=parseInt(i%24))));var r="";return e>0&&(r=parseInt(e)+"秒"),n>0&&(r=parseInt(n)+"分"+r),i>0&&(r=parseInt(i)+"小时"+r),a>0&&(r=parseInt(a)+"天"+r),r},SplitArr:function(e,n){var i=[];return e.map((function(e){if(t("log","mapItem:",e," at static\\untils\\until.js:164"),0==i.length)i.push({useMonth:e.useMonth,useYear:e.useYear,list:e.list});else{var a=i.some((function(i){if(t("log","item:",i," at static\\untils\\until.js:173"),i[n]==e[n])return i.list=i.list.concat(e.list),!0;t("log","aa"," at static\\untils\\until.js:178")}));a||i.push({useMonth:e.useMonth,useYear:e.useYear,list:e.list})}})),i},checkPhone:function(t){return!!/^1[3456789]\d{9}$/.test(t)}};e.default=n}).call(this,n("0de9")["default"])},da4d:function(t,e,n){"use strict";n.r(e);var i=n("7324"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},da95:function(t,e,n){"use strict";function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"uniTransition",props:{show:{type:Boolean,default:!1},modeClass:{type:Array,default:function(){return[]}},duration:{type:Number,default:300},styles:{type:Object,default:function(){return{}}}},data:function(){return{isShow:!1,transform:"",ani:{in:"",active:""}}},watch:{show:{handler:function(t){t?this.open():this.close()},immediate:!0}},computed:{stylesObject:function(){var t=a({},this.styles,{"transition-duration":this.duration/1e3+"s"}),e="";for(var n in t){var i=this.toLine(n);e+=i+":"+t[n]+";"}return e}},created:function(){},methods:{change:function(){this.$emit("click",{detail:this.isShow})},open:function(){var t=this;for(var e in clearTimeout(this.timer),this.isShow=!0,this.transform="",this.ani.in="",this.getTranfrom(!1))"opacity"===e?this.ani.in="fade-in":this.transform+="".concat(this.getTranfrom(!1)[e]," ");this.$nextTick((function(){setTimeout((function(){t._animation(!0)}),50)}))},close:function(t){clearTimeout(this.timer),this._animation(!1)},_animation:function(t){var e=this,n=this.getTranfrom(t);for(var i in this.transform="",n)"opacity"===i?this.ani.in="fade-".concat(t?"out":"in"):this.transform+="".concat(n[i]," ");this.timer=setTimeout((function(){t||(e.isShow=!1),e.$emit("change",{detail:e.isShow})}),this.duration)},getTranfrom:function(t){var e={transform:""};return this.modeClass.forEach((function(n){switch(n){case"fade":e.opacity=t?1:0;break;case"slide-top":e.transform+="translateY(".concat(t?"0":"-100%",") ");break;case"slide-right":e.transform+="translateX(".concat(t?"0":"100%",") ");break;case"slide-bottom":e.transform+="translateY(".concat(t?"0":"100%",") ");break;case"slide-left":e.transform+="translateX(".concat(t?"0":"-100%",") ");break;case"zoom-in":e.transform+="scale(".concat(t?1:.8,") ");break;case"zoom-out":e.transform+="scale(".concat(t?1:1.2,") ");break}})),e},_modeClassArr:function(t){var e=this.modeClass;if("string"!==typeof e){var n="";return e.forEach((function(e){n+=e+"-"+t+","})),n.substr(0,n.length-1)}return e+"-"+t},toLine:function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}}};e.default=o},da95c:function(t){t.exports={typdIcons:[{iconclass:"iconqiche"},{iconclass:"iconhuoche"},{iconclass:"iconfeiji"},{iconclass:"icontingche"},{iconclass:"iconbaozhuanhuan"},{iconclass:"iconyinhang"},{iconclass:"icon19"},{iconclass:"iconlvyouchanpin"},{iconclass:"icontuikuan"},{iconclass:"iconjiangjinguize"},{iconclass:"iconpets"},{iconclass:"iconxuexi"},{iconclass:"iconzhuanzhang"},{iconclass:"iconzhufang"},{iconclass:"icongongjiao"},{iconclass:"iconyiliao"},{iconclass:"iconaa"},{iconclass:"iconlixifuji"},{iconclass:"iconrenminbi"},{iconclass:"icontang"},{iconclass:"iconyule"},{iconclass:"iconyunongtongqukuanfuwu"},{iconclass:"iconjiekuan"},{iconclass:"iconyifu"},{iconclass:"iconhongbao"},{iconclass:"iconjiaoyu"},{iconclass:"iconshenghuo-"},{iconclass:"iconshuaqiaqiapianyinhangqia"},{iconclass:"icontouzixiangmu"},{iconclass:"iconqita"},{iconclass:"iconhuiyuanjiangjin"},{iconclass:"iconshangdian"},{iconclass:"iconzijinzhuanzhang"},{iconclass:"iconcanyincanju"}],paytype:[{value:5,label:"现金"},{value:1,label:"微信"},{value:2,label:"支付宝"},{value:3,label:"银行卡"},{value:4,label:"信用卡"},{value:6,label:"其它"}]}},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,i=t.length-1;i>=0;i--){var a=t[i];"."===a?t.splice(i,1):".."===a?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t){"string"!==typeof t&&(t+="");var e,n=0,i=-1,a=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!a){n=e+1;break}}else-1===i&&(a=!1,i=e+1);return-1===i?"":t.slice(n,i)}function a(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}e.resolve=function(){for(var e="",i=!1,r=arguments.length-1;r>=-1&&!i;r--){var o=r>=0?arguments[r]:t.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,i="/"===o.charAt(0))}return e=n(a(e.split("/"),(function(t){return!!t})),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===r(t,-1);return t=n(a(t.split("/"),(function(t){return!!t})),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(a(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function i(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var a=i(t.split("/")),r=i(n.split("/")),o=Math.min(a.length,r.length),s=o,c=0;c<o;c++)if(a[c]!==r[c]){s=c;break}var l=[];for(c=s;c<a.length;c++)l.push("..");return l=l.concat(r.slice(s)),l.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,i=-1,a=!0,r=t.length-1;r>=1;--r)if(e=t.charCodeAt(r),47===e){if(!a){i=r;break}}else a=!1;return-1===i?n?"/":".":n&&1===i?"/":t.slice(0,i)},e.basename=function(t,e){var n=i(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,i=-1,a=!0,r=0,o=t.length-1;o>=0;--o){var s=t.charCodeAt(o);if(47!==s)-1===i&&(a=!1,i=o+1),46===s?-1===e?e=o:1!==r&&(r=1):-1!==e&&(r=-1);else if(!a){n=o+1;break}}return-1===e||-1===i||0===r||1===r&&e===i-1&&e===n+1?"":t.slice(e,i)};var r="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},e2bf:function(t,e,n){"use strict";n.r(e);var i=n("93f7"),a=n("da4d");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"861029e4",null,!1,i["a"],o);e["default"]=c.exports},e35a:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={appid:"__UNI__3B8053B"};e.default=i},e523:function(t,e,n){"use strict";n.r(e);var i=n("7457"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},e8d8:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","uni-list-item"),class:t._$s(0,"c",t.disabled?"uni-list-item--disabled":""),attrs:{"hover-class":t._$s(0,"a-hover-class",t.disabled||t.showSwitch?"":"uni-list-item--hover"),_i:0},on:{click:t.onClick,longpress:t.onLongpress}},[n("view",{staticClass:t._$s(1,"sc","uni-list-item__container"),class:t._$s(1,"c",{"uni-list-item--first":t.isFirstChild}),attrs:{_i:1}},[t._$s(2,"i",t.thumb)?n("view",{staticClass:t._$s(2,"sc","uni-list-item__icon"),attrs:{_i:2}},[n("image",{staticClass:t._$s(3,"sc","uni-list-item__icon-img"),attrs:{src:t._$s(3,"a-src",t.thumb),_i:3}})]):t._e(),t._$s(4,"i",t.icons)?n("view",{staticClass:t._$s(4,"sc","uni-list-item__icon"),attrs:{_i:4}},[n("view",{class:t._$s(5,"c",["iconfont",1==t.genre?"exclass":"inclass",t.icons]),attrs:{_i:5}})]):t._$s(6,"e",t.showExtraIcon)?n("view",{staticClass:t._$s(6,"sc","uni-list-item__icon"),attrs:{_i:6}},[n("uni-icons",{staticClass:t._$s(7,"sc","uni-icon-wrapper"),attrs:{color:t.extraIcon.color,size:t.extraIcon.size,type:t.extraIcon.type,_i:7}})],1):t._e(),n("view",{staticClass:t._$s(8,"sc","uni-list-item__content"),attrs:{_i:8}},[t._t("default",null,{_i:9}),n("text",{staticClass:t._$s(10,"sc","uni-list-item__content-title"),attrs:{_i:10}},[n("text",{staticClass:t._$s(11,"sc","titletxt"),attrs:{_i:11}},[t._v(t._$s(11,"t0-0",t._s(t.title)))]),t._$s(12,"i",t.remarks)?n("text",{staticClass:t._$s(12,"sc","uni-list-item__content-note"),attrs:{_i:12}},[t._v(t._$s(12,"t0-0",t._s(t.remarks)))]):t._e()]),t._$s(13,"i",t.note)?n("text",{staticClass:t._$s(13,"sc","uni-list-item__content-note"),attrs:{_i:13}},[n("text",[t._v(t._$s(14,"t0-0",t._s(t.note+" ")))]),n("image",{directives:[{name:"show",rawName:"v-show",value:t._$s(15,"v-show",t.picture),expression:"_$s(15,'v-show',picture)"}],staticClass:t._$s(15,"sc","uni-list-item__icon-img pictureimg"),attrs:{src:t._$s(15,"a-src",t.picture),_i:15},on:{click:function(e){return e.stopPropagation(),t.onshowproof(t.picture)}}})]):t._e()],2),t._$s(16,"i",t.amount||t.datetime)?n("view",{staticClass:t._$s(16,"sc","uni-list-item__content amout_datetime"),attrs:{_i:16}},[t._$s(17,"i",t.amount)?n("text",{staticClass:t._$s(17,"sc","uni-list-item__content-title"),attrs:{_i:17}},[t._v(t._$s(17,"t0-0",t._s("¥ "+t.amount)))]):t._e(),t._$s(18,"i",t.datetime)?n("text",{staticClass:t._$s(18,"sc","uni-list-item__content-note"),attrs:{_i:18}},[t._v(t._$s(18,"t0-0",t._s(t.datetime)))]):t._e()]):t._e(),t._$s(19,"i",t.budget)?n("view",{staticClass:t._$s(19,"sc","uni-list-item__content "),attrs:{_i:19}},[n("text",{staticClass:t._$s(20,"sc","uni-list-item__content-note item-budget"),attrs:{_i:20}},[t._v(t._$s(20,"t0-0",t._s(t.budget)))])]):t._e(),t._$s(21,"i",t.showBadge||t.showArrow||t.showSwitch)?n("view",{staticClass:t._$s(21,"sc","uni-list-item__extra"),attrs:{_i:21}},[t._$s(22,"i",t.rightText)?n("text",{staticClass:t._$s(22,"sc","uni-list-item__extra-text"),attrs:{_i:22}},[t._v(t._$s(22,"t0-0",t._s(t.rightText)))]):t._e(),t._$s(23,"i",t.showBadge)?n("uni-badge",{attrs:{type:t.badgeType,text:t.badgeText,_i:23}}):t._e(),t._$s(24,"i",t.showSwitch)?n("switch",{attrs:{disabled:t._$s(24,"a-disabled",t.disabled),checked:t._$s(24,"a-checked",t.switchChecked),_i:24},on:{change:t.onSwitchChange}}):t._e(),t._$s(25,"i",t.showArrow)?n("uni-icons",{staticClass:t._$s(25,"sc","uni-icon-wrapper"),attrs:{size:20,color:"#bbb",type:"arrowright",_i:25}}):t._e()],1):t._e()])])},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},f0c5:function(t,e,n){"use strict";function i(t,e,n,i,a,r,o,s,c,l){var u,h="function"===typeof t?t.options:t;if(c&&(h.components=Object.assign(c,h.components||{})),l&&((l.beforeCreate||(l.beforeCreate=[])).unshift((function(){this[l.__module]=this})),(h.mixins||(h.mixins=[])).push(l)),e&&(h.render=e,h.staticRenderFns=n,h._compiled=!0),i&&(h.functional=!0),r&&(h._scopeId="data-v-"+r),o?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=u):a&&(u=s?function(){a.call(this,this.$root.$options.shadowRoot)}:a),u)if(h.functional){h._injectStyles=u;var d=h.render;h.render=function(t,e){return u.call(e),d(t,e)}}else{var f=h.beforeCreate;h.beforeCreate=f?[].concat(f,u):[u]}return{exports:t,options:h}}n.d(e,"a",(function(){return i}))},f14e:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","uni-status-bar"),style:t._$s(0,"s",{height:t.statusBarHeight}),attrs:{_i:0}},[t._t("default",null,{_i:1})],2)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},f200:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a5f3"));function a(t){return t&&t.__esModule?t:{default:t}}var r={name:"UniIcons",props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16}},data:function(){return{icons:i.default}},methods:{_onClick:function(){this.$emit("click")}}};e.default=r},f421:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","annal"),attrs:{_i:0}},[n("uni-nav-bar",{attrs:{fixed:"true","status-bar":"true","left-icon":"back",title:"账单记录",color:"#333","background-color":"#f1f1f1",_i:1},on:{clickLeft:t.toback}}),n("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(2,"v-show",!t.isnull),expression:"_$s(2,'v-show',!isnull)"}],staticClass:t._$s(2,"sc","annallist"),attrs:{_i:2}},t._l(t._$s(3,"f",{forItems:t.listData.list}),(function(e,i,a,r){return n("uni-list",{key:t._$s(3,"f",{forIndex:a,key:i}),attrs:{_i:"3-"+r}},[n("uni-list-item",{staticClass:t._$s("4-"+r,"sc","dateitem"),attrs:{title:e.useYear+"年"+e.useMonth+"月",budget:"查年月账单","show-arrow":!1,_i:"4-"+r},on:{click:function(n){return t.handleMonth(e.useYear,e.useMonth)}}}),t._l(t._$s("5-"+r,"f",{forItems:e.list}),(function(e,a,o,s){return n("uni-list-item",{key:t._$s("5-"+r,"f",{forIndex:o,key:e.id}),attrs:{title:e.useType.label,note:e.payType.label,remarks:e.remarks,amount:e.amount,datetime:e.useDate,icons:e.useType.iconclass,picture:e.picture,genre:e.genre,"show-arrow":!1,_i:"5-"+r+"-"+s},on:{click:function(n){return t.handleItem(e._id)},longpress:function(n){return t.handleLong(e,i,a)},onshowproof:t.onshowproof}})}))],2)})),1),t._$s(6,"i",t.isnull)?n("view",{staticClass:t._$s(6,"sc","nodata"),attrs:{_i:6},on:{click:t.getlistdata}},[n("image",{}),n("view",{staticClass:t._$s(8,"sc","notxt"),attrs:{_i:8}})]):t._e(),n("uni-popup",{ref:"annalpopup",attrs:{type:"center",_i:9}},[n("view",{staticClass:t._$s(10,"sc","operating"),attrs:{_i:10}},[n("view",{attrs:{_i:11},on:{click:function(e){return t.moreOper(1)}}}),n("view",{attrs:{_i:12},on:{click:function(e){return t.moreOper(2)}}})])]),n("uni-popup",{ref:"picture",attrs:{type:"center",_i:13}},[n("image",{attrs:{src:t._$s(14,"a-src",t.imgUrl),_i:14}})])],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},fc91:function(t,e,n){"use strict";n.r(e);var i=n("5d8b"),a=n("1b19");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"2992ba7c",null,!1,i["a"],o);e["default"]=c.exports},fe07:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"Behavior",(function(){return xt})),n.d(e,"Component",(function(){return bt})),n.d(e,"Page",(function(){return yt})),n.d(e,"nextTick",(function(){return wt}));var i=n("8bbf"),a=n.n(i);function r(t,e){t&&(e.mpOptions.data=t)}function o(e){e.components=t["__wxVueOptions"].components}const s=Object.prototype.toString,c=Object.prototype.hasOwnProperty;function l(t){return"function"===typeof t}function u(t){return"[object Object]"===s.call(t)}function h(t,e){return c.call(t,e)}function d(){}function f(t){const e=Object.create(null);return function(n){const i=e[n];return i||(e[n]=t(n))}}const p=/-(\w)/g,g=f(t=>t.replace(p,(t,e)=>e?e.toUpperCase():"")),v="__data__",_={created:"onServiceCreated",attached:"onServiceAttached",ready:"mounted",moved:"moved",detached:"destroyed"},y=Object.keys(_),m={show:"onPageShow",hide:"onPageHide",resize:"onPageResize"},b=Object.keys(m),x=["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onResize","onTabItemTap"];function w(t,e){const n=Object.create(null);Object.keys(t).forEach(e=>{const i=t[e];l(i)&&-1===x.indexOf(e)&&(n[e]=i)}),e.methods=n}function S(t,e){Object.keys(t).forEach(n=>{-1!==x.indexOf(n)&&(e[n]=t[n])})}function T(t){const e={mixins:[],mpOptions:{}};return o(e),r(t.data,e),w(t,e),S(t,e),e}function k(t,e){t&&(e.mpOptions.properties=t)}function A(t,e){t&&(e.mpOptions.options=t)}function P(t,e){t&&(t.$emit&&(console.warn('Method "$emit" conflicts with an existing Vue instance method'),delete t.$emit),e.methods=t)}function O(t,e){y.forEach(n=>{h(t,n)&&(e[_[n]]||(e[_[n]]=[])).push(t[n])})}const C={"wx://form-field":{},"wx://component-export":{}};function $(t){const{behaviors:e,definitionFilter:n}=t,i=[];if(Array.isArray(e)&&e.forEach(e=>{e="string"===typeof e?C[e]:e,e.definitionFilter&&(i.push(e.definitionFilter),e.definitionFilter.call(null,t,[]))}),l(n))return function(t){n(t,i)}}function D(t,e){$(t)}function I(t){const{data:e,methods:n,behaviors:i,properties:a}=t,o={watch:{},mpOptions:{mpObservers:[]}};return r(e,o),P(n,o),j(i,o),k(a,o),O(t,o),D(t),o}const M={"wx://form-field":{beforeCreate(){const t=this.$options.mpOptions;t.properties||(t.properties=Object.create(null));const e=t.properties;h(e,"name")||(e.name={type:String}),h(e,"value")||(e.value={type:String})}}};function j(t,e){t&&t.forEach(t=>{"string"===typeof t?M[t]&&e.mixins.push(M[t]):e.mixins.push(I(t))})}function E(t){return t.split(".")}function L(t){return t.split(",").map(t=>E(t))}function R(t,e){if(!t)return;const{mpObservers:n}=e.mpOptions;Object.keys(t).forEach(e=>{n.push({paths:L(e),observer:t[e]})})}function N(t,e){0===e.indexOf("/")&&(t="");const n=t.split("/"),i=e.split("/");n.pop();while(i.length){const t=i.shift();""!==t&&"."!==t&&(".."!==t?n.push(t):n.pop())}return n.join("/")}function F(e,n){e&&(Object.keys(e).forEach(n=>{const i=e[n];i.name=n,i.target=i.target?String(i.target):N(t["__wxRoute"],n)}),n.mpOptions.relations=e)}function z(t,e){t&&(Array.isArray(t)||(t=[t]),e.mpOptions.externalClasses=t,e.mpOptions.properties||(e.mpOptions.properties=Object.create(null)),t.forEach(t=>{e.mpOptions.properties[g(t)]={type:String,value:""}}))}function q(t,e){t&&O(t,e)}function U(t,e){t&&b.forEach(n=>{const i=t[n];l(i)&&(e[m[n]]=i)})}function B(t){const{data:e,options:n,methods:i,behaviors:a,lifetimes:s,observers:c,relations:l,properties:u,pageLifetimes:h,externalClasses:d}=t,f={mixins:[],props:{},watch:{},mpOptions:{mpObservers:[]}};return o(f),r(e,f),A(n,f),P(i,f),j(a,f),q(s,f),R(c,f),F(l,f),k(u,f),U(h,f),z(d,f),O(t,f),D(t),f}function W(t,e,n,i){if(!e)return;const a=`_$${t}Handlers`;(i[a]||(i[a]=[])).push((function(){e.call(i,n)}))}function H(t,e,n){const i="linked",a=t.name,r=n._$relationNodes||(n._$relationNodes=Object.create(null));(r[a]||(r[a]=[])).push(e),W(i,t[i],e,n)}function G(t,e,n){const i="unlinked";W(i,t[i],e,n)}function K(t,e,n){const i=t&&t.$options.mpOptions&&t.$options.mpOptions.relations;if(!i)return[];const a=Object.keys(i).find(t=>{const a=i[t];return a.target===e&&a.type===n});return a?[i[a],t]:[]}function V(t,e,n){const[i,a]=n(t,t.$options.mpOptions.path);i&&(H(i,t,a),H(e,a,t),G(i,t,a),G(e,a,t))}function Y(t,e){const n=t.type;"parent"===n?V(e,t,(function(t,e){return K(t.$parent,e,"child")})):"ancestor"===n&&V(e,t,(function(t,e){let n=t.$parent;while(n){const t=K(n,e,"descendant");if(t.length)return t;n=n.$parent}return[]}))}function J(t){const{relations:e}=t.$options.mpOptions||{};e&&Object.keys(e).forEach(n=>{Y(e[n],t)})}function X(t,e){const n=t[`_$${e}Handlers`];n&&n.forEach(t=>t())}const Q={enumerable:!0,configurable:!0,get:d,set:d};function Z(t,e,n){Q.get=function(){return this[e][n]},Q.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Q)}function tt(t,e,n){const i=t.replace(/\[(\d+?)\]/g,".$1").split(".");return i.reduce((t,n,a)=>{if(a!==i.length-1)return"undefined"===typeof t[n]&&(t[n]={}),t[n];t[n]=e},n),1===i.length}function et(t,e){u(t)&&(Object.keys(t).forEach(e=>{tt(e,t[e],this.data)&&!h(this,e)&&Z(this,v,e)}),this.$forceUpdate(),l(e)&&this.$nextTick(e))}const nt=Object.prototype.toString,it=(t={},e)=>{const n=nt.call(e);if("[object Array]"===n)return t=e.slice(0),t;if("[object Object]"===n){for(const n in e)t[n]=it(t[n],e[n]);return t}if("[object Date]"===n)return new Date(e.getTime());if("[object RegExp]"===n){const t=String(e),n=t.lastIndexOf("/");return new RegExp(t.slice(1,n),t.slice(n+1))}return e},at=t=>it("[object Array]"===nt.call(t)?[]:{},t),rt={[String]:"",[Number]:0,[Boolean]:!1,[Object]:null,[Array]:[],[null]:null};function ot(t){return rt[t]}function st(t){return u(t)?h(t,"value")?t.value:ot(t.type):ot(t)}function ct(t){return u(t)?t.type:t}function lt(t,e,n,i){let a=n[t];if(void 0!==a){const n=e[t],r=ct(n);a=ut(a,r);const o=n&&n.observer;return o&&setTimeout((function(){ht(o,i,a)}),4),a}return st(e[t])}function ut(t,e){return e===Boolean?!!t:e===String?String(t):t}function ht(t,e,n,i){try{"function"===typeof t?t.call(e,n,i):"string"===typeof t&&"function"===typeof e[t]&&e[t](n,i)}catch(a){console.error(`execute observer ${t} callback fail! err: ${a}`)}}function dt(t,e){const n=t.$options.mpOptions.properties;if(!n)return;const i=at(t.$options.propsData)||{};for(const a in n){const r=!!u(n[a])&&n[a].observer;let o=lt(a,n,i,t);Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get(){return o},set(e){const n=o;e===o||e!==e&&o!==o||(o=Array.isArray(e)?e.slice(0):e,r&&ht(r,t,e,n),t.$forceUpdate())}})}}function ft(t){const e=t.$options.mpOptions&&t.$options.mpOptions.properties,n=t.$options.propsData;n&&e&&Object.keys(e).forEach(i=>{h(n,i)&&(t[i]=ut(n[i],ct(e[i])))})}function pt(t){const e=JSON.parse(JSON.stringify(t.$options.mpOptions.data||{}));t[v]=e;const n={get(){return t[v]},set(e){t[v]=e}};Object.defineProperties(t,{data:n,properties:n}),t.setData=et,dt(t,e),Object.keys(e).forEach(e=>{Z(t,v,e)})}function gt(t){const e=t.$emit;t.triggerEvent=(n,i,a)=>{const r={dataset:t.$el.dataset},o={target:r,currentTarget:r,detail:i,preventDefault:d,stopPropagation:d};e.call(t,n,o)},t.$emit=(...e)=>{t.triggerEvent(...e)},t.getRelationNodes=e=>(t._$relationNodes&&t._$relationNodes[e]||[]).filter(t=>!t._isDestroyed),t._$updateProperties=ft}function vt(t){const e=t.$options.watch;e&&Object.keys(e).forEach(n=>{const i=e[n];if(i.mounted){const e=t[n];let a=i.handler;"string"===typeof a&&(a=t[a]),a&&a.call(t,e,e)}})}var _t={beforeCreate(){this._renderProxy=this},created(){pt(this),gt(this),J(this)},mounted(){vt(this)},destroyed(){X(this,"unlinked")}};function yt(e){const n=T(e);n.mixins.unshift(_t),n.mpOptions.path=t["__wxRoute"],t["__wxComponents"][t["__wxRoute"]]=n}function mt(t){t["onServiceAttached"]||(t["onServiceAttached"]=[]),t["onServiceAttached"].push((function(){X(this,"linked")}))}function bt(e){const n=B(e);n.mixins.unshift(_t),n.mpOptions.path=t["__wxRoute"],mt(n),t["__wxComponents"][t["__wxRoute"]]=n}function xt(t){return t}t["__wxRoute"]="",t["__wxComponents"]=Object.create(null),t["__wxVueOptions"]=Object.create(null);const wt=a.a.nextTick;e["default"]=uni}.call(this,n("c8ba"))}},[["53b4","app-config"]]]);
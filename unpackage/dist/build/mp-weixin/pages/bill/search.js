(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bill/search"],{"17cf":function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},"20f7":function(t,e,n){"use strict";var i=n("8f2d"),o=n.n(i);o.a},"64a0":function(t,e,n){"use strict";n.r(e);var i=n("17cf"),o=n("73f4");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("20f7");var s,u=n("f0c5"),r=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"67fb2a5c",null,!1,i["a"],s);e["default"]=r.exports},"73f4":function(t,e,n){"use strict";n.r(e);var i=n("f3dc"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},"8f2d":function(t,e,n){},cfae:function(t,e,n){"use strict";(function(t){n("b40f"),n("921b");i(n("66fd"));var e=i(n("64a0"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},f3dc:function(t,e,n){"use strict";(function(t,i){function o(t){return r(t)||u(t)||s(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function r(t){if(Array.isArray(t))return c(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l,h=function(){Promise.all([n.e("common/vendor"),n.e("node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons")]).then(function(){return resolve(n("8abe"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more").then(function(){return resolve(n("e887"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup").then(function(){return resolve(n("d00b"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("node-modules/@dcloudio/uni-ui/lib/uni-nav-bar/uni-nav-bar").then(function(){return resolve(n("c389"))}.bind(null,n)).catch(n.oe)},p=function(){Promise.all([n.e("common/vendor"),n.e("node-modules/@dcloudio/uni-ui/lib/uni-list-item/uni-list-item")]).then(function(){return resolve(n("2e5a"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("node-modules/@dcloudio/uni-ui/lib/uni-list/uni-list").then(function(){return resolve(n("a215"))}.bind(null,n)).catch(n.oe)},v={components:{uniList:g,uniListItem:p,uniNavBar:m,uniPopup:f,uniLoadMore:d,uniIcons:h},onLoad:function(t){t.label?(this.valueInput=t.label,this.isfocus=!1,this.search()):this.getkeys()},data:function(){return{inds:"",imgUrl:"",pageNum:0,Token:t.getStorageSync("userId")||"",isnull:!1,isfocus:!0,issearch:!0,issearch_log:!0,opearObj:{},valueInput:"",keys:[],search_keys:[],listData:{},status:"more",showLoadMore:!1,loadMoreText:"加载中..."}},onUnload:function(){this.listData={},this.pageNum=0,this.status="more",this.showLoadMore=!1},onReachBottom:function(){this.pageNum+=1,100*this.pageNum>this.listData.total?t.showToast({icon:"none",duration:2e3,title:"没有更多数据了"}):(this.status="loading",this.showLoadMore=!0,this.search())},onPullDownRefresh:function(){this.status="loading",this.showLoadMore=!0,this.pageNum=0,this.search()},methods:{toback:function(){t.navigateBack({delta:1})},inputValue:function(e){var n=this,i=e.target.value,o=0;l&&clearInterval(l),!i&&this.isnull&&(this.showLoadMore=!1,this.isnull=!1),l=setInterval((function(){if(o++,30===o&&i){n.valueInput=i,n.pageNum=0,n.keys.push(n.valueInput);var a=n.keys.join(",");clearInterval(l);try{t.setStorageSync("search_key",a)}catch(e){}n.pageNum=0,n.search()}}),50)},search:function(){var e=this;this.issearch&&(this.issearch=!1,this.isfocus=!1,t.showLoading({title:"数据加载中..."}),i.callFunction({name:"get",data:{token:this.Token,pageNum:this.pageNum,label:this.valueInput}}).then((function(n){if(t.hideLoading(),console.log(n),e.issearch=!0,e.showLoadMore=!1,e.issearch_log=!1,-1!=n.result.status)if(n.result.total>0){e.isnull=!1;var i=o(n.result.list);0==e.pageNum?e.listData=n.result:e.listData.list=e.listData.list.concat(i)}else{0==e.pageNum&&(e.listData={},e.isnull=!0);var a=e.pageNum>0?"没有更多数据了":n.result.data.msg;t.showToast({icon:"none",duration:2e3,title:a})}else e.isnull=!0})).catch((function(n){t.hideLoading(),e.issearch=!0,e.isnull=!1,t.showToast({icon:"none",duration:2e3,title:"未查询到相关信息"})})))},getkeys:function(){try{var e=t.getStorageSync("search_key");if(e){var n=e.split(",");this.keys=Array.from(new Set(n))}}catch(i){}},handlesey:function(t){this.valueInput=t,this.search()},handledel:function(e,n){this.keys.splice(n,1);var i=this.keys.join(",");try{t.setStorageSync("search_key",i)}catch(o){}},clearAll:function(){this.keys=[];try{t.setStorageSync("search_key","")}catch(e){}},onshowproof:function(t){this.imgUrl=t,this.$refs.picture.open()},handleItem:function(e){t.navigateTo({url:"./details?id="+e})},handleLong:function(t,e){this.inds=e,this.opearObj=t,this.$refs.searchPopup.open()},moreOper:function(e){var n=this;1==e?this.handleItem(this.opearObj._id):t.showModal({title:"提示",content:"是否确认删除此条数据？",success:function(e){e.confirm?(t.showLoading({title:"数据删除中..."}),i.callFunction({name:"remove",data:{dataId:n.opearObj._id}}).then((function(e){t.hideLoading(),t.showToast({title:e.result.msg,duration:2e3}),n.listData.list.splice(n.inds,1)})).catch((function(e){t.hideLoading(),t.showModal({content:"操作失败，请重新操作",showCancel:!1}),console.error(e)}))):e.cancel&&console.log("用户点击取消")}}),this.$refs.searchPopup.close()}},created:function(){}};e.default=v}).call(this,n("543d")["default"],n("a9ff")["default"])}},[["cfae","common/runtime","common/vendor"]]]);
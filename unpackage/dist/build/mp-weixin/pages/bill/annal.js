(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bill/annal"],{"532f":function(t,n,i){"use strict";i.r(n);var e=i("6ec8"),o=i.n(e);for(var a in e)"default"!==a&&function(t){i.d(n,t,(function(){return e[t]}))}(a);n["default"]=o.a},"6ec8":function(t,n,i){"use strict";(function(t,e){function o(t){return s(t)||u(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(t){if(Array.isArray(t)){for(var n=0,i=new Array(t.length);n<t.length;n++)i[n]=t[n];return i}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=function(){return i.e("node-modules/_@dcloudio_uni-ui@1.1.8@@dcloudio/uni-ui/lib/uni-nav-bar/uni-nav-bar").then(i.bind(null,"fc91"))},r=function(){return i.e("node-modules/_@dcloudio_uni-ui@1.1.8@@dcloudio/uni-ui/lib/uni-popup/uni-popup").then(i.bind(null,"b50e"))},c=function(){return i.e("node-modules/_@dcloudio_uni-ui@1.1.8@@dcloudio/uni-ui/lib/uni-list-item/uni-list-item").then(i.bind(null,"8f42"))},d=function(){return i.e("node-modules/_@dcloudio_uni-ui@1.1.8@@dcloudio/uni-ui/lib/uni-list/uni-list").then(i.bind(null,"c806"))},f={components:{uniList:d,uniListItem:c,uniPopup:r,uniNavBar:l},data:function(){return{num:0,pageNum:0,executionNum:0,Token:t.getStorageSync("userId")||"",startTime:"",imgUrl:"",status:"more",listData:[],islong:!0,isnull:!1,opearObj:{},inds:{}}},onShow:function(){this.startTime=new Date,this.getlistdata()},onUnload:function(){this.listData={},this.pageNum=0,this.status="more",this.showLoadMore=!1},onReachBottom:function(){this.pageNum+=1,100*this.pageNum>this.listData.total?t.showToast({icon:"none",duration:2e3,title:"没有更多数据了"}):(this.status="loading",this.showLoadMore=!0,this.getlistdata())},onPullDownRefresh:function(){this.status="loading",this.showLoadMore=!0,this.pageNum=0,this.getlistdata()},methods:{toback:function(){t.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},getlistdata:function(){var n=this;t.showLoading({title:"数据加载中..."});var i={token:this.Token,pageNum:this.pageNum,range:"year"};e.callFunction({name:"get",data:i}).then((function(i){if(t.hideLoading(),i.result.total>0)if(n.isnull=!1,i.result.list.length>0){var e=o(i.result.list);if(0==n.pageNum)n.listData=i.result;else{var a=n.listData.list.concat(e),u=n.utils.SplitArr(a,"useMonth");n.listData.list=u}}else{0==n.pageNum&&(n.listData={});var s=n.pageNum>0?"没有更多数据了":i.result.data.msg;t.showToast({icon:"none",duration:2e3,title:s})}else n.isnull=!0,t.showToast({title:"未查询到相关数据",icon:"none",duration:2e3})})).catch((function(i){n.isnull=!0,t.showToast({title:"查询失败，请重试",icon:"none",duration:2e3})}))},handleItem:function(n){this.islong=!0,t.navigateTo({url:"./details?id="+n})},handleLong:function(t,n,i){this.islong&&(this.islong=!1,this.inds={ind1:n,ind2:i},this.opearObj=t,this.$refs.annalpopup.open())},moreOper:function(n){this.islong=!0;var i=this;1==n?this.handleItem(this.opearObj._id):t.showModal({title:"提示",content:"是否确认删除此条数据？",success:function(n){n.confirm?(t.showLoading({title:"数据删除中..."}),e.callFunction({name:"remove",data:{token:i.Token,dataId:i.opearObj._id}}).then((function(n){t.hideLoading(),t.showToast({title:n.result.msg,duration:2e3}),i.listData.list[i.inds.ind1].list.splice(i.inds.ind2,1),i.inds={}})).catch((function(n){t.hideLoading(),t.showModal({content:"操作失败，请重新操作",showCancel:!1})}))):n.cancel&&console.log("用户点击取消")}}),this.$refs.annalpopup.close()},handleMonth:function(n,i){t.navigateTo({url:"./chart?year="+n+"&month="+i})},onshowproof:function(t){this.imgUrl=t,this.$refs.picture.open()}}};n.default=f}).call(this,i("543d")["default"],i("a9ff")["default"])},"834d":function(t,n,i){"use strict";i.r(n);var e=i("f421"),o=i("532f");for(var a in o)"default"!==a&&function(t){i.d(n,t,(function(){return o[t]}))}(a);var u,s=i("f0c5"),l=Object(s["a"])(o["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],u);n["default"]=l.exports},"8ed7":function(t,n,i){"use strict";(function(t){i("99cf"),i("921b");e(i("66fd"));var n=e(i("834d"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,i("543d")["createPage"])},f421:function(t,n,i){"use strict";var e,o=function(){var t=this,n=t.$createElement;t._self._c},a=[];i.d(n,"b",(function(){return o})),i.d(n,"c",(function(){return a})),i.d(n,"a",(function(){return e}))}},[["8ed7","common/runtime","common/vendor"]]]);
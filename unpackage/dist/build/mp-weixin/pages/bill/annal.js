(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bill/annal"],{"65cd":function(t,n,i){"use strict";(function(t,e){function o(t){return l(t)||s(t)||u(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,n){if(t){if("string"===typeof t)return r(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,n):void 0}}function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t){if(Array.isArray(t))return r(t)}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=new Array(n);i<n;i++)e[i]=t[i];return e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=function(){i.e("node-modules/@dcloudio/uni-ui/lib/uni-nav-bar/uni-nav-bar").then(function(){return resolve(i("c389"))}.bind(null,i)).catch(i.oe)},d=function(){i.e("node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup").then(function(){return resolve(i("d00b"))}.bind(null,i)).catch(i.oe)},f=function(){Promise.all([i.e("common/vendor"),i.e("node-modules/@dcloudio/uni-ui/lib/uni-list-item/uni-list-item")]).then(function(){return resolve(i("2e5a"))}.bind(null,i)).catch(i.oe)},h=function(){i.e("node-modules/@dcloudio/uni-ui/lib/uni-list/uni-list").then(function(){return resolve(i("a215"))}.bind(null,i)).catch(i.oe)},m={components:{uniList:h,uniListItem:f,uniPopup:d,uniNavBar:c},data:function(){return{num:0,pageNum:0,executionNum:0,Token:t.getStorageSync("userId")||"",startTime:"",imgUrl:"",status:"more",listData:{total:0},islong:!0,isnull:!1,opearObj:{},inds:{}}},onShow:function(){this.startTime=new Date,this.pageNum=0,this.getlistdata()},onUnload:function(){this.listData={},this.pageNum=0,this.status="more",this.showLoadMore=!1},onReachBottom:function(){this.pageNum+=1,100*this.pageNum>this.listData.total?t.showToast({icon:"none",duration:2e3,title:"没有更多数据了"}):(this.status="loading",this.showLoadMore=!0,this.getlistdata())},onPullDownRefresh:function(){this.status="loading",this.showLoadMore=!0,this.pageNum=0,this.getlistdata()},methods:{toback:function(){t.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},getlistdata:function(){var n=this;this.listData.total<1&&t.showLoading({title:"数据加载中..."});var i={token:this.Token,pageNum:this.pageNum,range:"year"};e.callFunction({name:"get",data:i}).then((function(i){if(n.listData.total<1&&t.hideLoading(),i.result.total>0)if(n.isnull=!1,i.result.list.length>0){var e=o(i.result.list);if(0==n.pageNum)n.listData=i.result;else{var a=n.listData.list.concat(e),u=n.utils.SplitArr(a,"useMonth");n.listData.list=u}}else{0==n.pageNum&&(n.listData={});var s=n.pageNum>0?"没有更多数据了":i.result.data.msg;t.showToast({icon:"none",duration:2e3,title:s})}else n.isnull=!0,t.showToast({title:"未查询到相关数据",icon:"none",duration:2e3})})).catch((function(i){n.isnull=!0,t.showToast({title:"查询失败，请重试",icon:"none",duration:2e3})}))},handleItem:function(n){this.islong=!0,t.navigateTo({url:"./details?id="+n})},handleLong:function(t,n,i){this.islong&&(this.islong=!1,this.inds={ind1:n,ind2:i},this.opearObj=t,this.$refs.annalpopup.open())},moreOper:function(n){this.islong=!0;var i=this;1==n?this.handleItem(this.opearObj._id):t.showModal({title:"提示",content:"是否确认删除此条数据？",success:function(n){n.confirm?(t.showLoading({title:"数据删除中..."}),e.callFunction({name:"remove",data:{token:i.Token,dataId:i.opearObj._id}}).then((function(n){t.hideLoading(),t.showToast({title:n.result.msg,duration:2e3}),i.listData.list[i.inds.ind1].list.splice(i.inds.ind2,1),i.inds={}})).catch((function(n){t.hideLoading(),t.showModal({content:"操作失败，请重新操作",showCancel:!1})}))):n.cancel&&console.log("用户点击取消")}}),this.$refs.annalpopup.close()},handleMonth:function(n,i){t.navigateTo({url:"./chart?year="+n+"&month="+i})},onshowproof:function(t){this.imgUrl=t,this.$refs.picture.open()}}};n.default=m}).call(this,i("543d")["default"],i("a9ff")["default"])},9551:function(t,n,i){"use strict";var e,o=function(){var t=this,n=t.$createElement;t._self._c},a=[];i.d(n,"b",(function(){return o})),i.d(n,"c",(function(){return a})),i.d(n,"a",(function(){return e}))},bf90:function(t,n,i){"use strict";(function(t){i("b40f"),i("921b");e(i("66fd"));var n=e(i("fd3a"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,i("543d")["createPage"])},ec7e:function(t,n,i){"use strict";i.r(n);var e=i("65cd"),o=i.n(e);for(var a in e)"default"!==a&&function(t){i.d(n,t,(function(){return e[t]}))}(a);n["default"]=o.a},fd3a:function(t,n,i){"use strict";i.r(n);var e=i("9551"),o=i("ec7e");for(var a in o)"default"!==a&&function(t){i.d(n,t,(function(){return o[t]}))}(a);var u,s=i("f0c5"),l=Object(s["a"])(o["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],u);n["default"]=l.exports}},[["bf90","common/runtime","common/vendor"]]]);
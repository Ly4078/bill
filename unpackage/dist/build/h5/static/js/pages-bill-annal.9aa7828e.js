(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bill-annal"],{"2d7c":function(t,n,i){"use strict";var e,a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"annal"},[e("uni-nav-bar",{attrs:{fixed:"true","status-bar":"true","left-icon":"back",title:"账单记录",color:"#333","background-color":"#f1f1f1"},on:{clickLeft:function(n){arguments[0]=n=t.$handleEvent(n),t.toback.apply(void 0,arguments)}}}),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.isnull,expression:"!isnull"}],staticClass:"annallist"},t._l(t.listData.list,(function(n,i){return e("uni-list",{key:i},[e("uni-list-item",{staticClass:"dateitem",attrs:{title:n.useYear+"年"+n.useMonth+"月",budget:"查年月账单","show-arrow":!1},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleMonth(n.useYear,n.useMonth)}}}),t._l(n.list,(function(n,a){return e("uni-list-item",{key:n.id,attrs:{title:n.useType.label,note:n.payType.label,remarks:n.remarks,amount:n.amount,datetime:n.useDate,icons:n.useType.iconclass,picture:n.picture,genre:n.genre,"show-arrow":!1},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleItem(n._id)},longpress:function(e){arguments[0]=e=t.$handleEvent(e),t.handleLong(n,i,a)},onshowproof:function(n){arguments[0]=n=t.$handleEvent(n),t.onshowproof.apply(void 0,arguments)}}})}))],2)})),1),t.isnull?e("v-uni-view",{staticClass:"nodata",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.getlistdata.apply(void 0,arguments)}}},[e("v-uni-image",{attrs:{src:i("f75d"),mode:"aspectFit"}}),e("v-uni-view",{staticClass:"notxt"},[t._v("数据为空，点我重试~")])],1):t._e(),e("uni-popup",{ref:"annalpopup",attrs:{type:"center"}},[e("v-uni-view",{staticClass:"operating"},[e("v-uni-view",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.moreOper(1)}}},[t._v("修改")]),e("v-uni-view",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.moreOper(2)}}},[t._v("删除")])],1)],1),e("uni-popup",{ref:"picture",attrs:{type:"center"}},[e("v-uni-image",{attrs:{src:t.imgUrl,mode:"aspectFit"}})],1)],1)},o=[];i.d(n,"b",(function(){return a})),i.d(n,"c",(function(){return o})),i.d(n,"a",(function(){return e}))},"83c8":function(t,n,i){"use strict";(function(t){var e=i("ee27");i("99af"),i("a434"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e(i("d0ff")),o=e(i("c389")),s=e(i("d00b")),u=e(i("2e5a")),l=e(i("a215")),r={components:{uniList:l.default,uniListItem:u.default,uniPopup:s.default,uniNavBar:o.default},data:function(){return{num:0,pageNum:0,executionNum:0,Token:uni.getStorageSync("userId")||"",startTime:"",imgUrl:"",status:"more",listData:{total:0},islong:!0,isnull:!1,opearObj:{},inds:{}}},onShow:function(){this.startTime=new Date,this.pageNum=0,this.getlistdata()},onUnload:function(){this.listData={},this.pageNum=0,this.status="more",this.showLoadMore=!1},onReachBottom:function(){this.pageNum+=1,100*this.pageNum>this.listData.total?uni.showToast({icon:"none",duration:2e3,title:"没有更多数据了"}):(this.status="loading",this.showLoadMore=!0,this.getlistdata())},onPullDownRefresh:function(){this.status="loading",this.showLoadMore=!0,this.pageNum=0,this.getlistdata()},methods:{toback:function(){uni.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},getlistdata:function(){var n=this;this.listData.total<1&&uni.showLoading({title:"数据加载中..."});var i={token:this.Token,pageNum:this.pageNum,range:"year"};t.callFunction({name:"get",data:i}).then((function(t){if(n.listData.total<1&&uni.hideLoading(),t.result.total>0)if(n.isnull=!1,t.result.list.length>0){var i=(0,a.default)(t.result.list);if(0==n.pageNum)n.listData=t.result;else{var e=n.listData.list.concat(i),o=n.utils.SplitArr(e,"useMonth");n.listData.list=o}}else{0==n.pageNum&&(n.listData={});var s=n.pageNum>0?"没有更多数据了":t.result.data.msg;uni.showToast({icon:"none",duration:2e3,title:s})}else n.isnull=!0,uni.showToast({title:"未查询到相关数据",icon:"none",duration:2e3})})).catch((function(t){n.isnull=!0,uni.showToast({title:"查询失败，请重试",icon:"none",duration:2e3})}))},handleItem:function(t){this.islong=!0,uni.navigateTo({url:"./details?id="+t})},handleLong:function(t,n,i){this.islong&&(this.islong=!1,this.inds={ind1:n,ind2:i},this.opearObj=t,this.$refs.annalpopup.open())},moreOper:function(n){this.islong=!0;var i=this;1==n?this.handleItem(this.opearObj._id):uni.showModal({title:"提示",content:"是否确认删除此条数据？",success:function(n){n.confirm?(uni.showLoading({title:"数据删除中..."}),t.callFunction({name:"remove",data:{token:i.Token,dataId:i.opearObj._id}}).then((function(t){uni.hideLoading(),uni.showToast({title:t.result.msg,duration:2e3}),i.listData.list[i.inds.ind1].list.splice(i.inds.ind2,1),i.inds={}})).catch((function(t){uni.hideLoading(),uni.showModal({content:"操作失败，请重新操作",showCancel:!1})}))):n.cancel&&console.log("用户点击取消")}}),this.$refs.annalpopup.close()},handleMonth:function(t,n){uni.navigateTo({url:"./chart?year="+t+"&month="+n})},onshowproof:function(t){this.imgUrl=t,this.$refs.picture.open()}}};n.default=r}).call(this,i("a9ff")["default"])},ec7e:function(t,n,i){"use strict";i.r(n);var e=i("83c8"),a=i.n(e);for(var o in e)"default"!==o&&function(t){i.d(n,t,(function(){return e[t]}))}(o);n["default"]=a.a},fd3a:function(t,n,i){"use strict";i.r(n);var e=i("2d7c"),a=i("ec7e");for(var o in a)"default"!==o&&function(t){i.d(n,t,(function(){return a[t]}))}(o);var s,u=i("f0c5"),l=Object(u["a"])(a["default"],e["b"],e["c"],!1,null,"faaf630e",null,!1,e["a"],s);n["default"]=l.exports}}]);